import{_ as f,u as h,i as p,h as m,s as y,x as g,y as P,z as b,r as v,o as n,c as u,a as k,d as o,k as c,v as i,A as D,F as V,f as x,t as l,j as U,B as w}from"./index-avGAcy_l.js";import{H as I}from"./Hero-ZsYcDuRv.js";const M={components:{Hero:I},data(){return{title:"",description:"",discount:0,price:0,img_url:"",produced_in:"",production_capacity:0,product_stock:0,selectedProducers:[],producers:[],success:!1,editMode:!1,productId:null}},async created(){const r=h();r.params.productId&&(this.editMode=!0,this.productId=r.params.productId,await this.fetchProductData()),await this.fetchProducers()},methods:{async fetchProductData(){try{const t=(await y(m(p,"products",this.productId))).data();this.title=t.title,this.description=t.description,this.discount=t.discount,this.price=t.price,this.img_url=t.img_url,this.produced_in=t.produced_in,this.product_stock=t.product_stock,this.production_capacity=t.production_capacity,this.selectedProducers=t.producers.map(d=>d)}catch(r){console.error("Error fetching product data:",r)}},async addProduct(){const r=this.selectedProducers;await g(m(p,"products",this.title),{title:this.title,description:this.description,discount:this.discount,price:this.price,img_url:this.img_url,produced_in:this.produced_in,product_stock:this.product_stock,production_capacity:this.production_capacity,producers:r}),this.success=!0},async fetchProducers(){const r=P(p,"producers"),t=await b(r);this.producers=t.docs.map(d=>({id:d.id,name:d.data().name,location:d.data().location}))}}},S={class:"form-group mt-3"},A=o("label",{for:"title"},"Title:",-1),B={class:"form-group mt-3"},C=o("label",{for:"description"},"Description:",-1),H={class:"form-group mt-3"},E=o("label",{for:"discount"},"Discount:",-1),N={class:"form-group mt-3"},F=o("label",{for:"price"},"Price:",-1),L={class:"form-group mt-3"},R=o("label",{for:"img_url"},"Image URL:",-1),T={class:"form-group mt-3"},j=o("label",{for:"produced_in"},"Produced In:",-1),z={class:"form-group mt-3"},q=o("label",{for:"production_capacity"},"Production Capacity:",-1),G={class:"form-group mt-3"},J=o("label",{for:"production_capacity"},"Stock:",-1),K={class:"form-group mt-3"},O=o("label",{for:"producers"},"Producers:",-1),Q=["value"],W={key:0,class:"alert alert-success"},X={type:"submit",class:"mt-5 btn btn-primary"};function Y(r,t,d,Z,s,a){const _=v("Hero");return n(),u("div",null,[k(_,{text1:s.editMode?"Edit Product":"Add Product"},null,8,["text1"]),o("form",{class:"container",onSubmit:t[9]||(t[9]=w((...e)=>a.addProduct&&a.addProduct(...e),["prevent"]))},[o("div",S,[A,c(o("input",{type:"text",id:"title",name:"title",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.title=e)},null,512),[[i,s.title]])]),o("div",B,[C,c(o("textarea",{id:"description",name:"description",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.description=e)},null,512),[[i,s.description]])]),o("div",H,[E,c(o("input",{type:"number",id:"discount",name:"discount",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>s.discount=e)},null,512),[[i,s.discount]])]),o("div",N,[F,c(o("input",{type:"number",id:"price",name:"price",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>s.price=e)},null,512),[[i,s.price]])]),o("div",L,[R,c(o("input",{type:"text",id:"img_url",name:"img_url",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>s.img_url=e)},null,512),[[i,s.img_url]])]),o("div",T,[j,c(o("input",{type:"text",id:"produced_in",name:"produced_in",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.produced_in=e)},null,512),[[i,s.produced_in]])]),o("div",z,[q,c(o("input",{type:"number",id:"production_capacity",name:"production_capacity",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.production_capacity=e)},null,512),[[i,s.production_capacity]])]),o("div",G,[J,c(o("input",{type:"number",id:"product_stock",name:"product_stock",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.product_stock=e)},null,512),[[i,s.product_stock]])]),o("div",K,[O,c(o("select",{id:"producers",name:"producers",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>s.selectedProducers=e),multiple:""},[(n(!0),u(V,null,x(s.producers,e=>(n(),u("option",{key:e.id,value:e},l(e.name)+" - "+l(e.location),9,Q))),128))],512),[[D,s.selectedProducers]])]),s.success?(n(),u("div",W,"Successfully added "+l(s.title),1)):U("",!0),o("button",X,l(s.editMode?"Update Product":"Add Product"),1)],32)])}const ot=f(M,[["render",Y]]);export{ot as default};
