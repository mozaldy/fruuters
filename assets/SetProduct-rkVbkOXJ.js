import{_ as v,u as b,f as p,k as m,z as C,A as k,e as _,g as f,r as V,o as n,c as u,a as D,d as o,m as c,v as d,y as h,F as g,h as y,t as l,l as U,B as w}from"./index-f0069yrR.js";import{H as x}from"./Hero-vzlgMYqL.js";const S={components:{Hero:x},data(){return{title:"",description:"",discount:0,price:0,img_url:"",produced_in:"",production_capacity:0,product_stock:0,selectedProducers:[],producers:[],selectedCategories:[],categories:[],success:!1,editMode:!1,productId:null}},async created(){const r=b();r.params.productId&&(this.editMode=!0,this.productId=r.params.productId,await this.fetchProductData()),await this.fetchProductCategories(),await this.fetchProducers()},methods:{async fetchProductData(){try{const t=(await C(m(p,"products",this.productId))).data();this.title=t.title,this.description=t.description,this.discount=t.discount,this.price=t.price,this.img_url=t.img_url,this.produced_in=t.produced_in,this.product_stock=t.product_stock,this.production_capacity=t.production_capacity,this.selectedProducers=t.producers.map(i=>i),this.selectedCategories=t.categories.map(i=>({id:i}))}catch(r){console.error("Error fetching product data:",r)}},async addProduct(){const r=this.selectedProducers,t=this.selectedCategories;await k(m(p,"products",this.title),{title:this.title,description:this.description,discount:this.discount,price:this.price,img_url:this.img_url,produced_in:this.produced_in,product_stock:this.product_stock,production_capacity:this.production_capacity,producers:r,categories:t}),this.success=!0},async fetchProducers(){const r=_(p,"producers"),t=await f(r);this.producers=t.docs.map(i=>({id:i.id,name:i.data().name,location:i.data().location}))},async fetchProductCategories(){const r=_(p,"product_categories"),t=await f(r);this.productCategories=t.docs.map(i=>({id:i.id,name:i.data().name}))}}},I={class:"form-group mt-3"},M=o("label",{for:"title"},"Title:",-1),A={class:"form-group mt-3"},B=o("label",{for:"description"},"Description:",-1),H={class:"form-group mt-3"},E=o("label",{for:"discount"},"Discount:",-1),N={class:"form-group mt-3"},F=o("label",{for:"price"},"Price:",-1),L={class:"form-group mt-3"},R=o("label",{for:"img_url"},"Image URL:",-1),T={class:"form-group mt-3"},z=o("label",{for:"produced_in"},"Produced In:",-1),j={class:"form-group mt-3"},q=o("label",{for:"production_capacity"},"Production Capacity:",-1),G={class:"form-group mt-3"},J=o("label",{for:"production_capacity"},"Stock:",-1),K={class:"form-group mt-3"},O=o("label",{for:"producers"},"Producers:",-1),Q=["value"],W={class:"form-group mt-3"},X=o("label",{for:"categories"},"Product Categories:",-1),Y=["value"],Z={key:0,class:"alert alert-success"},$={type:"submit",class:"mt-5 btn btn-primary"};function tt(r,t,i,ot,s,a){const P=V("Hero");return n(),u("div",null,[D(P,{text1:s.editMode?"Edit Product":"Add Product"},null,8,["text1"]),o("form",{class:"container",onSubmit:t[10]||(t[10]=w((...e)=>a.addProduct&&a.addProduct(...e),["prevent"]))},[o("div",I,[M,c(o("input",{type:"text",id:"title",name:"title",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>s.title=e)},null,512),[[d,s.title]])]),o("div",A,[B,c(o("textarea",{id:"description",name:"description",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>s.description=e)},null,512),[[d,s.description]])]),o("div",H,[E,c(o("input",{type:"number",id:"discount",name:"discount",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>s.discount=e)},null,512),[[d,s.discount]])]),o("div",N,[F,c(o("input",{type:"number",id:"price",name:"price",class:"form-control","onUpdate:modelValue":t[3]||(t[3]=e=>s.price=e)},null,512),[[d,s.price]])]),o("div",L,[R,c(o("input",{type:"text",id:"img_url",name:"img_url",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=e=>s.img_url=e)},null,512),[[d,s.img_url]])]),o("div",T,[z,c(o("input",{type:"text",id:"produced_in",name:"produced_in",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.produced_in=e)},null,512),[[d,s.produced_in]])]),o("div",j,[q,c(o("input",{type:"number",id:"production_capacity",name:"production_capacity",class:"form-control","onUpdate:modelValue":t[6]||(t[6]=e=>s.production_capacity=e)},null,512),[[d,s.production_capacity]])]),o("div",G,[J,c(o("input",{type:"number",id:"product_stock",name:"product_stock",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=e=>s.product_stock=e)},null,512),[[d,s.product_stock]])]),o("div",K,[O,c(o("select",{id:"producers",name:"producers",class:"form-control","onUpdate:modelValue":t[8]||(t[8]=e=>s.selectedProducers=e),multiple:""},[(n(!0),u(g,null,y(s.producers,e=>(n(),u("option",{key:e.id,value:e},l(e.name)+" - "+l(e.location),9,Q))),128))],512),[[h,s.selectedProducers]])]),o("div",W,[X,c(o("select",{id:"categories",name:"categories",class:"form-control","onUpdate:modelValue":t[9]||(t[9]=e=>s.selectedCategories=e),multiple:""},[(n(!0),u(g,null,y(r.productCategories,e=>(n(),u("option",{key:e.id,value:e},l(e.name),9,Y))),128))],512),[[h,s.selectedCategories]])]),s.success?(n(),u("div",Z,"Successfully added "+l(s.title),1)):U("",!0),o("button",$,l(s.editMode?"Update Product":"Add Product"),1)],32)])}const rt=v(S,[["render",tt]]);export{rt as default};
