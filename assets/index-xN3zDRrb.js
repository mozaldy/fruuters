(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var Dt="top",Qt="bottom",Xt="right",xt="left",Pc="auto",Br=[Dt,Qt,Xt,xt],bi="start",vr="end",Av="clippingParents",hf="viewport",Yi="popper",Iv="reference",Hh=Br.reduce(function(t,e){return t.concat([e+"-"+bi,e+"-"+vr])},[]),df=[].concat(Br,[Pc]).reduce(function(t,e){return t.concat([e,e+"-"+bi,e+"-"+vr])},[]),Cv="beforeRead",Sv="read",Rv="afterRead",Pv="beforeMain",Nv="main",Ov="afterMain",kv="beforeWrite",Dv="write",xv="afterWrite",Lv=[Cv,Sv,Rv,Pv,Nv,Ov,kv,Dv,xv];function Kn(t){return t?(t.nodeName||"").toLowerCase():null}function Jt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ai(t){var e=Jt(t).Element;return t instanceof e||t instanceof Element}function on(t){var e=Jt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ff(t){if(typeof ShadowRoot>"u")return!1;var e=Jt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function nC(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var s=e.styles[n]||{},i=e.attributes[n]||{},r=e.elements[n];!on(r)||!Kn(r)||(Object.assign(r.style,s),Object.keys(i).forEach(function(o){var a=i[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function sC(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(s){var i=e.elements[s],r=e.attributes[s]||{},o=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:n[s]),a=o.reduce(function(l,c){return l[c]="",l},{});!on(i)||!Kn(i)||(Object.assign(i.style,a),Object.keys(r).forEach(function(l){i.removeAttribute(l)}))})}}const pf={name:"applyStyles",enabled:!0,phase:"write",fn:nC,effect:sC,requires:["computeStyles"]};function Bn(t){return t.split("-")[0]}var gi=Math.max,Dl=Math.min,Er=Math.round;function jh(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mv(){return!/^((?!chrome|android).)*safari/i.test(jh())}function Tr(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var s=t.getBoundingClientRect(),i=1,r=1;e&&on(t)&&(i=t.offsetWidth>0&&Er(s.width)/t.offsetWidth||1,r=t.offsetHeight>0&&Er(s.height)/t.offsetHeight||1);var o=Ai(t)?Jt(t):window,a=o.visualViewport,l=!Mv()&&n,c=(s.left+(l&&a?a.offsetLeft:0))/i,u=(s.top+(l&&a?a.offsetTop:0))/r,h=s.width/i,d=s.height/r;return{width:h,height:d,top:u,right:c+h,bottom:u+d,left:c,x:c,y:u}}function mf(t){var e=Tr(t),n=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:s}}function Vv(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ff(n)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function hs(t){return Jt(t).getComputedStyle(t)}function iC(t){return["table","td","th"].indexOf(Kn(t))>=0}function Ys(t){return((Ai(t)?t.ownerDocument:t.document)||window.document).documentElement}function Nc(t){return Kn(t)==="html"?t:t.assignedSlot||t.parentNode||(ff(t)?t.host:null)||Ys(t)}function xm(t){return!on(t)||hs(t).position==="fixed"?null:t.offsetParent}function rC(t){var e=/firefox/i.test(jh()),n=/Trident/i.test(jh());if(n&&on(t)){var s=hs(t);if(s.position==="fixed")return null}var i=Nc(t);for(ff(i)&&(i=i.host);on(i)&&["html","body"].indexOf(Kn(i))<0;){var r=hs(i);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return i;i=i.parentNode}return null}function _a(t){for(var e=Jt(t),n=xm(t);n&&iC(n)&&hs(n).position==="static";)n=xm(n);return n&&(Kn(n)==="html"||Kn(n)==="body"&&hs(n).position==="static")?e:n||rC(t)||e}function _f(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Io(t,e,n){return gi(t,Dl(e,n))}function oC(t,e,n){var s=Io(t,e,n);return s>n?n:s}function Fv(){return{top:0,right:0,bottom:0,left:0}}function $v(t){return Object.assign({},Fv(),t)}function Uv(t,e){return e.reduce(function(n,s){return n[s]=t,n},{})}var aC=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,$v(typeof e!="number"?e:Uv(e,Br))};function lC(t){var e,n=t.state,s=t.name,i=t.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Bn(n.placement),l=_f(a),c=[xt,Xt].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=aC(i.padding,n),d=mf(r),f=l==="y"?Dt:xt,_=l==="y"?Qt:Xt,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],E=_a(r),C=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,w=g/2-y/2,b=h[f],M=C-d[u]-h[_],P=C/2-d[u]/2+w,q=Io(b,P,M),V=l;n.modifiersData[s]=(e={},e[V]=q,e.centerOffset=q-P,e)}}function cC(t){var e=t.state,n=t.options,s=n.element,i=s===void 0?"[data-popper-arrow]":s;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Vv(e.elements.popper,i)&&(e.elements.arrow=i))}const Bv={name:"arrow",enabled:!0,phase:"main",fn:lC,effect:cC,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wr(t){return t.split("-")[1]}var uC={top:"auto",right:"auto",bottom:"auto",left:"auto"};function hC(t,e){var n=t.x,s=t.y,i=e.devicePixelRatio||1;return{x:Er(n*i)/i||0,y:Er(s*i)/i||0}}function Lm(t){var e,n=t.popper,s=t.popperRect,i=t.placement,r=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=o.x,f=d===void 0?0:d,_=o.y,g=_===void 0?0:_,y=typeof u=="function"?u({x:f,y:g}):{x:f,y:g};f=y.x,g=y.y;var E=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),w=xt,b=Dt,M=window;if(c){var P=_a(n),q="clientHeight",V="clientWidth";if(P===Jt(n)&&(P=Ys(n),hs(P).position!=="static"&&a==="absolute"&&(q="scrollHeight",V="scrollWidth")),P=P,i===Dt||(i===xt||i===Xt)&&r===vr){b=Qt;var Z=h&&P===M&&M.visualViewport?M.visualViewport.height:P[q];g-=Z-s.height,g*=l?1:-1}if(i===xt||(i===Dt||i===Qt)&&r===vr){w=Xt;var Y=h&&P===M&&M.visualViewport?M.visualViewport.width:P[V];f-=Y-s.width,f*=l?1:-1}}var fe=Object.assign({position:a},c&&uC),j=u===!0?hC({x:f,y:g},Jt(n)):{x:f,y:g};if(f=j.x,g=j.y,l){var ie;return Object.assign({},fe,(ie={},ie[b]=C?"0":"",ie[w]=E?"0":"",ie.transform=(M.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",ie))}return Object.assign({},fe,(e={},e[b]=C?g+"px":"",e[w]=E?f+"px":"",e.transform="",e))}function dC(t){var e=t.state,n=t.options,s=n.gpuAcceleration,i=s===void 0?!0:s,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Bn(e.placement),variation:wr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Lm(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Lm(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const gf={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:dC,data:{}};var qa={passive:!0};function fC(t){var e=t.state,n=t.instance,s=t.options,i=s.scroll,r=i===void 0?!0:i,o=s.resize,a=o===void 0?!0:o,l=Jt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,qa)}),a&&l.addEventListener("resize",n.update,qa),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,qa)}),a&&l.removeEventListener("resize",n.update,qa)}}const yf={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:fC,data:{}};var pC={left:"right",right:"left",bottom:"top",top:"bottom"};function yl(t){return t.replace(/left|right|bottom|top/g,function(e){return pC[e]})}var mC={start:"end",end:"start"};function Mm(t){return t.replace(/start|end/g,function(e){return mC[e]})}function vf(t){var e=Jt(t),n=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:n,scrollTop:s}}function Ef(t){return Tr(Ys(t)).left+vf(t).scrollLeft}function _C(t,e){var n=Jt(t),s=Ys(t),i=n.visualViewport,r=s.clientWidth,o=s.clientHeight,a=0,l=0;if(i){r=i.width,o=i.height;var c=Mv();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:r,height:o,x:a+Ef(t),y:l}}function gC(t){var e,n=Ys(t),s=vf(t),i=(e=t.ownerDocument)==null?void 0:e.body,r=gi(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=gi(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-s.scrollLeft+Ef(t),l=-s.scrollTop;return hs(i||n).direction==="rtl"&&(a+=gi(n.clientWidth,i?i.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Tf(t){var e=hs(t),n=e.overflow,s=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+s)}function Hv(t){return["html","body","#document"].indexOf(Kn(t))>=0?t.ownerDocument.body:on(t)&&Tf(t)?t:Hv(Nc(t))}function Co(t,e){var n;e===void 0&&(e=[]);var s=Hv(t),i=s===((n=t.ownerDocument)==null?void 0:n.body),r=Jt(s),o=i?[r].concat(r.visualViewport||[],Tf(s)?s:[]):s,a=e.concat(o);return i?a:a.concat(Co(Nc(o)))}function Wh(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function yC(t,e){var n=Tr(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Vm(t,e,n){return e===hf?Wh(_C(t,n)):Ai(e)?yC(e,n):Wh(gC(Ys(t)))}function vC(t){var e=Co(Nc(t)),n=["absolute","fixed"].indexOf(hs(t).position)>=0,s=n&&on(t)?_a(t):t;return Ai(s)?e.filter(function(i){return Ai(i)&&Vv(i,s)&&Kn(i)!=="body"}):[]}function EC(t,e,n,s){var i=e==="clippingParents"?vC(t):[].concat(e),r=[].concat(i,[n]),o=r[0],a=r.reduce(function(l,c){var u=Vm(t,c,s);return l.top=gi(u.top,l.top),l.right=Dl(u.right,l.right),l.bottom=Dl(u.bottom,l.bottom),l.left=gi(u.left,l.left),l},Vm(t,o,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function jv(t){var e=t.reference,n=t.element,s=t.placement,i=s?Bn(s):null,r=s?wr(s):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Dt:l={x:o,y:e.y-n.height};break;case Qt:l={x:o,y:e.y+e.height};break;case Xt:l={x:e.x+e.width,y:a};break;case xt:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?_f(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case bi:l[c]=l[c]-(e[u]/2-n[u]/2);break;case vr:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function br(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=s===void 0?t.placement:s,r=n.strategy,o=r===void 0?t.strategy:r,a=n.boundary,l=a===void 0?Av:a,c=n.rootBoundary,u=c===void 0?hf:c,h=n.elementContext,d=h===void 0?Yi:h,f=n.altBoundary,_=f===void 0?!1:f,g=n.padding,y=g===void 0?0:g,E=$v(typeof y!="number"?y:Uv(y,Br)),C=d===Yi?Iv:Yi,w=t.rects.popper,b=t.elements[_?C:d],M=EC(Ai(b)?b:b.contextElement||Ys(t.elements.popper),l,u,o),P=Tr(t.elements.reference),q=jv({reference:P,element:w,strategy:"absolute",placement:i}),V=Wh(Object.assign({},w,q)),Z=d===Yi?V:P,Y={top:M.top-Z.top+E.top,bottom:Z.bottom-M.bottom+E.bottom,left:M.left-Z.left+E.left,right:Z.right-M.right+E.right},fe=t.modifiersData.offset;if(d===Yi&&fe){var j=fe[i];Object.keys(Y).forEach(function(ie){var We=[Xt,Qt].indexOf(ie)>=0?1:-1,ct=[Dt,Qt].indexOf(ie)>=0?"y":"x";Y[ie]+=j[ct]*We})}return Y}function TC(t,e){e===void 0&&(e={});var n=e,s=n.placement,i=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?df:l,u=wr(s),h=u?a?Hh:Hh.filter(function(_){return wr(_)===u}):Br,d=h.filter(function(_){return c.indexOf(_)>=0});d.length===0&&(d=h);var f=d.reduce(function(_,g){return _[g]=br(t,{placement:g,boundary:i,rootBoundary:r,padding:o})[Bn(g)],_},{});return Object.keys(f).sort(function(_,g){return f[_]-f[g]})}function wC(t){if(Bn(t)===Pc)return[];var e=yl(t);return[Mm(t),e,Mm(e)]}function bC(t){var e=t.state,n=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,f=n.flipVariations,_=f===void 0?!0:f,g=n.allowedAutoPlacements,y=e.options.placement,E=Bn(y),C=E===y,w=l||(C||!_?[yl(y)]:wC(y)),b=[y].concat(w).reduce(function(jt,Wt){return jt.concat(Bn(Wt)===Pc?TC(e,{placement:Wt,boundary:u,rootBoundary:h,padding:c,flipVariations:_,allowedAutoPlacements:g}):Wt)},[]),M=e.rects.reference,P=e.rects.popper,q=new Map,V=!0,Z=b[0],Y=0;Y<b.length;Y++){var fe=b[Y],j=Bn(fe),ie=wr(fe)===bi,We=[Dt,Qt].indexOf(j)>=0,ct=We?"width":"height",_e=br(e,{placement:fe,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),ce=We?ie?Xt:xt:ie?Qt:Dt;M[ct]>P[ct]&&(ce=yl(ce));var ge=yl(ce),ut=[];if(r&&ut.push(_e[j]<=0),a&&ut.push(_e[ce]<=0,_e[ge]<=0),ut.every(function(jt){return jt})){Z=fe,V=!1;break}q.set(fe,ut)}if(V)for(var Ht=_?3:1,Vt=function(Wt){var Ke=b.find(function(I){var B=q.get(I);if(B)return B.slice(0,Wt).every(function(F){return F})});if(Ke)return Z=Ke,"break"},Xe=Ht;Xe>0;Xe--){var fn=Vt(Xe);if(fn==="break")break}e.placement!==Z&&(e.modifiersData[s]._skip=!0,e.placement=Z,e.reset=!0)}}const Wv={name:"flip",enabled:!0,phase:"main",fn:bC,requiresIfExists:["offset"],data:{_skip:!1}};function Fm(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function $m(t){return[Dt,Xt,Qt,xt].some(function(e){return t[e]>=0})}function AC(t){var e=t.state,n=t.name,s=e.rects.reference,i=e.rects.popper,r=e.modifiersData.preventOverflow,o=br(e,{elementContext:"reference"}),a=br(e,{altBoundary:!0}),l=Fm(o,s),c=Fm(a,i,r),u=$m(l),h=$m(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const qv={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:AC};function IC(t,e,n){var s=Bn(t),i=[xt,Dt].indexOf(s)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*i,[xt,Xt].indexOf(s)>=0?{x:a,y:o}:{x:o,y:a}}function CC(t){var e=t.state,n=t.options,s=t.name,i=n.offset,r=i===void 0?[0,0]:i,o=df.reduce(function(u,h){return u[h]=IC(h,e.rects,r),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[s]=o}const Kv={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:CC};function SC(t){var e=t.state,n=t.name;e.modifiersData[n]=jv({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const wf={name:"popperOffsets",enabled:!0,phase:"read",fn:SC,data:{}};function RC(t){return t==="x"?"y":"x"}function PC(t){var e=t.state,n=t.options,s=t.name,i=n.mainAxis,r=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,f=d===void 0?!0:d,_=n.tetherOffset,g=_===void 0?0:_,y=br(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),E=Bn(e.placement),C=wr(e.placement),w=!C,b=_f(E),M=RC(b),P=e.modifiersData.popperOffsets,q=e.rects.reference,V=e.rects.popper,Z=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,Y=typeof Z=="number"?{mainAxis:Z,altAxis:Z}:Object.assign({mainAxis:0,altAxis:0},Z),fe=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(P){if(r){var ie,We=b==="y"?Dt:xt,ct=b==="y"?Qt:Xt,_e=b==="y"?"height":"width",ce=P[b],ge=ce+y[We],ut=ce-y[ct],Ht=f?-V[_e]/2:0,Vt=C===bi?q[_e]:V[_e],Xe=C===bi?-V[_e]:-q[_e],fn=e.elements.arrow,jt=f&&fn?mf(fn):{width:0,height:0},Wt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Fv(),Ke=Wt[We],I=Wt[ct],B=Io(0,q[_e],jt[_e]),F=w?q[_e]/2-Ht-B-Ke-Y.mainAxis:Vt-B-Ke-Y.mainAxis,z=w?-q[_e]/2+Ht+B+I+Y.mainAxis:Xe+B+I+Y.mainAxis,ve=e.elements.arrow&&_a(e.elements.arrow),xe=ve?b==="y"?ve.clientTop||0:ve.clientLeft||0:0,p=(ie=fe==null?void 0:fe[b])!=null?ie:0,m=ce+F-p-xe,v=ce+z-p,S=Io(f?Dl(ge,m):ge,ce,f?gi(ut,v):ut);P[b]=S,j[b]=S-ce}if(a){var A,x=b==="x"?Dt:xt,H=b==="x"?Qt:Xt,D=P[M],L=M==="y"?"height":"width",O=D+y[x],W=D-y[H],Q=[Dt,xt].indexOf(E)!==-1,G=(A=fe==null?void 0:fe[M])!=null?A:0,ne=Q?O:D-q[L]-V[L]-G+Y.altAxis,he=Q?D+q[L]+V[L]-G-Y.altAxis:W,Ie=f&&Q?oC(ne,D,he):Io(f?ne:O,D,f?he:W);P[M]=Ie,j[M]=Ie-D}e.modifiersData[s]=j}}const zv={name:"preventOverflow",enabled:!0,phase:"main",fn:PC,requiresIfExists:["offset"]};function NC(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function OC(t){return t===Jt(t)||!on(t)?vf(t):NC(t)}function kC(t){var e=t.getBoundingClientRect(),n=Er(e.width)/t.offsetWidth||1,s=Er(e.height)/t.offsetHeight||1;return n!==1||s!==1}function DC(t,e,n){n===void 0&&(n=!1);var s=on(e),i=on(e)&&kC(e),r=Ys(e),o=Tr(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!n)&&((Kn(e)!=="body"||Tf(r))&&(a=OC(e)),on(e)?(l=Tr(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=Ef(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function xC(t){var e=new Map,n=new Set,s=[];t.forEach(function(r){e.set(r.name,r)});function i(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),s.push(r)}return t.forEach(function(r){n.has(r.name)||i(r)}),s}function LC(t){var e=xC(t);return Lv.reduce(function(n,s){return n.concat(e.filter(function(i){return i.phase===s}))},[])}function MC(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function VC(t){var e=t.reduce(function(n,s){var i=n[s.name];return n[s.name]=i?Object.assign({},i,s,{options:Object.assign({},i.options,s.options),data:Object.assign({},i.data,s.data)}):s,n},{});return Object.keys(e).map(function(n){return e[n]})}var Um={placement:"bottom",modifiers:[],strategy:"absolute"};function Bm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Oc(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,s=n===void 0?[]:n,i=e.defaultOptions,r=i===void 0?Um:i;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Um,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],d=!1,f={state:u,setOptions:function(E){var C=typeof E=="function"?E(u.options):E;g(),u.options=Object.assign({},r,u.options,C),u.scrollParents={reference:Ai(a)?Co(a):a.contextElement?Co(a.contextElement):[],popper:Co(l)};var w=LC(VC([].concat(s,u.options.modifiers)));return u.orderedModifiers=w.filter(function(b){return b.enabled}),_(),f.update()},forceUpdate:function(){if(!d){var E=u.elements,C=E.reference,w=E.popper;if(Bm(C,w)){u.rects={reference:DC(C,_a(w),u.options.strategy==="fixed"),popper:mf(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(Y){return u.modifiersData[Y.name]=Object.assign({},Y.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var M=u.orderedModifiers[b],P=M.fn,q=M.options,V=q===void 0?{}:q,Z=M.name;typeof P=="function"&&(u=P({state:u,options:V,name:Z,instance:f})||u)}}}},update:MC(function(){return new Promise(function(y){f.forceUpdate(),y(u)})}),destroy:function(){g(),d=!0}};if(!Bm(a,l))return f;f.setOptions(c).then(function(y){!d&&c.onFirstUpdate&&c.onFirstUpdate(y)});function _(){u.orderedModifiers.forEach(function(y){var E=y.name,C=y.options,w=C===void 0?{}:C,b=y.effect;if(typeof b=="function"){var M=b({state:u,name:E,instance:f,options:w}),P=function(){};h.push(M||P)}})}function g(){h.forEach(function(y){return y()}),h=[]}return f}}var FC=Oc(),$C=[yf,wf,gf,pf],UC=Oc({defaultModifiers:$C}),BC=[yf,wf,gf,pf,Kv,Wv,zv,Bv,qv],bf=Oc({defaultModifiers:BC});const Gv=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ov,afterRead:Rv,afterWrite:xv,applyStyles:pf,arrow:Bv,auto:Pc,basePlacements:Br,beforeMain:Pv,beforeRead:Cv,beforeWrite:kv,bottom:Qt,clippingParents:Av,computeStyles:gf,createPopper:bf,createPopperBase:FC,createPopperLite:UC,detectOverflow:br,end:vr,eventListeners:yf,flip:Wv,hide:qv,left:xt,main:Nv,modifierPhases:Lv,offset:Kv,placements:df,popper:Yi,popperGenerator:Oc,popperOffsets:wf,preventOverflow:zv,read:Sv,reference:Iv,right:Xt,start:bi,top:Dt,variationPlacements:Hh,viewport:hf,write:Dv},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Es=new Map,Uu={set(t,e,n){Es.has(t)||Es.set(t,new Map);const s=Es.get(t);if(!s.has(e)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(e,n)},get(t,e){return Es.has(t)&&Es.get(t).get(e)||null},remove(t,e){if(!Es.has(t))return;const n=Es.get(t);n.delete(e),n.size===0&&Es.delete(t)}},HC=1e6,jC=1e3,qh="transitionend",Yv=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(e,n)=>`#${CSS.escape(n)}`)),t),WC=t=>t==null?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),qC=t=>{do t+=Math.floor(Math.random()*HC);while(document.getElementById(t));return t},KC=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const s=Number.parseFloat(e),i=Number.parseFloat(n);return!s&&!i?0:(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*jC)},Qv=t=>{t.dispatchEvent(new Event(qh))},rs=t=>!t||typeof t!="object"?!1:(typeof t.jquery<"u"&&(t=t[0]),typeof t.nodeType<"u"),$s=t=>rs(t)?t.jquery?t[0]:t:typeof t=="string"&&t.length>0?document.querySelector(Yv(t)):null,Hr=t=>{if(!rs(t)||t.getClientRects().length===0)return!1;const e=getComputedStyle(t).getPropertyValue("visibility")==="visible",n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const s=t.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return e},Us=t=>!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled")?!0:typeof t.disabled<"u"?t.disabled:t.hasAttribute("disabled")&&t.getAttribute("disabled")!=="false",Xv=t=>{if(!document.documentElement.attachShadow)return null;if(typeof t.getRootNode=="function"){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Xv(t.parentNode):null},xl=()=>{},ga=t=>{t.offsetHeight},Jv=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Bu=[],zC=t=>{document.readyState==="loading"?(Bu.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of Bu)e()}),Bu.push(t)):t()},cn=()=>document.documentElement.dir==="rtl",dn=t=>{zC(()=>{const e=Jv();if(e){const n=t.NAME,s=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=s,t.jQueryInterface)}})},$t=(t,e=[],n=t)=>typeof t=="function"?t(...e):n,Zv=(t,e,n=!0)=>{if(!n){$t(t);return}const i=KC(e)+5;let r=!1;const o=({target:a})=>{a===e&&(r=!0,e.removeEventListener(qh,o),$t(t))};e.addEventListener(qh,o),setTimeout(()=>{r||Qv(e)},i)},Af=(t,e,n,s)=>{const i=t.length;let r=t.indexOf(e);return r===-1?!n&&s?t[i-1]:t[0]:(r+=n?1:-1,s&&(r=(r+i)%i),t[Math.max(0,Math.min(r,i-1))])},GC=/[^.]*(?=\..*)\.|.*/,YC=/\..*/,QC=/::\d+$/,Hu={};let Hm=1;const eE={mouseenter:"mouseover",mouseleave:"mouseout"},XC=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function tE(t,e){return e&&`${e}::${Hm++}`||t.uidEvent||Hm++}function nE(t){const e=tE(t);return t.uidEvent=e,Hu[e]=Hu[e]||{},Hu[e]}function JC(t,e){return function n(s){return If(s,{delegateTarget:t}),n.oneOff&&R.off(t,s.type,e),e.apply(t,[s])}}function ZC(t,e,n){return function s(i){const r=t.querySelectorAll(e);for(let{target:o}=i;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return If(i,{delegateTarget:o}),s.oneOff&&R.off(t,i.type,e,n),n.apply(o,[i])}}function sE(t,e,n=null){return Object.values(t).find(s=>s.callable===e&&s.delegationSelector===n)}function iE(t,e,n){const s=typeof e=="string",i=s?n:e||n;let r=rE(t);return XC.has(r)||(r=t),[s,i,r]}function jm(t,e,n,s,i){if(typeof e!="string"||!t)return;let[r,o,a]=iE(e,n,s);e in eE&&(o=(_=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return _.call(this,g)})(o));const l=nE(t),c=l[a]||(l[a]={}),u=sE(c,o,r?n:null);if(u){u.oneOff=u.oneOff&&i;return}const h=tE(o,e.replace(GC,"")),d=r?ZC(t,n,o):JC(t,o);d.delegationSelector=r?n:null,d.callable=o,d.oneOff=i,d.uidEvent=h,c[h]=d,t.addEventListener(a,d,r)}function Kh(t,e,n,s,i){const r=sE(e[n],s,i);r&&(t.removeEventListener(n,r,!!i),delete e[n][r.uidEvent])}function eS(t,e,n,s){const i=e[n]||{};for(const[r,o]of Object.entries(i))r.includes(s)&&Kh(t,e,n,o.callable,o.delegationSelector)}function rE(t){return t=t.replace(YC,""),eE[t]||t}const R={on(t,e,n,s){jm(t,e,n,s,!1)},one(t,e,n,s){jm(t,e,n,s,!0)},off(t,e,n,s){if(typeof e!="string"||!t)return;const[i,r,o]=iE(e,n,s),a=o!==e,l=nE(t),c=l[o]||{},u=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;Kh(t,l,o,r,i?n:null);return}if(u)for(const h of Object.keys(l))eS(t,l,h,e.slice(1));for(const[h,d]of Object.entries(c)){const f=h.replace(QC,"");(!a||e.includes(f))&&Kh(t,l,o,d.callable,d.delegationSelector)}},trigger(t,e,n){if(typeof e!="string"||!t)return null;const s=Jv(),i=rE(e),r=e!==i;let o=null,a=!0,l=!0,c=!1;r&&s&&(o=s.Event(e,n),s(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=If(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function If(t,e={}){for(const[n,s]of Object.entries(e))try{t[n]=s}catch{Object.defineProperty(t,n,{configurable:!0,get(){return s}})}return t}function Wm(t){if(t==="true")return!0;if(t==="false")return!1;if(t===Number(t).toString())return Number(t);if(t===""||t==="null")return null;if(typeof t!="string")return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function ju(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const os={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${ju(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${ju(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let i=s.replace(/^bs/,"");i=i.charAt(0).toLowerCase()+i.slice(1,i.length),e[i]=Wm(t.dataset[s])}return e},getDataAttribute(t,e){return Wm(t.getAttribute(`data-bs-${ju(e)}`))}};class ya{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,n){const s=rs(n)?os.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...rs(n)?os.getDataAttributes(n):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,n=this.constructor.DefaultType){for(const[s,i]of Object.entries(n)){const r=e[s],o=rs(r)?"element":WC(r);if(!new RegExp(i).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${o}" but expected type "${i}".`)}}}const tS="5.3.2";class Pn extends ya{constructor(e,n){super(),e=$s(e),e&&(this._element=e,this._config=this._getConfig(n),Uu.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Uu.remove(this._element,this.constructor.DATA_KEY),R.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,n,s=!0){Zv(e,n,s)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Uu.get($s(e),this.DATA_KEY)}static getOrCreateInstance(e,n={}){return this.getInstance(e)||new this(e,typeof n=="object"?n:null)}static get VERSION(){return tS}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const Wu=t=>{let e=t.getAttribute("data-bs-target");if(!e||e==="#"){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&n!=="#"?Yv(n.trim()):null}return e},J={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter(n=>n.matches(e))},parents(t,e){const n=[];let s=t.parentNode.closest(e);for(;s;)n.push(s),s=s.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(n=>!Us(n)&&Hr(n))},getSelectorFromElement(t){const e=Wu(t);return e&&J.findOne(e)?e:null},getElementFromSelector(t){const e=Wu(t);return e?J.findOne(e):null},getMultipleElementsFromSelector(t){const e=Wu(t);return e?J.find(e):[]}},kc=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;R.on(document,n,`[data-bs-dismiss="${s}"]`,function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),Us(this))return;const r=J.getElementFromSelector(this)||this.closest(`.${s}`);t.getOrCreateInstance(r)[e]()})},nS="alert",sS="bs.alert",oE=`.${sS}`,iS=`close${oE}`,rS=`closed${oE}`,oS="fade",aS="show";class Dc extends Pn{static get NAME(){return nS}close(){if(R.trigger(this._element,iS).defaultPrevented)return;this._element.classList.remove(aS);const n=this._element.classList.contains(oS);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),R.trigger(this._element,rS),this.dispose()}static jQueryInterface(e){return this.each(function(){const n=Dc.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}kc(Dc,"close");dn(Dc);const lS="button",cS="bs.button",uS=`.${cS}`,hS=".data-api",dS="active",qm='[data-bs-toggle="button"]',fS=`click${uS}${hS}`;class xc extends Pn{static get NAME(){return lS}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(dS))}static jQueryInterface(e){return this.each(function(){const n=xc.getOrCreateInstance(this);e==="toggle"&&n[e]()})}}R.on(document,fS,qm,t=>{t.preventDefault();const e=t.target.closest(qm);xc.getOrCreateInstance(e).toggle()});dn(xc);const pS="swipe",jr=".bs.swipe",mS=`touchstart${jr}`,_S=`touchmove${jr}`,gS=`touchend${jr}`,yS=`pointerdown${jr}`,vS=`pointerup${jr}`,ES="touch",TS="pen",wS="pointer-event",bS=40,AS={endCallback:null,leftCallback:null,rightCallback:null},IS={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ll extends ya{constructor(e,n){super(),this._element=e,!(!e||!Ll.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return AS}static get DefaultType(){return IS}static get NAME(){return pS}dispose(){R.off(this._element,jr)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),$t(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=bS)return;const n=e/this._deltaX;this._deltaX=0,n&&$t(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(R.on(this._element,yS,e=>this._start(e)),R.on(this._element,vS,e=>this._end(e)),this._element.classList.add(wS)):(R.on(this._element,mS,e=>this._start(e)),R.on(this._element,_S,e=>this._move(e)),R.on(this._element,gS,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===TS||e.pointerType===ES)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const CS="carousel",SS="bs.carousel",Qs=`.${SS}`,aE=".data-api",RS="ArrowLeft",PS="ArrowRight",NS=500,ro="next",qi="prev",Qi="left",vl="right",OS=`slide${Qs}`,qu=`slid${Qs}`,kS=`keydown${Qs}`,DS=`mouseenter${Qs}`,xS=`mouseleave${Qs}`,LS=`dragstart${Qs}`,MS=`load${Qs}${aE}`,VS=`click${Qs}${aE}`,lE="carousel",Ka="active",FS="slide",$S="carousel-item-end",US="carousel-item-start",BS="carousel-item-next",HS="carousel-item-prev",cE=".active",uE=".carousel-item",jS=cE+uE,WS=".carousel-item img",qS=".carousel-indicators",KS="[data-bs-slide], [data-bs-slide-to]",zS='[data-bs-ride="carousel"]',GS={[RS]:vl,[PS]:Qi},YS={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},QS={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class va extends Pn{constructor(e,n){super(e,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=J.findOne(qS,this._element),this._addEventListeners(),this._config.ride===lE&&this.cycle()}static get Default(){return YS}static get DefaultType(){return QS}static get NAME(){return CS}next(){this._slide(ro)}nextWhenVisible(){!document.hidden&&Hr(this._element)&&this.next()}prev(){this._slide(qi)}pause(){this._isSliding&&Qv(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){R.one(this._element,qu,()=>this.cycle());return}this.cycle()}}to(e){const n=this._getItems();if(e>n.length-1||e<0)return;if(this._isSliding){R.one(this._element,qu,()=>this.to(e));return}const s=this._getItemIndex(this._getActive());if(s===e)return;const i=e>s?ro:qi;this._slide(i,n[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&R.on(this._element,kS,e=>this._keydown(e)),this._config.pause==="hover"&&(R.on(this._element,DS,()=>this.pause()),R.on(this._element,xS,()=>this._maybeEnableCycle())),this._config.touch&&Ll.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of J.find(WS,this._element))R.on(s,LS,i=>i.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Qi)),rightCallback:()=>this._slide(this._directionToOrder(vl)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),NS+this._config.interval))}};this._swipeHelper=new Ll(this._element,n)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const n=GS[e.key];n&&(e.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const n=J.findOne(cE,this._indicatorsElement);n.classList.remove(Ka),n.removeAttribute("aria-current");const s=J.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);s&&(s.classList.add(Ka),s.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const n=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(e,n=null){if(this._isSliding)return;const s=this._getActive(),i=e===ro,r=n||Af(this._getItems(),s,i,this._config.wrap);if(r===s)return;const o=this._getItemIndex(r),a=f=>R.trigger(this._element,f,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(s),to:o});if(a(OS).defaultPrevented||!s||!r)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const u=i?US:$S,h=i?BS:HS;r.classList.add(h),ga(r),s.classList.add(u),r.classList.add(u);const d=()=>{r.classList.remove(u,h),r.classList.add(Ka),s.classList.remove(Ka,h,u),this._isSliding=!1,a(qu)};this._queueCallback(d,s,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(FS)}_getActive(){return J.findOne(jS,this._element)}_getItems(){return J.find(uE,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return cn()?e===Qi?qi:ro:e===Qi?ro:qi}_orderToDirection(e){return cn()?e===qi?Qi:vl:e===qi?vl:Qi}static jQueryInterface(e){return this.each(function(){const n=va.getOrCreateInstance(this,e);if(typeof e=="number"){n.to(e);return}if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}R.on(document,VS,KS,function(t){const e=J.getElementFromSelector(this);if(!e||!e.classList.contains(lE))return;t.preventDefault();const n=va.getOrCreateInstance(e),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(os.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});R.on(window,MS,()=>{const t=J.find(zS);for(const e of t)va.getOrCreateInstance(e)});dn(va);const XS="collapse",JS="bs.collapse",Ea=`.${JS}`,ZS=".data-api",eR=`show${Ea}`,tR=`shown${Ea}`,nR=`hide${Ea}`,sR=`hidden${Ea}`,iR=`click${Ea}${ZS}`,Ku="show",nr="collapse",za="collapsing",rR="collapsed",oR=`:scope .${nr} .${nr}`,aR="collapse-horizontal",lR="width",cR="height",uR=".collapse.show, .collapse.collapsing",zh='[data-bs-toggle="collapse"]',hR={parent:null,toggle:!0},dR={parent:"(null|element)",toggle:"boolean"};class jo extends Pn{constructor(e,n){super(e,n),this._isTransitioning=!1,this._triggerArray=[];const s=J.find(zh);for(const i of s){const r=J.getSelectorFromElement(i),o=J.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return hR}static get DefaultType(){return dR}static get NAME(){return XS}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(uR).filter(a=>a!==this._element).map(a=>jo.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||R.trigger(this._element,eR).defaultPrevented)return;for(const a of e)a.hide();const s=this._getDimension();this._element.classList.remove(nr),this._element.classList.add(za),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(za),this._element.classList.add(nr,Ku),this._element.style[s]="",R.trigger(this._element,tR)},o=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(i,this._element,!0),this._element.style[s]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||R.trigger(this._element,nR).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,ga(this._element),this._element.classList.add(za),this._element.classList.remove(nr,Ku);for(const i of this._triggerArray){const r=J.getElementFromSelector(i);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(za),this._element.classList.add(nr),R.trigger(this._element,sR)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Ku)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=$s(e.parent),e}_getDimension(){return this._element.classList.contains(aR)?lR:cR}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(zh);for(const n of e){const s=J.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(e){const n=J.find(oR,this._config.parent);return J.find(e,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(e,n){if(e.length)for(const s of e)s.classList.toggle(rR,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(e){const n={};return typeof e=="string"&&/show|hide/.test(e)&&(n.toggle=!1),this.each(function(){const s=jo.getOrCreateInstance(this,n);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e]()}})}}R.on(document,iR,zh,function(t){(t.target.tagName==="A"||t.delegateTarget&&t.delegateTarget.tagName==="A")&&t.preventDefault();for(const e of J.getMultipleElementsFromSelector(this))jo.getOrCreateInstance(e,{toggle:!1}).toggle()});dn(jo);const Km="dropdown",fR="bs.dropdown",xi=`.${fR}`,Cf=".data-api",pR="Escape",zm="Tab",mR="ArrowUp",Gm="ArrowDown",_R=2,gR=`hide${xi}`,yR=`hidden${xi}`,vR=`show${xi}`,ER=`shown${xi}`,hE=`click${xi}${Cf}`,dE=`keydown${xi}${Cf}`,TR=`keyup${xi}${Cf}`,Xi="show",wR="dropup",bR="dropend",AR="dropstart",IR="dropup-center",CR="dropdown-center",ci='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',SR=`${ci}.${Xi}`,El=".dropdown-menu",RR=".navbar",PR=".navbar-nav",NR=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",OR=cn()?"top-end":"top-start",kR=cn()?"top-start":"top-end",DR=cn()?"bottom-end":"bottom-start",xR=cn()?"bottom-start":"bottom-end",LR=cn()?"left-start":"right-start",MR=cn()?"right-start":"left-start",VR="top",FR="bottom",$R={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},UR={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Hn extends Pn{constructor(e,n){super(e,n),this._popper=null,this._parent=this._element.parentNode,this._menu=J.next(this._element,El)[0]||J.prev(this._element,El)[0]||J.findOne(El,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return $R}static get DefaultType(){return UR}static get NAME(){return Km}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Us(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!R.trigger(this._element,vR,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(PR))for(const s of[].concat(...document.body.children))R.on(s,"mouseover",xl);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xi),this._element.classList.add(Xi),R.trigger(this._element,ER,e)}}hide(){if(Us(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!R.trigger(this._element,gR,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))R.off(s,"mouseover",xl);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xi),this._element.classList.remove(Xi),this._element.setAttribute("aria-expanded","false"),os.removeDataAttribute(this._menu,"popper"),R.trigger(this._element,yR,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!rs(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Km.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof Gv>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:rs(this._config.reference)?e=$s(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const n=this._getPopperConfig();this._popper=bf(e,this._menu,n)}_isShown(){return this._menu.classList.contains(Xi)}_getPlacement(){const e=this._parent;if(e.classList.contains(bR))return LR;if(e.classList.contains(AR))return MR;if(e.classList.contains(IR))return VR;if(e.classList.contains(CR))return FR;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(wR)?n?kR:OR:n?xR:DR}_detectNavbar(){return this._element.closest(RR)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(os.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...$t(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:n}){const s=J.find(NR,this._menu).filter(i=>Hr(i));s.length&&Af(s,n,e===Gm,!s.includes(n)).focus()}static jQueryInterface(e){return this.each(function(){const n=Hn.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}static clearMenus(e){if(e.button===_R||e.type==="keyup"&&e.key!==zm)return;const n=J.find(SR);for(const s of n){const i=Hn.getInstance(s);if(!i||i._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(i._menu);if(r.includes(i._element)||i._config.autoClose==="inside"&&!o||i._config.autoClose==="outside"&&o||i._menu.contains(e.target)&&(e.type==="keyup"&&e.key===zm||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:i._element};e.type==="click"&&(a.clickEvent=e),i._completeHide(a)}}static dataApiKeydownHandler(e){const n=/input|textarea/i.test(e.target.tagName),s=e.key===pR,i=[mR,Gm].includes(e.key);if(!i&&!s||n&&!s)return;e.preventDefault();const r=this.matches(ci)?this:J.prev(this,ci)[0]||J.next(this,ci)[0]||J.findOne(ci,e.delegateTarget.parentNode),o=Hn.getOrCreateInstance(r);if(i){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}R.on(document,dE,ci,Hn.dataApiKeydownHandler);R.on(document,dE,El,Hn.dataApiKeydownHandler);R.on(document,hE,Hn.clearMenus);R.on(document,TR,Hn.clearMenus);R.on(document,hE,ci,function(t){t.preventDefault(),Hn.getOrCreateInstance(this).toggle()});dn(Hn);const fE="backdrop",BR="fade",Ym="show",Qm=`mousedown.bs.${fE}`,HR={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},jR={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class pE extends ya{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return HR}static get DefaultType(){return jR}static get NAME(){return fE}show(e){if(!this._config.isVisible){$t(e);return}this._append();const n=this._getElement();this._config.isAnimated&&ga(n),n.classList.add(Ym),this._emulateAnimation(()=>{$t(e)})}hide(e){if(!this._config.isVisible){$t(e);return}this._getElement().classList.remove(Ym),this._emulateAnimation(()=>{this.dispose(),$t(e)})}dispose(){this._isAppended&&(R.off(this._element,Qm),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(BR),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=$s(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),R.on(e,Qm,()=>{$t(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){Zv(e,this._getElement(),this._config.isAnimated)}}const WR="focustrap",qR="bs.focustrap",Ml=`.${qR}`,KR=`focusin${Ml}`,zR=`keydown.tab${Ml}`,GR="Tab",YR="forward",Xm="backward",QR={autofocus:!0,trapElement:null},XR={autofocus:"boolean",trapElement:"element"};class mE extends ya{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return QR}static get DefaultType(){return XR}static get NAME(){return WR}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),R.off(document,Ml),R.on(document,KR,e=>this._handleFocusin(e)),R.on(document,zR,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,R.off(document,Ml))}_handleFocusin(e){const{trapElement:n}=this._config;if(e.target===document||e.target===n||n.contains(e.target))return;const s=J.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===Xm?s[s.length-1].focus():s[0].focus()}_handleKeydown(e){e.key===GR&&(this._lastTabNavDirection=e.shiftKey?Xm:YR)}}const Jm=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Zm=".sticky-top",Ga="padding-right",e_="margin-right";class Gh{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ga,n=>n+e),this._setElementAttributes(Jm,Ga,n=>n+e),this._setElementAttributes(Zm,e_,n=>n-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ga),this._resetElementAttributes(Jm,Ga),this._resetElementAttributes(Zm,e_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,n,s){const i=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+i)return;this._saveInitialAttribute(o,n);const a=window.getComputedStyle(o).getPropertyValue(n);o.style.setProperty(n,`${s(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,n){const s=e.style.getPropertyValue(n);s&&os.setDataAttribute(e,n,s)}_resetElementAttributes(e,n){const s=i=>{const r=os.getDataAttribute(i,n);if(r===null){i.style.removeProperty(n);return}os.removeDataAttribute(i,n),i.style.setProperty(n,r)};this._applyManipulationCallback(e,s)}_applyManipulationCallback(e,n){if(rs(e)){n(e);return}for(const s of J.find(e,this._element))n(s)}}const JR="modal",ZR="bs.modal",un=`.${ZR}`,e0=".data-api",t0="Escape",n0=`hide${un}`,s0=`hidePrevented${un}`,_E=`hidden${un}`,gE=`show${un}`,i0=`shown${un}`,r0=`resize${un}`,o0=`click.dismiss${un}`,a0=`mousedown.dismiss${un}`,l0=`keydown.dismiss${un}`,c0=`click${un}${e0}`,t_="modal-open",u0="fade",n_="show",zu="modal-static",h0=".modal.show",d0=".modal-dialog",f0=".modal-body",p0='[data-bs-toggle="modal"]',m0={backdrop:!0,focus:!0,keyboard:!0},_0={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ar extends Pn{constructor(e,n){super(e,n),this._dialog=J.findOne(d0,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Gh,this._addEventListeners()}static get Default(){return m0}static get DefaultType(){return _0}static get NAME(){return JR}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||R.trigger(this._element,gE,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(t_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||R.trigger(this._element,n0).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(n_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){R.off(window,un),R.off(this._dialog,un),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new pE({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new mE({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=J.findOne(f0,this._dialog);n&&(n.scrollTop=0),ga(this._element),this._element.classList.add(n_);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,R.trigger(this._element,i0,{relatedTarget:e})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){R.on(this._element,l0,e=>{if(e.key===t0){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),R.on(window,r0,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),R.on(this._element,a0,e=>{R.one(this._element,o0,n=>{if(!(this._element!==e.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(t_),this._resetAdjustments(),this._scrollBar.reset(),R.trigger(this._element,_E)})}_isAnimated(){return this._element.classList.contains(u0)}_triggerBackdropTransition(){if(R.trigger(this._element,s0).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(zu)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(zu),this._queueCallback(()=>{this._element.classList.remove(zu),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!e){const i=cn()?"paddingLeft":"paddingRight";this._element.style[i]=`${n}px`}if(!s&&e){const i=cn()?"paddingRight":"paddingLeft";this._element.style[i]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,n){return this.each(function(){const s=Ar.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof s[e]>"u")throw new TypeError(`No method named "${e}"`);s[e](n)}})}}R.on(document,c0,p0,function(t){const e=J.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),R.one(e,gE,i=>{i.defaultPrevented||R.one(e,_E,()=>{Hr(this)&&this.focus()})});const n=J.findOne(h0);n&&Ar.getInstance(n).hide(),Ar.getOrCreateInstance(e).toggle(this)});kc(Ar);dn(Ar);const g0="offcanvas",y0="bs.offcanvas",ms=`.${y0}`,yE=".data-api",v0=`load${ms}${yE}`,E0="Escape",s_="show",i_="showing",r_="hiding",T0="offcanvas-backdrop",vE=".offcanvas.show",w0=`show${ms}`,b0=`shown${ms}`,A0=`hide${ms}`,o_=`hidePrevented${ms}`,EE=`hidden${ms}`,I0=`resize${ms}`,C0=`click${ms}${yE}`,S0=`keydown.dismiss${ms}`,R0='[data-bs-toggle="offcanvas"]',P0={backdrop:!0,keyboard:!0,scroll:!1},N0={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Bs extends Pn{constructor(e,n){super(e,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return P0}static get DefaultType(){return N0}static get NAME(){return g0}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||R.trigger(this._element,w0,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Gh().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(i_);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(s_),this._element.classList.remove(i_),R.trigger(this._element,b0,{relatedTarget:e})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||R.trigger(this._element,A0).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(r_),this._backdrop.hide();const n=()=>{this._element.classList.remove(s_,r_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Gh().reset(),R.trigger(this._element,EE)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){R.trigger(this._element,o_);return}this.hide()},n=!!this._config.backdrop;return new pE({className:T0,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?e:null})}_initializeFocusTrap(){return new mE({trapElement:this._element})}_addEventListeners(){R.on(this._element,S0,e=>{if(e.key===E0){if(this._config.keyboard){this.hide();return}R.trigger(this._element,o_)}})}static jQueryInterface(e){return this.each(function(){const n=Bs.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}R.on(document,C0,R0,function(t){const e=J.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Us(this))return;R.one(e,EE,()=>{Hr(this)&&this.focus()});const n=J.findOne(vE);n&&n!==e&&Bs.getInstance(n).hide(),Bs.getOrCreateInstance(e).toggle(this)});R.on(window,v0,()=>{for(const t of J.find(vE))Bs.getOrCreateInstance(t).show()});R.on(window,I0,()=>{for(const t of J.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(t).position!=="fixed"&&Bs.getOrCreateInstance(t).hide()});kc(Bs);dn(Bs);const O0=/^aria-[\w-]*$/i,TE={"*":["class","dir","id","lang","role",O0],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},k0=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),D0=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,x0=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?k0.has(n)?!!D0.test(t.nodeValue):!0:e.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function L0(t,e,n){if(!t.length)return t;if(n&&typeof n=="function")return n(t);const i=new window.DOMParser().parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const u of l)x0(u,c)||o.removeAttribute(u.nodeName)}return i.body.innerHTML}const M0="TemplateFactory",V0={allowList:TE,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},F0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$0={entry:"(string|element|function|null)",selector:"(string|element)"};class U0 extends ya{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return V0}static get DefaultType(){return F0}static get NAME(){return M0}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(e,r,i);const n=e.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[n,s]of Object.entries(e))super._typeCheckConfig({selector:n,entry:s},$0)}_setContent(e,n,s){const i=J.findOne(s,e);if(i){if(n=this._resolvePossibleFunction(n),!n){i.remove();return}if(rs(n)){this._putElementInTemplate($s(n),i);return}if(this._config.html){i.innerHTML=this._maybeSanitize(n);return}i.textContent=n}}_maybeSanitize(e){return this._config.sanitize?L0(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return $t(e,[this])}_putElementInTemplate(e,n){if(this._config.html){n.innerHTML="",n.append(e);return}n.textContent=e.textContent}}const B0="tooltip",H0=new Set(["sanitize","allowList","sanitizeFn"]),Gu="fade",j0="modal",Ya="show",W0=".tooltip-inner",a_=`.${j0}`,l_="hide.bs.modal",oo="hover",Yu="focus",q0="click",K0="manual",z0="hide",G0="hidden",Y0="show",Q0="shown",X0="inserted",J0="click",Z0="focusin",eP="focusout",tP="mouseenter",nP="mouseleave",sP={AUTO:"auto",TOP:"top",RIGHT:cn()?"left":"right",BOTTOM:"bottom",LEFT:cn()?"right":"left"},iP={allowList:TE,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},rP={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Wr extends Pn{constructor(e,n){if(typeof Gv>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return iP}static get DefaultType(){return rP}static get NAME(){return B0}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),R.off(this._element.closest(a_),l_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=R.trigger(this._element,this.constructor.eventName(Y0)),s=(Xv(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!s)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),R.trigger(this._element,this.constructor.eventName(X0))),this._popper=this._createPopper(i),i.classList.add(Ya),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))R.on(a,"mouseover",xl);const o=()=>{R.trigger(this._element,this.constructor.eventName(Q0)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||R.trigger(this._element,this.constructor.eventName(z0)).defaultPrevented)return;if(this._getTipElement().classList.remove(Ya),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))R.off(i,"mouseover",xl);this._activeTrigger[q0]=!1,this._activeTrigger[Yu]=!1,this._activeTrigger[oo]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),R.trigger(this._element,this.constructor.eventName(G0)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const n=this._getTemplateFactory(e).toHtml();if(!n)return null;n.classList.remove(Gu,Ya),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=qC(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Gu),n}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new U0({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[W0]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Gu)}_isShown(){return this.tip&&this.tip.classList.contains(Ya)}_createPopper(e){const n=$t(this._config.placement,[this,e,this._element]),s=sP[n.toUpperCase()];return bf(this._element,e,this._getPopperConfig(s))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(n=>Number.parseInt(n,10)):typeof e=="function"?n=>e(n,this._element):e}_resolvePossibleFunction(e){return $t(e,[this._element])}_getPopperConfig(e){const n={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...$t(this._config.popperConfig,[n])}}_setListeners(){const e=this._config.trigger.split(" ");for(const n of e)if(n==="click")R.on(this._element,this.constructor.eventName(J0),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==K0){const s=n===oo?this.constructor.eventName(tP):this.constructor.eventName(Z0),i=n===oo?this.constructor.eventName(nP):this.constructor.eventName(eP);R.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?Yu:oo]=!0,o._enter()}),R.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?Yu:oo]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},R.on(this._element.closest(a_),l_,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,n){clearTimeout(this._timeout),this._timeout=setTimeout(e,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const n=os.getDataAttributes(this._element);for(const s of Object.keys(n))H0.has(s)&&delete n[s];return e={...n,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:$s(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(e[n]=s);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const n=Wr.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}dn(Wr);const oP="popover",aP=".popover-header",lP=".popover-body",cP={...Wr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},uP={...Wr.DefaultType,content:"(null|string|element|function)"};class Sf extends Wr{static get Default(){return cP}static get DefaultType(){return uP}static get NAME(){return oP}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[aP]:this._getTitle(),[lP]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const n=Sf.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e]()}})}}dn(Sf);const hP="scrollspy",dP="bs.scrollspy",Rf=`.${dP}`,fP=".data-api",pP=`activate${Rf}`,c_=`click${Rf}`,mP=`load${Rf}${fP}`,_P="dropdown-item",Ki="active",gP='[data-bs-spy="scroll"]',Qu="[href]",yP=".nav, .list-group",u_=".nav-link",vP=".nav-item",EP=".list-group-item",TP=`${u_}, ${vP} > ${u_}, ${EP}`,wP=".dropdown",bP=".dropdown-toggle",AP={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},IP={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Lc extends Pn{constructor(e,n){super(e,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return AP}static get DefaultType(){return IP}static get NAME(){return hP}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=$s(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(n=>Number.parseFloat(n))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(R.off(this._config.target,c_),R.on(this._config.target,c_,Qu,e=>{const n=this._observableSections.get(e.target.hash);if(n){e.preventDefault();const s=this._rootElement||window,i=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:i,behavior:"smooth"});return}s.scrollTop=i}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),e)}_observerCallback(e){const n=o=>this._targetLinks.get(`#${o.target.id}`),s=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(n(o))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(s(o),!i)return;continue}!r&&!a&&s(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=J.find(Qu,this._config.target);for(const n of e){if(!n.hash||Us(n))continue;const s=J.findOne(decodeURI(n.hash),this._element);Hr(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(Ki),this._activateParents(e),R.trigger(this._element,pP,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(_P)){J.findOne(bP,e.closest(wP)).classList.add(Ki);return}for(const n of J.parents(e,yP))for(const s of J.prev(n,TP))s.classList.add(Ki)}_clearActiveClass(e){e.classList.remove(Ki);const n=J.find(`${Qu}.${Ki}`,e);for(const s of n)s.classList.remove(Ki)}static jQueryInterface(e){return this.each(function(){const n=Lc.getOrCreateInstance(this,e);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}R.on(window,mP,()=>{for(const t of J.find(gP))Lc.getOrCreateInstance(t)});dn(Lc);const CP="tab",SP="bs.tab",Li=`.${SP}`,RP=`hide${Li}`,PP=`hidden${Li}`,NP=`show${Li}`,OP=`shown${Li}`,kP=`click${Li}`,DP=`keydown${Li}`,xP=`load${Li}`,LP="ArrowLeft",h_="ArrowRight",MP="ArrowUp",d_="ArrowDown",Xu="Home",f_="End",ui="active",p_="fade",Ju="show",VP="dropdown",wE=".dropdown-toggle",FP=".dropdown-menu",Zu=`:not(${wE})`,$P='.list-group, .nav, [role="tablist"]',UP=".nav-item, .list-group-item",BP=`.nav-link${Zu}, .list-group-item${Zu}, [role="tab"]${Zu}`,bE='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',eh=`${BP}, ${bE}`,HP=`.${ui}[data-bs-toggle="tab"], .${ui}[data-bs-toggle="pill"], .${ui}[data-bs-toggle="list"]`;class Ir extends Pn{constructor(e){super(e),this._parent=this._element.closest($P),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),R.on(this._element,DP,n=>this._keydown(n)))}static get NAME(){return CP}show(){const e=this._element;if(this._elemIsActive(e))return;const n=this._getActiveElem(),s=n?R.trigger(n,RP,{relatedTarget:e}):null;R.trigger(e,NP,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,e),this._activate(e,n))}_activate(e,n){if(!e)return;e.classList.add(ui),this._activate(J.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(Ju);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),R.trigger(e,OP,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(p_))}_deactivate(e,n){if(!e)return;e.classList.remove(ui),e.blur(),this._deactivate(J.getElementFromSelector(e));const s=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(Ju);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),R.trigger(e,PP,{relatedTarget:n})};this._queueCallback(s,e,e.classList.contains(p_))}_keydown(e){if(![LP,h_,MP,d_,Xu,f_].includes(e.key))return;e.stopPropagation(),e.preventDefault();const n=this._getChildren().filter(i=>!Us(i));let s;if([Xu,f_].includes(e.key))s=n[e.key===Xu?0:n.length-1];else{const i=[h_,d_].includes(e.key);s=Af(n,e.target,i,!0)}s&&(s.focus({preventScroll:!0}),Ir.getOrCreateInstance(s).show())}_getChildren(){return J.find(eh,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,n){this._setAttributeIfNotExists(e,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const n=this._elemIsActive(e),s=this._getOuterElement(e);e.setAttribute("aria-selected",n),s!==e&&this._setAttributeIfNotExists(s,"role","presentation"),n||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const n=J.getElementFromSelector(e);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,n){const s=this._getOuterElement(e);if(!s.classList.contains(VP))return;const i=(r,o)=>{const a=J.findOne(r,s);a&&a.classList.toggle(o,n)};i(wE,ui),i(FP,Ju),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(e,n,s){e.hasAttribute(n)||e.setAttribute(n,s)}_elemIsActive(e){return e.classList.contains(ui)}_getInnerElement(e){return e.matches(eh)?e:J.findOne(eh,e)}_getOuterElement(e){return e.closest(UP)||e}static jQueryInterface(e){return this.each(function(){const n=Ir.getOrCreateInstance(this);if(typeof e=="string"){if(n[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);n[e]()}})}}R.on(document,kP,bE,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),!Us(this)&&Ir.getOrCreateInstance(this).show()});R.on(window,xP,()=>{for(const t of J.find(HP))Ir.getOrCreateInstance(t)});dn(Ir);const jP="toast",WP="bs.toast",Xs=`.${WP}`,qP=`mouseover${Xs}`,KP=`mouseout${Xs}`,zP=`focusin${Xs}`,GP=`focusout${Xs}`,YP=`hide${Xs}`,QP=`hidden${Xs}`,XP=`show${Xs}`,JP=`shown${Xs}`,ZP="fade",m_="hide",Qa="show",Xa="showing",eN={animation:"boolean",autohide:"boolean",delay:"number"},tN={animation:!0,autohide:!0,delay:5e3};class Mc extends Pn{constructor(e,n){super(e,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return tN}static get DefaultType(){return eN}static get NAME(){return jP}show(){if(R.trigger(this._element,XP).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(ZP);const n=()=>{this._element.classList.remove(Xa),R.trigger(this._element,JP),this._maybeScheduleHide()};this._element.classList.remove(m_),ga(this._element),this._element.classList.add(Qa,Xa),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||R.trigger(this._element,YP).defaultPrevented)return;const n=()=>{this._element.classList.add(m_),this._element.classList.remove(Xa,Qa),R.trigger(this._element,QP)};this._element.classList.add(Xa),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Qa),super.dispose()}isShown(){return this._element.classList.contains(Qa)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,n){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=e.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){R.on(this._element,qP,e=>this._onInteraction(e,!0)),R.on(this._element,KP,e=>this._onInteraction(e,!1)),R.on(this._element,zP,e=>this._onInteraction(e,!0)),R.on(this._element,GP,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const n=Mc.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof n[e]>"u")throw new TypeError(`No method named "${e}"`);n[e](this)}})}}kc(Mc);dn(Mc);/**
* @vue/shared v3.4.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Pf(t,e){const n=new Set(t.split(","));return e?s=>n.has(s.toLowerCase()):s=>n.has(s)}const Ve={},or=[],sn=()=>{},nN=()=>!1,Vc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nf=t=>t.startsWith("onUpdate:"),nt=Object.assign,Of=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},sN=Object.prototype.hasOwnProperty,be=(t,e)=>sN.call(t,e),ee=Array.isArray,ar=t=>Ta(t)==="[object Map]",Fc=t=>Ta(t)==="[object Set]",__=t=>Ta(t)==="[object Date]",ae=t=>typeof t=="function",Qe=t=>typeof t=="string",Hs=t=>typeof t=="symbol",De=t=>t!==null&&typeof t=="object",AE=t=>(De(t)||ae(t))&&ae(t.then)&&ae(t.catch),IE=Object.prototype.toString,Ta=t=>IE.call(t),iN=t=>Ta(t).slice(8,-1),CE=t=>Ta(t)==="[object Object]",kf=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Tl=Pf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$c=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},rN=/-(\w)/g,zn=$c(t=>t.replace(rN,(e,n)=>n?n.toUpperCase():"")),oN=/\B([A-Z])/g,qr=$c(t=>t.replace(oN,"-$1").toLowerCase()),Uc=$c(t=>t.charAt(0).toUpperCase()+t.slice(1)),th=$c(t=>t?`on${Uc(t)}`:""),js=(t,e)=>!Object.is(t,e),wl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Vl=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Fl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},aN=t=>{const e=Qe(t)?Number(t):NaN;return isNaN(e)?t:e};let g_;const SE=()=>g_||(g_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Df(t){if(ee(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],i=Qe(s)?hN(s):Df(s);if(i)for(const r in i)e[r]=i[r]}return e}else if(Qe(t)||De(t))return t}const lN=/;(?![^(]*\))/g,cN=/:([^]+)/,uN=/\/\*[^]*?\*\//g;function hN(t){const e={};return t.replace(uN,"").split(lN).forEach(n=>{if(n){const s=n.split(cN);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Bc(t){let e="";if(Qe(t))e=t;else if(ee(t))for(let n=0;n<t.length;n++){const s=Bc(t[n]);s&&(e+=s+" ")}else if(De(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const dN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fN=Pf(dN);function RE(t){return!!t||t===""}function pN(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Hc(t[s],e[s]);return n}function Hc(t,e){if(t===e)return!0;let n=__(t),s=__(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Hs(t),s=Hs(e),n||s)return t===e;if(n=ee(t),s=ee(e),n||s)return n&&s?pN(t,e):!1;if(n=De(t),s=De(e),n||s){if(!n||!s)return!1;const i=Object.keys(t).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Hc(t[o],e[o]))return!1}}return String(t)===String(e)}function mN(t,e){return t.findIndex(n=>Hc(n,e))}const $e=t=>Qe(t)?t:t==null?"":ee(t)||De(t)&&(t.toString===IE||!ae(t.toString))?JSON.stringify(t,PE,2):String(t),PE=(t,e)=>e&&e.__v_isRef?PE(t,e.value):ar(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,i],r)=>(n[nh(s,r)+" =>"]=i,n),{})}:Fc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>nh(n))}:Hs(e)?nh(e):De(e)&&!ee(e)&&!CE(e)?String(e):e,nh=(t,e="")=>{var n;return Hs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kt;class _N{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Kt,!e&&Kt&&(this.index=(Kt.scopes||(Kt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Kt;try{return Kt=this,e()}finally{Kt=n}}}on(){Kt=this}off(){Kt=this.parent}stop(e){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function gN(t,e=Kt){e&&e.active&&e.effects.push(t)}function NE(){return Kt}function yN(t){Kt&&Kt.cleanups.push(t)}let yi;class xf{constructor(e,n,s,i){this.fn=e,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=3,this._trackId=0,this._runnings=0,this._queryings=0,this._depsLength=0,gN(this,i)}get dirty(){if(this._dirtyLevel===1){this._dirtyLevel=0,this._queryings++,Mi();for(const e of this.deps)if(e.computed&&(vN(e.computed),this._dirtyLevel>=2))break;Vi(),this._queryings--}return this._dirtyLevel>=2}set dirty(e){this._dirtyLevel=e?3:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=ks,n=yi;try{return ks=!0,yi=this,this._runnings++,y_(this),this.fn()}finally{v_(this),this._runnings--,yi=n,ks=e}}stop(){var e;this.active&&(y_(this),v_(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function vN(t){return t.value}function y_(t){t._trackId++,t._depsLength=0}function v_(t){if(t.deps&&t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)OE(t.deps[e],t);t.deps.length=t._depsLength}}function OE(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let ks=!0,Yh=0;const kE=[];function Mi(){kE.push(ks),ks=!1}function Vi(){const t=kE.pop();ks=t===void 0?!0:t}function Lf(){Yh++}function Mf(){for(Yh--;!Yh&&Qh.length;)Qh.shift()()}function DE(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const s=t.deps[t._depsLength];s!==e?(s&&OE(s,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Qh=[];function xE(t,e,n){Lf();for(const s of t.keys())if(!(!s.allowRecurse&&s._runnings)&&s._dirtyLevel<e&&(!s._runnings||e!==2)){const i=s._dirtyLevel;s._dirtyLevel=e,i===0&&(!s._queryings||e!==2)&&(s.trigger(),s.scheduler&&Qh.push(s.scheduler))}Mf()}const LE=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Xh=new WeakMap,vi=Symbol(""),Jh=Symbol("");function Bt(t,e,n){if(ks&&yi){let s=Xh.get(t);s||Xh.set(t,s=new Map);let i=s.get(n);i||s.set(n,i=LE(()=>s.delete(n))),DE(yi,i)}}function as(t,e,n,s,i,r){const o=Xh.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ee(t)){const l=Number(s);o.forEach((c,u)=>{(u==="length"||!Hs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ee(t)?kf(n)&&a.push(o.get("length")):(a.push(o.get(vi)),ar(t)&&a.push(o.get(Jh)));break;case"delete":ee(t)||(a.push(o.get(vi)),ar(t)&&a.push(o.get(Jh)));break;case"set":ar(t)&&a.push(o.get(vi));break}Lf();for(const l of a)l&&xE(l,3);Mf()}const EN=Pf("__proto__,__v_isRef,__isVue"),ME=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hs)),E_=TN();function TN(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const s=Ae(this);for(let r=0,o=this.length;r<o;r++)Bt(s,"get",r+"");const i=s[e](...n);return i===-1||i===!1?s[e](...n.map(Ae)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Mi(),Lf();const s=Ae(this)[e].apply(this,n);return Mf(),Vi(),s}}),t}function wN(t){const e=Ae(this);return Bt(e,"has",t),e.hasOwnProperty(t)}class VE{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,s){const i=this._isReadonly,r=this._shallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?LN:BE:r?UE:$E).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ee(e);if(!i){if(o&&be(E_,n))return Reflect.get(E_,n,s);if(n==="hasOwnProperty")return wN}const a=Reflect.get(e,n,s);return(Hs(n)?ME.has(n):EN(n))||(i||Bt(e,"get",n),r)?a:Lt(a)?o&&kf(n)?a:a.value:De(a)?i?jE(a):Wc(a):a}}class FE extends VE{constructor(e=!1){super(!1,e)}set(e,n,s,i){let r=e[n];if(!this._shallow){const l=Cr(r);if(!$l(s)&&!Cr(s)&&(r=Ae(r),s=Ae(s)),!ee(e)&&Lt(r)&&!Lt(s))return l?!1:(r.value=s,!0)}const o=ee(e)&&kf(n)?Number(n)<e.length:be(e,n),a=Reflect.set(e,n,s,i);return e===Ae(i)&&(o?js(s,r)&&as(e,"set",n,s):as(e,"add",n,s)),a}deleteProperty(e,n){const s=be(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&s&&as(e,"delete",n,void 0),i}has(e,n){const s=Reflect.has(e,n);return(!Hs(n)||!ME.has(n))&&Bt(e,"has",n),s}ownKeys(e){return Bt(e,"iterate",ee(e)?"length":vi),Reflect.ownKeys(e)}}class bN extends VE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const AN=new FE,IN=new bN,CN=new FE(!0),Vf=t=>t,jc=t=>Reflect.getPrototypeOf(t);function Ja(t,e,n=!1,s=!1){t=t.__v_raw;const i=Ae(t),r=Ae(e);n||(js(e,r)&&Bt(i,"get",e),Bt(i,"get",r));const{has:o}=jc(i),a=s?Vf:n?Uf:Wo;if(o.call(i,e))return a(t.get(e));if(o.call(i,r))return a(t.get(r));t!==i&&t.get(e)}function Za(t,e=!1){const n=this.__v_raw,s=Ae(n),i=Ae(t);return e||(js(t,i)&&Bt(s,"has",t),Bt(s,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function el(t,e=!1){return t=t.__v_raw,!e&&Bt(Ae(t),"iterate",vi),Reflect.get(t,"size",t)}function T_(t){t=Ae(t);const e=Ae(this);return jc(e).has.call(e,t)||(e.add(t),as(e,"add",t,t)),this}function w_(t,e){e=Ae(e);const n=Ae(this),{has:s,get:i}=jc(n);let r=s.call(n,t);r||(t=Ae(t),r=s.call(n,t));const o=i.call(n,t);return n.set(t,e),r?js(e,o)&&as(n,"set",t,e):as(n,"add",t,e),this}function b_(t){const e=Ae(this),{has:n,get:s}=jc(e);let i=n.call(e,t);i||(t=Ae(t),i=n.call(e,t)),s&&s.call(e,t);const r=e.delete(t);return i&&as(e,"delete",t,void 0),r}function A_(){const t=Ae(this),e=t.size!==0,n=t.clear();return e&&as(t,"clear",void 0,void 0),n}function tl(t,e){return function(s,i){const r=this,o=r.__v_raw,a=Ae(o),l=e?Vf:t?Uf:Wo;return!t&&Bt(a,"iterate",vi),o.forEach((c,u)=>s.call(i,l(c),l(u),r))}}function nl(t,e,n){return function(...s){const i=this.__v_raw,r=Ae(i),o=ar(r),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...s),u=n?Vf:e?Uf:Wo;return!e&&Bt(r,"iterate",l?Jh:vi),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function Ts(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function SN(){const t={get(r){return Ja(this,r)},get size(){return el(this)},has:Za,add:T_,set:w_,delete:b_,clear:A_,forEach:tl(!1,!1)},e={get(r){return Ja(this,r,!1,!0)},get size(){return el(this)},has:Za,add:T_,set:w_,delete:b_,clear:A_,forEach:tl(!1,!0)},n={get(r){return Ja(this,r,!0)},get size(){return el(this,!0)},has(r){return Za.call(this,r,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:tl(!0,!1)},s={get(r){return Ja(this,r,!0,!0)},get size(){return el(this,!0)},has(r){return Za.call(this,r,!0)},add:Ts("add"),set:Ts("set"),delete:Ts("delete"),clear:Ts("clear"),forEach:tl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=nl(r,!1,!1),n[r]=nl(r,!0,!1),e[r]=nl(r,!1,!0),s[r]=nl(r,!0,!0)}),[t,n,e,s]}const[RN,PN,NN,ON]=SN();function Ff(t,e){const n=e?t?ON:NN:t?PN:RN;return(s,i,r)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?s:Reflect.get(be(n,i)&&i in s?n:s,i,r)}const kN={get:Ff(!1,!1)},DN={get:Ff(!1,!0)},xN={get:Ff(!0,!1)},$E=new WeakMap,UE=new WeakMap,BE=new WeakMap,LN=new WeakMap;function MN(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function VN(t){return t.__v_skip||!Object.isExtensible(t)?0:MN(iN(t))}function Wc(t){return Cr(t)?t:$f(t,!1,AN,kN,$E)}function HE(t){return $f(t,!1,CN,DN,UE)}function jE(t){return $f(t,!0,IN,xN,BE)}function $f(t,e,n,s,i){if(!De(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=i.get(t);if(r)return r;const o=VN(t);if(o===0)return t;const a=new Proxy(t,o===2?s:n);return i.set(t,a),a}function lr(t){return Cr(t)?lr(t.__v_raw):!!(t&&t.__v_isReactive)}function Cr(t){return!!(t&&t.__v_isReadonly)}function $l(t){return!!(t&&t.__v_isShallow)}function WE(t){return lr(t)||Cr(t)}function Ae(t){const e=t&&t.__v_raw;return e?Ae(e):t}function qE(t){return Vl(t,"__v_skip",!0),t}const Wo=t=>De(t)?Wc(t):t,Uf=t=>De(t)?jE(t):t;class KE{constructor(e,n,s,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new xf(()=>e(this._value),()=>Zh(this,1)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const e=Ae(this);return zE(e),(!e._cacheable||e.effect.dirty)&&js(e._value,e._value=e.effect.run())&&Zh(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function FN(t,e,n=!1){let s,i;const r=ae(t);return r?(s=t,i=sn):(s=t.get,i=t.set),new KE(s,i,r||!i,n)}function zE(t){ks&&yi&&(t=Ae(t),DE(yi,t.dep||(t.dep=LE(()=>t.dep=void 0,t instanceof KE?t:void 0))))}function Zh(t,e=3,n){t=Ae(t);const s=t.dep;s&&xE(s,e)}function Lt(t){return!!(t&&t.__v_isRef===!0)}function cr(t){return YE(t,!1)}function GE(t){return YE(t,!0)}function YE(t,e){return Lt(t)?t:new $N(t,e)}class $N{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ae(e),this._value=n?e:Wo(e)}get value(){return zE(this),this._value}set value(e){const n=this.__v_isShallow||$l(e)||Cr(e);e=n?e:Ae(e),js(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Wo(e),Zh(this,3))}}function Ei(t){return Lt(t)?t.value:t}function ns(t){return ae(t)?t():Ei(t)}const UN={get:(t,e,n)=>Ei(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const i=t[e];return Lt(i)&&!Lt(n)?(i.value=n,!0):Reflect.set(t,e,n,s)}};function QE(t){return lr(t)?t:new Proxy(t,UN)}/**
* @vue/runtime-core v3.4.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ds(t,e,n,s){let i;try{i=s?t(...s):t()}catch(r){qc(r,e,n)}return i}function an(t,e,n,s){if(ae(t)){const r=Ds(t,e,n,s);return r&&AE(r)&&r.catch(o=>{qc(o,e,n)}),r}const i=[];for(let r=0;r<t.length;r++)i.push(an(t[r],e,n,s));return i}function qc(t,e,n,s=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/errors/#runtime-${n}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Ds(l,null,10,[t,o,a]);return}}BN(t,n,i,s)}function BN(t,e,n,s=!0){console.error(t)}let qo=!1,ed=!1;const At=[];let xn=0;const ur=[];let Cs=null,oi=0;const XE=Promise.resolve();let Bf=null;function JE(t){const e=Bf||XE;return t?e.then(this?t.bind(this):t):e}function HN(t){let e=xn+1,n=At.length;for(;e<n;){const s=e+n>>>1,i=At[s],r=Ko(i);r<t||r===t&&i.pre?e=s+1:n=s}return e}function Hf(t){(!At.length||!At.includes(t,qo&&t.allowRecurse?xn+1:xn))&&(t.id==null?At.push(t):At.splice(HN(t.id),0,t),ZE())}function ZE(){!qo&&!ed&&(ed=!0,Bf=XE.then(tT))}function jN(t){const e=At.indexOf(t);e>xn&&At.splice(e,1)}function WN(t){ee(t)?ur.push(...t):(!Cs||!Cs.includes(t,t.allowRecurse?oi+1:oi))&&ur.push(t),ZE()}function I_(t,e,n=qo?xn+1:0){for(;n<At.length;n++){const s=At[n];if(s&&s.pre){if(t&&s.id!==t.uid)continue;At.splice(n,1),n--,s()}}}function eT(t){if(ur.length){const e=[...new Set(ur)].sort((n,s)=>Ko(n)-Ko(s));if(ur.length=0,Cs){Cs.push(...e);return}for(Cs=e,oi=0;oi<Cs.length;oi++)Cs[oi]();Cs=null,oi=0}}const Ko=t=>t.id==null?1/0:t.id,qN=(t,e)=>{const n=Ko(t)-Ko(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function tT(t){ed=!1,qo=!0,At.sort(qN);try{for(xn=0;xn<At.length;xn++){const e=At[xn];e&&e.active!==!1&&Ds(e,null,14)}}finally{xn=0,At.length=0,eT(),qo=!1,Bf=null,(At.length||ur.length)&&tT()}}function KN(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||Ve;let i=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in s){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=s[u]||Ve;d&&(i=n.map(f=>Qe(f)?f.trim():f)),h&&(i=n.map(Fl))}let a,l=s[a=th(e)]||s[a=th(zn(e))];!l&&r&&(l=s[a=th(qr(e))]),l&&an(l,t,6,i);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,an(c,t,6,i)}}function nT(t,e,n=!1){const s=e.emitsCache,i=s.get(t);if(i!==void 0)return i;const r=t.emits;let o={},a=!1;if(!ae(t)){const l=c=>{const u=nT(c,e,!0);u&&(a=!0,nt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!r&&!a?(De(t)&&s.set(t,null),null):(ee(r)?r.forEach(l=>o[l]=null):nt(o,r),De(t)&&s.set(t,o),o)}function Kc(t,e){return!t||!Vc(e)?!1:(e=e.slice(2).replace(/Once$/,""),be(t,e[0].toLowerCase()+e.slice(1))||be(t,qr(e))||be(t,e))}let Ot=null,zc=null;function Ul(t){const e=Ot;return Ot=t,zc=t&&t.type.__scopeId||null,e}function jf(t){zc=t}function Wf(){zc=null}function Nt(t,e=Ot,n){if(!e||t._n)return t;const s=(...i)=>{s._d&&V_(-1);const r=Ul(e);let o;try{o=t(...i)}finally{Ul(r),s._d&&V_(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function sh(t){const{type:e,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:_,inheritAttrs:g}=t;let y,E;const C=Ul(t);try{if(n.shapeFlag&4){const b=i||s,M=b;y=Dn(u.call(M,b,h,r,f,d,_)),E=l}else{const b=e;y=Dn(b.length>1?b(r,{attrs:l,slots:a,emit:c}):b(r,null)),E=e.props?l:zN(l)}}catch(b){Po.length=0,qc(b,t,1),y=de(Tn)}let w=y;if(E&&g!==!1){const b=Object.keys(E),{shapeFlag:M}=w;b.length&&M&7&&(o&&b.some(Nf)&&(E=GN(E,o)),w=Ws(w,E))}return n.dirs&&(w=Ws(w),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&(w.transition=n.transition),y=w,Ul(C),y}const zN=t=>{let e;for(const n in t)(n==="class"||n==="style"||Vc(n))&&((e||(e={}))[n]=t[n]);return e},GN=(t,e)=>{const n={};for(const s in t)(!Nf(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function YN(t,e,n){const{props:s,children:i,component:r}=t,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?C_(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==s[d]&&!Kc(c,d))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?C_(s,o,c):!0:!!o;return!1}function C_(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(e[r]!==t[r]&&!Kc(n,r))return!0}return!1}function QN({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const qf="components";function Ye(t,e){return iT(qf,t,!0,e)||t}const sT=Symbol.for("v-ndc");function XN(t){return Qe(t)?iT(qf,t,!1)||t:t||sT}function iT(t,e,n=!0,s=!1){const i=Ot||ft;if(i){const r=i.type;if(t===qf){const a=WO(r,!1);if(a&&(a===e||a===zn(e)||a===Uc(zn(e))))return r}const o=S_(i[t]||r[t],e)||S_(i.appContext[t],e);return!o&&s?r:o}}function S_(t,e){return t&&(t[e]||t[zn(e)]||t[Uc(zn(e))])}const JN=t=>t.__isSuspense;function ZN(t,e){e&&e.pendingBranch?ee(t)?e.effects.push(...t):e.effects.push(t):WN(t)}const eO=Symbol.for("v-scx"),tO=()=>ln(eO),sl={};function So(t,e,n){return rT(t,e,n)}function rT(t,e,{immediate:n,deep:s,flush:i,once:r,onTrack:o,onTrigger:a}=Ve){if(e&&r){const P=e;e=(...q)=>{P(...q),M()}}const l=ft,c=P=>s===!0?P:hi(P,s===!1?1:void 0);let u,h=!1,d=!1;if(Lt(t)?(u=()=>t.value,h=$l(t)):lr(t)?(u=()=>c(t),h=!0):ee(t)?(d=!0,h=t.some(P=>lr(P)||$l(P)),u=()=>t.map(P=>{if(Lt(P))return P.value;if(lr(P))return c(P);if(ae(P))return Ds(P,l,2)})):ae(t)?e?u=()=>Ds(t,l,2):u=()=>(f&&f(),an(t,l,3,[_])):u=sn,e&&s){const P=u;u=()=>hi(P())}let f,_=P=>{f=w.onStop=()=>{Ds(P,l,4),f=w.onStop=void 0}},g;if(Jc)if(_=sn,e?n&&an(e,l,3,[u(),d?[]:void 0,_]):u(),i==="sync"){const P=tO();g=P.__watcherHandles||(P.__watcherHandles=[])}else return sn;let y=d?new Array(t.length).fill(sl):sl;const E=()=>{if(!(!w.active||!w.dirty))if(e){const P=w.run();(s||h||(d?P.some((q,V)=>js(q,y[V])):js(P,y)))&&(f&&f(),an(e,l,3,[P,y===sl?void 0:d&&y[0]===sl?[]:y,_]),y=P)}else w.run()};E.allowRecurse=!!e;let C;i==="sync"?C=E:i==="post"?C=()=>Ft(E,l&&l.suspense):(E.pre=!0,l&&(E.id=l.uid),C=()=>Hf(E));const w=new xf(u,sn,C),b=NE(),M=()=>{w.stop(),b&&Of(b.effects,w)};return e?n?E():y=w.run():i==="post"?Ft(w.run.bind(w),l&&l.suspense):w.run(),g&&g.push(M),M}function nO(t,e,n){const s=this.proxy,i=Qe(t)?t.includes(".")?oT(s,t):()=>s[t]:t.bind(s,s);let r;ae(e)?r=e:(r=e.handler,n=e);const o=wa(this),a=rT(i,r.bind(s),n);return o(),a}function oT(t,e){const n=e.split(".");return()=>{let s=t;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function hi(t,e,n=0,s){if(!De(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),Lt(t))hi(t.value,e,n,s);else if(ee(t))for(let i=0;i<t.length;i++)hi(t[i],e,n,s);else if(Fc(t)||ar(t))t.forEach(i=>{hi(i,e,n,s)});else if(CE(t))for(const i in t)hi(t[i],e,n,s);return t}function kn(t,e){if(Ot===null)return t;const n=Zc(Ot)||Ot.proxy,s=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=Ve]=e[i];r&&(ae(r)&&(r={mounted:r,updated:r}),r.deep&&hi(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function ei(t,e,n,s){const i=t.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Mi(),an(l,n,8,[t.el,a,t,e]),Vi())}}const Ss=Symbol("_leaveCb"),il=Symbol("_enterCb");function sO(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hT(()=>{t.isMounted=!0}),dT(()=>{t.isUnmounting=!0}),t}const en=[Function,Array],aT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:en,onEnter:en,onAfterEnter:en,onEnterCancelled:en,onBeforeLeave:en,onLeave:en,onAfterLeave:en,onLeaveCancelled:en,onBeforeAppear:en,onAppear:en,onAfterAppear:en,onAppearCancelled:en},iO={name:"BaseTransition",props:aT,setup(t,{slots:e}){const n=Xf(),s=sO();let i;return()=>{const r=e.default&&cT(e.default(),!0);if(!r||!r.length)return;let o=r[0];if(r.length>1){for(const g of r)if(g.type!==Tn){o=g;break}}const a=Ae(t),{mode:l}=a;if(s.isLeaving)return ih(o);const c=R_(o);if(!c)return ih(o);const u=td(c,a,s,n);nd(c,u);const h=n.subTree,d=h&&R_(h);let f=!1;const{getTransitionKey:_}=c.type;if(_){const g=_();i===void 0?i=g:g!==i&&(i=g,f=!0)}if(d&&d.type!==Tn&&(!ai(c,d)||f)){const g=td(d,a,s,n);if(nd(d,g),l==="out-in")return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},ih(o);l==="in-out"&&c.type!==Tn&&(g.delayLeave=(y,E,C)=>{const w=lT(s,d);w[String(d.key)]=d,y[Ss]=()=>{E(),y[Ss]=void 0,delete u.delayedLeave},u.delayedLeave=C})}return o}}},rO=iO;function lT(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function td(t,e,n,s){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:_,onBeforeAppear:g,onAppear:y,onAfterAppear:E,onAppearCancelled:C}=e,w=String(t.key),b=lT(n,t),M=(V,Z)=>{V&&an(V,s,9,Z)},P=(V,Z)=>{const Y=Z[1];M(V,Z),ee(V)?V.every(fe=>fe.length<=1)&&Y():V.length<=1&&Y()},q={mode:r,persisted:o,beforeEnter(V){let Z=a;if(!n.isMounted)if(i)Z=g||a;else return;V[Ss]&&V[Ss](!0);const Y=b[w];Y&&ai(t,Y)&&Y.el[Ss]&&Y.el[Ss](),M(Z,[V])},enter(V){let Z=l,Y=c,fe=u;if(!n.isMounted)if(i)Z=y||l,Y=E||c,fe=C||u;else return;let j=!1;const ie=V[il]=We=>{j||(j=!0,We?M(fe,[V]):M(Y,[V]),q.delayedLeave&&q.delayedLeave(),V[il]=void 0)};Z?P(Z,[V,ie]):ie()},leave(V,Z){const Y=String(t.key);if(V[il]&&V[il](!0),n.isUnmounting)return Z();M(h,[V]);let fe=!1;const j=V[Ss]=ie=>{fe||(fe=!0,Z(),ie?M(_,[V]):M(f,[V]),V[Ss]=void 0,b[Y]===t&&delete b[Y])};b[Y]=t,d?P(d,[V,j]):j()},clone(V){return td(V,e,n,s)}};return q}function ih(t){if(Gc(t))return t=Ws(t),t.children=null,t}function R_(t){return Gc(t)?t.children?t.children[0]:void 0:t}function nd(t,e){t.shapeFlag&6&&t.component?nd(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function cT(t,e=!1,n){let s=[],i=0;for(let r=0;r<t.length;r++){let o=t[r];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:r);o.type===Et?(o.patchFlag&128&&i++,s=s.concat(cT(o.children,e,a))):(e||o.type!==Tn)&&s.push(a!=null?Ws(o,{key:a}):o)}if(i>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Kf(t,e){return ae(t)?nt({name:t.name},e,{setup:t}):t}const bl=t=>!!t.type.__asyncLoader,Gc=t=>t.type.__isKeepAlive;function oO(t,e){uT(t,"a",e)}function aO(t,e){uT(t,"da",e)}function uT(t,e,n=ft){const s=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Yc(e,s,n),n){let i=n.parent;for(;i&&i.parent;)Gc(i.parent.vnode)&&lO(s,e,n,i),i=i.parent}}function lO(t,e,n,s){const i=Yc(e,t,s,!0);fT(()=>{Of(s[e],i)},n)}function Yc(t,e,n=ft,s=!1){if(n){const i=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Mi();const a=wa(n),l=an(e,n,t,o);return a(),Vi(),l});return s?i.unshift(r):i.push(r),r}}const _s=t=>(e,n=ft)=>(!Jc||t==="sp")&&Yc(t,(...s)=>e(...s),n),cO=_s("bm"),hT=_s("m"),uO=_s("bu"),hO=_s("u"),dT=_s("bum"),fT=_s("um"),pT=_s("sp"),dO=_s("rtg"),fO=_s("rtc");function pO(t,e=ft){Yc("ec",t,e)}function Sr(t,e,n,s){let i;const r=n&&n[s];if(ee(t)||Qe(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,r&&r[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,r&&r[o])}else if(De(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,r&&r[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(t[c],c,a,r&&r[a])}}else i=[];return n&&(n[s]=i),i}const sd=t=>t?CT(t)?Zc(t)||t.proxy:sd(t.parent):null,Ro=nt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>sd(t.parent),$root:t=>sd(t.root),$emit:t=>t.emit,$options:t=>zf(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Hf(t.update)}),$nextTick:t=>t.n||(t.n=JE.bind(t.proxy)),$watch:t=>nO.bind(t)}),rh=(t,e)=>t!==Ve&&!t.__isScriptSetup&&be(t,e),mO={get({_:t},e){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return s[e];case 2:return i[e];case 4:return n[e];case 3:return r[e]}else{if(rh(s,e))return o[e]=1,s[e];if(i!==Ve&&be(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&be(c,e))return o[e]=3,r[e];if(n!==Ve&&be(n,e))return o[e]=4,n[e];id&&(o[e]=0)}}const u=Ro[e];let h,d;if(u)return e==="$attrs"&&Bt(t,"get",e),u(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(n!==Ve&&be(n,e))return o[e]=4,n[e];if(d=l.config.globalProperties,be(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:i,ctx:r}=t;return rh(i,e)?(i[e]=n,!0):s!==Ve&&be(s,e)?(s[e]=n,!0):be(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||t!==Ve&&be(t,o)||rh(e,o)||(a=r[0])&&be(a,o)||be(s,o)||be(Ro,o)||be(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:be(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function P_(t){return ee(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let id=!0;function _O(t){const e=zf(t),n=t.proxy,s=t.ctx;id=!1,e.beforeCreate&&N_(e.beforeCreate,t,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:_,activated:g,deactivated:y,beforeDestroy:E,beforeUnmount:C,destroyed:w,unmounted:b,render:M,renderTracked:P,renderTriggered:q,errorCaptured:V,serverPrefetch:Z,expose:Y,inheritAttrs:fe,components:j,directives:ie,filters:We}=e;if(c&&gO(c,s,null),o)for(const ce in o){const ge=o[ce];ae(ge)&&(s[ce]=ge.bind(n))}if(i){const ce=i.call(n,n);De(ce)&&(t.data=Wc(ce))}if(id=!0,r)for(const ce in r){const ge=r[ce],ut=ae(ge)?ge.bind(n,n):ae(ge.get)?ge.get.bind(n,n):sn,Ht=!ae(ge)&&ae(ge.set)?ge.set.bind(n):sn,Vt=mn({get:ut,set:Ht});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>Vt.value,set:Xe=>Vt.value=Xe})}if(a)for(const ce in a)mT(a[ce],s,n,ce);if(l){const ce=ae(l)?l.call(n):l;Reflect.ownKeys(ce).forEach(ge=>{Al(ge,ce[ge])})}u&&N_(u,t,"c");function _e(ce,ge){ee(ge)?ge.forEach(ut=>ce(ut.bind(n))):ge&&ce(ge.bind(n))}if(_e(cO,h),_e(hT,d),_e(uO,f),_e(hO,_),_e(oO,g),_e(aO,y),_e(pO,V),_e(fO,P),_e(dO,q),_e(dT,C),_e(fT,b),_e(pT,Z),ee(Y))if(Y.length){const ce=t.exposed||(t.exposed={});Y.forEach(ge=>{Object.defineProperty(ce,ge,{get:()=>n[ge],set:ut=>n[ge]=ut})})}else t.exposed||(t.exposed={});M&&t.render===sn&&(t.render=M),fe!=null&&(t.inheritAttrs=fe),j&&(t.components=j),ie&&(t.directives=ie)}function gO(t,e,n=sn){ee(t)&&(t=rd(t));for(const s in t){const i=t[s];let r;De(i)?"default"in i?r=ln(i.from||s,i.default,!0):r=ln(i.from||s):r=ln(i),Lt(r)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[s]=r}}function N_(t,e,n){an(ee(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function mT(t,e,n,s){const i=s.includes(".")?oT(n,s):()=>n[s];if(Qe(t)){const r=e[t];ae(r)&&So(i,r)}else if(ae(t))So(i,t.bind(n));else if(De(t))if(ee(t))t.forEach(r=>mT(r,e,n,s));else{const r=ae(t.handler)?t.handler.bind(n):e[t.handler];ae(r)&&So(i,r,t)}}function zf(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!n&&!s?l=e:(l={},i.length&&i.forEach(c=>Bl(l,c,o,!0)),Bl(l,e,o)),De(e)&&r.set(e,l),l}function Bl(t,e,n,s=!1){const{mixins:i,extends:r}=e;r&&Bl(t,r,n,!0),i&&i.forEach(o=>Bl(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=yO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const yO={data:O_,props:k_,emits:k_,methods:go,computed:go,beforeCreate:Pt,created:Pt,beforeMount:Pt,mounted:Pt,beforeUpdate:Pt,updated:Pt,beforeDestroy:Pt,beforeUnmount:Pt,destroyed:Pt,unmounted:Pt,activated:Pt,deactivated:Pt,errorCaptured:Pt,serverPrefetch:Pt,components:go,directives:go,watch:EO,provide:O_,inject:vO};function O_(t,e){return e?t?function(){return nt(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function vO(t,e){return go(rd(t),rd(e))}function rd(t){if(ee(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pt(t,e){return t?[...new Set([].concat(t,e))]:e}function go(t,e){return t?nt(Object.create(null),t,e):e}function k_(t,e){return t?ee(t)&&ee(e)?[...new Set([...t,...e])]:nt(Object.create(null),P_(t),P_(e??{})):e}function EO(t,e){if(!t)return e;if(!e)return t;const n=nt(Object.create(null),t);for(const s in e)n[s]=Pt(t[s],e[s]);return n}function _T(){return{app:null,config:{isNativeTag:nN,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let TO=0;function wO(t,e){return function(s,i=null){ae(s)||(s=nt({},s)),i!=null&&!De(i)&&(i=null);const r=_T(),o=new WeakSet;let a=!1;const l=r.app={_uid:TO++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:KO,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&ae(c.install)?(o.add(c),c.install(l,...u)):ae(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,h){if(!a){const d=de(s,i);return d.appContext=r,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):t(d,c,h),a=!0,l._container=c,c.__vue_app__=l,Zc(d.component)||d.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){Hl=l;try{return c()}finally{Hl=null}}};return l}}let Hl=null;function Al(t,e){if(ft){let n=ft.provides;const s=ft.parent&&ft.parent.provides;s===n&&(n=ft.provides=Object.create(s)),n[t]=e}}function ln(t,e,n=!1){const s=ft||Ot;if(s||Hl){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Hl._context.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&ae(e)?e.call(s&&s.proxy):e}}function bO(t,e,n,s=!1){const i={},r={};Vl(r,Xc,1),t.propsDefaults=Object.create(null),gT(t,e,i,r);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=s?i:HE(i):t.type.props?t.props=i:t.props=r,t.attrs=r}function AO(t,e,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=t,a=Ae(i),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Kc(t.emitsOptions,d))continue;const f=e[d];if(l)if(be(r,d))f!==r[d]&&(r[d]=f,c=!0);else{const _=zn(d);i[_]=od(l,a,_,f,t,!1)}else f!==r[d]&&(r[d]=f,c=!0)}}}else{gT(t,e,i,r)&&(c=!0);let u;for(const h in a)(!e||!be(e,h)&&((u=qr(h))===h||!be(e,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(i[h]=od(l,a,h,void 0,t,!0)):delete i[h]);if(r!==a)for(const h in r)(!e||!be(e,h))&&(delete r[h],c=!0)}c&&as(t,"set","$attrs")}function gT(t,e,n,s){const[i,r]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(Tl(l))continue;const c=e[l];let u;i&&be(i,u=zn(l))?!r||!r.includes(u)?n[u]=c:(a||(a={}))[u]=c:Kc(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(r){const l=Ae(n),c=a||Ve;for(let u=0;u<r.length;u++){const h=r[u];n[h]=od(i,l,h,c[h],t,!be(c,h))}}return o}function od(t,e,n,s,i,r){const o=t[n];if(o!=null){const a=be(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ae(l)){const{propsDefaults:c}=i;if(n in c)s=c[n];else{const u=wa(i);s=c[n]=l.call(null,e),u()}}else s=l}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===qr(n))&&(s=!0))}return s}function yT(t,e,n=!1){const s=e.propsCache,i=s.get(t);if(i)return i;const r=t.props,o={},a=[];let l=!1;if(!ae(t)){const u=h=>{l=!0;const[d,f]=yT(h,e,!0);nt(o,d),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!r&&!l)return De(t)&&s.set(t,or),or;if(ee(r))for(let u=0;u<r.length;u++){const h=zn(r[u]);D_(h)&&(o[h]=Ve)}else if(r)for(const u in r){const h=zn(u);if(D_(h)){const d=r[u],f=o[h]=ee(d)||ae(d)?{type:d}:nt({},d);if(f){const _=M_(Boolean,f.type),g=M_(String,f.type);f[0]=_>-1,f[1]=g<0||_<g,(_>-1||be(f,"default"))&&a.push(h)}}}const c=[o,a];return De(t)&&s.set(t,c),c}function D_(t){return t[0]!=="$"}function x_(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function L_(t,e){return x_(t)===x_(e)}function M_(t,e){return ee(e)?e.findIndex(n=>L_(n,t)):ae(e)&&L_(e,t)?0:-1}const vT=t=>t[0]==="_"||t==="$stable",Gf=t=>ee(t)?t.map(Dn):[Dn(t)],IO=(t,e,n)=>{if(e._n)return e;const s=Nt((...i)=>Gf(e(...i)),n);return s._c=!1,s},ET=(t,e,n)=>{const s=t._ctx;for(const i in t){if(vT(i))continue;const r=t[i];if(ae(r))e[i]=IO(i,r,s);else if(r!=null){const o=Gf(r);e[i]=()=>o}}},TT=(t,e)=>{const n=Gf(e);t.slots.default=()=>n},CO=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ae(e),Vl(e,"_",n)):ET(e,t.slots={})}else t.slots={},e&&TT(t,e);Vl(t.slots,Xc,1)},SO=(t,e,n)=>{const{vnode:s,slots:i}=t;let r=!0,o=Ve;if(s.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(nt(i,e),!n&&a===1&&delete i._):(r=!e.$stable,ET(e,i)),o=e}else e&&(TT(t,e),o={default:1});if(r)for(const a in i)!vT(a)&&o[a]==null&&delete i[a]};function ad(t,e,n,s,i=!1){if(ee(t)){t.forEach((d,f)=>ad(d,e&&(ee(e)?e[f]:e),n,s,i));return}if(bl(s)&&!i)return;const r=s.shapeFlag&4?Zc(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Ve?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(Qe(c)?(u[c]=null,be(h,c)&&(h[c]=null)):Lt(c)&&(c.value=null)),ae(l))Ds(l,a,12,[o,u]);else{const d=Qe(l),f=Lt(l);if(d||f){const _=()=>{if(t.f){const g=d?be(h,l)?h[l]:u[l]:l.value;i?ee(g)&&Of(g,r):ee(g)?g.includes(r)||g.push(r):d?(u[l]=[r],be(h,l)&&(h[l]=u[l])):(l.value=[r],t.k&&(u[t.k]=l.value))}else d?(u[l]=o,be(h,l)&&(h[l]=o)):f&&(l.value=o,t.k&&(u[t.k]=o))};o?(_.id=-1,Ft(_,n)):_()}}}const Ft=ZN;function RO(t){return PO(t)}function PO(t,e){const n=SE();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=sn,insertStaticContent:_}=t,g=(p,m,v,S=null,A=null,x=null,H=void 0,D=null,L=!!m.dynamicChildren)=>{if(p===m)return;p&&!ai(p,m)&&(S=I(p),Xe(p,A,x,!0),p=null),m.patchFlag===-2&&(L=!1,m.dynamicChildren=null);const{type:O,ref:W,shapeFlag:Q}=m;switch(O){case Qc:y(p,m,v,S);break;case Tn:E(p,m,v,S);break;case Il:p==null&&C(m,v,S,H);break;case Et:j(p,m,v,S,A,x,H,D,L);break;default:Q&1?M(p,m,v,S,A,x,H,D,L):Q&6?ie(p,m,v,S,A,x,H,D,L):(Q&64||Q&128)&&O.process(p,m,v,S,A,x,H,D,L,z)}W!=null&&A&&ad(W,p&&p.ref,x,m||p,!m)},y=(p,m,v,S)=>{if(p==null)s(m.el=a(m.children),v,S);else{const A=m.el=p.el;m.children!==p.children&&c(A,m.children)}},E=(p,m,v,S)=>{p==null?s(m.el=l(m.children||""),v,S):m.el=p.el},C=(p,m,v,S)=>{[p.el,p.anchor]=_(p.children,m,v,S,p.el,p.anchor)},w=({el:p,anchor:m},v,S)=>{let A;for(;p&&p!==m;)A=d(p),s(p,v,S),p=A;s(m,v,S)},b=({el:p,anchor:m})=>{let v;for(;p&&p!==m;)v=d(p),i(p),p=v;i(m)},M=(p,m,v,S,A,x,H,D,L)=>{m.type==="svg"?H="svg":m.type==="math"&&(H="mathml"),p==null?P(m,v,S,A,x,H,D,L):Z(p,m,A,x,H,D,L)},P=(p,m,v,S,A,x,H,D)=>{let L,O;const{props:W,shapeFlag:Q,transition:G,dirs:ne}=p;if(L=p.el=o(p.type,x,W&&W.is,W),Q&8?u(L,p.children):Q&16&&V(p.children,L,null,S,A,oh(p,x),H,D),ne&&ei(p,null,S,"created"),q(L,p,p.scopeId,H,S),W){for(const Ie in W)Ie!=="value"&&!Tl(Ie)&&r(L,Ie,null,W[Ie],x,p.children,S,A,Ke);"value"in W&&r(L,"value",null,W.value,x),(O=W.onVnodeBeforeMount)&&On(O,S,p)}ne&&ei(p,null,S,"beforeMount");const he=NO(A,G);he&&G.beforeEnter(L),s(L,m,v),((O=W&&W.onVnodeMounted)||he||ne)&&Ft(()=>{O&&On(O,S,p),he&&G.enter(L),ne&&ei(p,null,S,"mounted")},A)},q=(p,m,v,S,A)=>{if(v&&f(p,v),S)for(let x=0;x<S.length;x++)f(p,S[x]);if(A){let x=A.subTree;if(m===x){const H=A.vnode;q(p,H,H.scopeId,H.slotScopeIds,A.parent)}}},V=(p,m,v,S,A,x,H,D,L=0)=>{for(let O=L;O<p.length;O++){const W=p[O]=D?Rs(p[O]):Dn(p[O]);g(null,W,m,v,S,A,x,H,D)}},Z=(p,m,v,S,A,x,H)=>{const D=m.el=p.el;let{patchFlag:L,dynamicChildren:O,dirs:W}=m;L|=p.patchFlag&16;const Q=p.props||Ve,G=m.props||Ve;let ne;if(v&&ti(v,!1),(ne=G.onVnodeBeforeUpdate)&&On(ne,v,m,p),W&&ei(m,p,v,"beforeUpdate"),v&&ti(v,!0),O?Y(p.dynamicChildren,O,D,v,S,oh(m,A),x):H||ge(p,m,D,null,v,S,oh(m,A),x,!1),L>0){if(L&16)fe(D,m,Q,G,v,S,A);else if(L&2&&Q.class!==G.class&&r(D,"class",null,G.class,A),L&4&&r(D,"style",Q.style,G.style,A),L&8){const he=m.dynamicProps;for(let Ie=0;Ie<he.length;Ie++){const He=he[Ie],st=Q[He],pn=G[He];(pn!==st||He==="value")&&r(D,He,st,pn,A,p.children,v,S,Ke)}}L&1&&p.children!==m.children&&u(D,m.children)}else!H&&O==null&&fe(D,m,Q,G,v,S,A);((ne=G.onVnodeUpdated)||W)&&Ft(()=>{ne&&On(ne,v,m,p),W&&ei(m,p,v,"updated")},S)},Y=(p,m,v,S,A,x,H)=>{for(let D=0;D<m.length;D++){const L=p[D],O=m[D],W=L.el&&(L.type===Et||!ai(L,O)||L.shapeFlag&70)?h(L.el):v;g(L,O,W,null,S,A,x,H,!0)}},fe=(p,m,v,S,A,x,H)=>{if(v!==S){if(v!==Ve)for(const D in v)!Tl(D)&&!(D in S)&&r(p,D,v[D],null,H,m.children,A,x,Ke);for(const D in S){if(Tl(D))continue;const L=S[D],O=v[D];L!==O&&D!=="value"&&r(p,D,O,L,H,m.children,A,x,Ke)}"value"in S&&r(p,"value",v.value,S.value,H)}},j=(p,m,v,S,A,x,H,D,L)=>{const O=m.el=p?p.el:a(""),W=m.anchor=p?p.anchor:a("");let{patchFlag:Q,dynamicChildren:G,slotScopeIds:ne}=m;ne&&(D=D?D.concat(ne):ne),p==null?(s(O,v,S),s(W,v,S),V(m.children||[],v,W,A,x,H,D,L)):Q>0&&Q&64&&G&&p.dynamicChildren?(Y(p.dynamicChildren,G,v,A,x,H,D),(m.key!=null||A&&m===A.subTree)&&wT(p,m,!0)):ge(p,m,v,W,A,x,H,D,L)},ie=(p,m,v,S,A,x,H,D,L)=>{m.slotScopeIds=D,p==null?m.shapeFlag&512?A.ctx.activate(m,v,S,H,L):We(m,v,S,A,x,H,L):ct(p,m,L)},We=(p,m,v,S,A,x,H)=>{const D=p.component=$O(p,S,A);if(Gc(p)&&(D.ctx.renderer=z),UO(D),D.asyncDep){if(A&&A.registerDep(D,_e),!p.el){const L=D.subTree=de(Tn);E(null,L,m,v)}}else _e(D,p,m,v,A,x,H)},ct=(p,m,v)=>{const S=m.component=p.component;if(YN(p,m,v))if(S.asyncDep&&!S.asyncResolved){ce(S,m,v);return}else S.next=m,jN(S.update),S.effect.dirty=!0,S.update();else m.el=p.el,S.vnode=m},_e=(p,m,v,S,A,x,H)=>{const D=()=>{if(p.isMounted){let{next:W,bu:Q,u:G,parent:ne,vnode:he}=p;{const Wi=bT(p);if(Wi){W&&(W.el=he.el,ce(p,W,H)),Wi.asyncDep.then(()=>{p.isUnmounted||D()});return}}let Ie=W,He;ti(p,!1),W?(W.el=he.el,ce(p,W,H)):W=he,Q&&wl(Q),(He=W.props&&W.props.onVnodeBeforeUpdate)&&On(He,ne,W,he),ti(p,!0);const st=sh(p),pn=p.subTree;p.subTree=st,g(pn,st,h(pn.el),I(pn),p,A,x),W.el=st.el,Ie===null&&QN(p,st.el),G&&Ft(G,A),(He=W.props&&W.props.onVnodeUpdated)&&Ft(()=>On(He,ne,W,he),A)}else{let W;const{el:Q,props:G}=m,{bm:ne,m:he,parent:Ie}=p,He=bl(m);if(ti(p,!1),ne&&wl(ne),!He&&(W=G&&G.onVnodeBeforeMount)&&On(W,Ie,m),ti(p,!0),Q&&xe){const st=()=>{p.subTree=sh(p),xe(Q,p.subTree,p,A,null)};He?m.type.__asyncLoader().then(()=>!p.isUnmounted&&st()):st()}else{const st=p.subTree=sh(p);g(null,st,v,S,p,A,x),m.el=st.el}if(he&&Ft(he,A),!He&&(W=G&&G.onVnodeMounted)){const st=m;Ft(()=>On(W,Ie,st),A)}(m.shapeFlag&256||Ie&&bl(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&p.a&&Ft(p.a,A),p.isMounted=!0,m=v=S=null}},L=p.effect=new xf(D,sn,()=>Hf(O),p.scope),O=p.update=()=>{L.dirty&&L.run()};O.id=p.uid,ti(p,!0),O()},ce=(p,m,v)=>{m.component=p;const S=p.vnode.props;p.vnode=m,p.next=null,AO(p,m.props,S,v),SO(p,m.children,v),Mi(),I_(p),Vi()},ge=(p,m,v,S,A,x,H,D,L=!1)=>{const O=p&&p.children,W=p?p.shapeFlag:0,Q=m.children,{patchFlag:G,shapeFlag:ne}=m;if(G>0){if(G&128){Ht(O,Q,v,S,A,x,H,D,L);return}else if(G&256){ut(O,Q,v,S,A,x,H,D,L);return}}ne&8?(W&16&&Ke(O,A,x),Q!==O&&u(v,Q)):W&16?ne&16?Ht(O,Q,v,S,A,x,H,D,L):Ke(O,A,x,!0):(W&8&&u(v,""),ne&16&&V(Q,v,S,A,x,H,D,L))},ut=(p,m,v,S,A,x,H,D,L)=>{p=p||or,m=m||or;const O=p.length,W=m.length,Q=Math.min(O,W);let G;for(G=0;G<Q;G++){const ne=m[G]=L?Rs(m[G]):Dn(m[G]);g(p[G],ne,v,null,A,x,H,D,L)}O>W?Ke(p,A,x,!0,!1,Q):V(m,v,S,A,x,H,D,L,Q)},Ht=(p,m,v,S,A,x,H,D,L)=>{let O=0;const W=m.length;let Q=p.length-1,G=W-1;for(;O<=Q&&O<=G;){const ne=p[O],he=m[O]=L?Rs(m[O]):Dn(m[O]);if(ai(ne,he))g(ne,he,v,null,A,x,H,D,L);else break;O++}for(;O<=Q&&O<=G;){const ne=p[Q],he=m[G]=L?Rs(m[G]):Dn(m[G]);if(ai(ne,he))g(ne,he,v,null,A,x,H,D,L);else break;Q--,G--}if(O>Q){if(O<=G){const ne=G+1,he=ne<W?m[ne].el:S;for(;O<=G;)g(null,m[O]=L?Rs(m[O]):Dn(m[O]),v,he,A,x,H,D,L),O++}}else if(O>G)for(;O<=Q;)Xe(p[O],A,x,!0),O++;else{const ne=O,he=O,Ie=new Map;for(O=he;O<=G;O++){const qt=m[O]=L?Rs(m[O]):Dn(m[O]);qt.key!=null&&Ie.set(qt.key,O)}let He,st=0;const pn=G-he+1;let Wi=!1,Om=0;const io=new Array(pn);for(O=0;O<pn;O++)io[O]=0;for(O=ne;O<=Q;O++){const qt=p[O];if(st>=pn){Xe(qt,A,x,!0);continue}let Nn;if(qt.key!=null)Nn=Ie.get(qt.key);else for(He=he;He<=G;He++)if(io[He-he]===0&&ai(qt,m[He])){Nn=He;break}Nn===void 0?Xe(qt,A,x,!0):(io[Nn-he]=O+1,Nn>=Om?Om=Nn:Wi=!0,g(qt,m[Nn],v,null,A,x,H,D,L),st++)}const km=Wi?OO(io):or;for(He=km.length-1,O=pn-1;O>=0;O--){const qt=he+O,Nn=m[qt],Dm=qt+1<W?m[qt+1].el:S;io[O]===0?g(null,Nn,v,Dm,A,x,H,D,L):Wi&&(He<0||O!==km[He]?Vt(Nn,v,Dm,2):He--)}}},Vt=(p,m,v,S,A=null)=>{const{el:x,type:H,transition:D,children:L,shapeFlag:O}=p;if(O&6){Vt(p.component.subTree,m,v,S);return}if(O&128){p.suspense.move(m,v,S);return}if(O&64){H.move(p,m,v,z);return}if(H===Et){s(x,m,v);for(let Q=0;Q<L.length;Q++)Vt(L[Q],m,v,S);s(p.anchor,m,v);return}if(H===Il){w(p,m,v);return}if(S!==2&&O&1&&D)if(S===0)D.beforeEnter(x),s(x,m,v),Ft(()=>D.enter(x),A);else{const{leave:Q,delayLeave:G,afterLeave:ne}=D,he=()=>s(x,m,v),Ie=()=>{Q(x,()=>{he(),ne&&ne()})};G?G(x,he,Ie):Ie()}else s(x,m,v)},Xe=(p,m,v,S=!1,A=!1)=>{const{type:x,props:H,ref:D,children:L,dynamicChildren:O,shapeFlag:W,patchFlag:Q,dirs:G}=p;if(D!=null&&ad(D,null,v,p,!0),W&256){m.ctx.deactivate(p);return}const ne=W&1&&G,he=!bl(p);let Ie;if(he&&(Ie=H&&H.onVnodeBeforeUnmount)&&On(Ie,m,p),W&6)Wt(p.component,v,S);else{if(W&128){p.suspense.unmount(v,S);return}ne&&ei(p,null,m,"beforeUnmount"),W&64?p.type.remove(p,m,v,A,z,S):O&&(x!==Et||Q>0&&Q&64)?Ke(O,m,v,!1,!0):(x===Et&&Q&384||!A&&W&16)&&Ke(L,m,v),S&&fn(p)}(he&&(Ie=H&&H.onVnodeUnmounted)||ne)&&Ft(()=>{Ie&&On(Ie,m,p),ne&&ei(p,null,m,"unmounted")},v)},fn=p=>{const{type:m,el:v,anchor:S,transition:A}=p;if(m===Et){jt(v,S);return}if(m===Il){b(p);return}const x=()=>{i(v),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(p.shapeFlag&1&&A&&!A.persisted){const{leave:H,delayLeave:D}=A,L=()=>H(v,x);D?D(p.el,x,L):L()}else x()},jt=(p,m)=>{let v;for(;p!==m;)v=d(p),i(p),p=v;i(m)},Wt=(p,m,v)=>{const{bum:S,scope:A,update:x,subTree:H,um:D}=p;S&&wl(S),A.stop(),x&&(x.active=!1,Xe(H,p,m,v)),D&&Ft(D,m),Ft(()=>{p.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},Ke=(p,m,v,S=!1,A=!1,x=0)=>{for(let H=x;H<p.length;H++)Xe(p[H],m,v,S,A)},I=p=>p.shapeFlag&6?I(p.component.subTree):p.shapeFlag&128?p.suspense.next():d(p.anchor||p.el);let B=!1;const F=(p,m,v)=>{p==null?m._vnode&&Xe(m._vnode,null,null,!0):g(m._vnode||null,p,m,null,null,null,v),B||(B=!0,I_(),eT(),B=!1),m._vnode=p},z={p:g,um:Xe,m:Vt,r:fn,mt:We,mc:V,pc:ge,pbc:Y,n:I,o:t};let ve,xe;return e&&([ve,xe]=e(z)),{render:F,hydrate:ve,createApp:wO(F,ve)}}function oh({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ti({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function NO(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function wT(t,e,n=!1){const s=t.children,i=e.children;if(ee(s)&&ee(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Rs(i[r]),a.el=o.el),n||wT(o,a)),a.type===Qc&&(a.el=o.el)}}function OO(t){const e=t.slice(),n=[0];let s,i,r,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(i=n[n.length-1],t[i]<c){e[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<c?r=a+1:o=a;c<t[n[r]]&&(r>0&&(e[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function bT(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:bT(e)}const kO=t=>t.__isTeleport,Et=Symbol.for("v-fgt"),Qc=Symbol.for("v-txt"),Tn=Symbol.for("v-cmt"),Il=Symbol.for("v-stc"),Po=[];let gn=null;function ue(t=!1){Po.push(gn=t?null:[])}function DO(){Po.pop(),gn=Po[Po.length-1]||null}let zo=1;function V_(t){zo+=t}function AT(t){return t.dynamicChildren=zo>0?gn||or:null,DO(),zo>0&&gn&&gn.push(t),t}function Se(t,e,n,s,i,r){return AT(T(t,e,n,s,i,r,!0))}function ls(t,e,n,s,i){return AT(de(t,e,n,s,i,!0))}function ld(t){return t?t.__v_isVNode===!0:!1}function ai(t,e){return t.type===e.type&&t.key===e.key}const Xc="__vInternal",IT=({key:t})=>t??null,Cl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||Lt(t)||ae(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function T(t,e=null,n=null,s=0,i=null,r=t===Et?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&IT(e),ref:e&&Cl(e),scopeId:zc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ot};return a?(Qf(l,n),r&128&&t.normalize(l)):n&&(l.shapeFlag|=Qe(n)?8:16),zo>0&&!o&&gn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&gn.push(l),l}const de=xO;function xO(t,e=null,n=null,s=0,i=null,r=!1){if((!t||t===sT)&&(t=Tn),ld(t)){const a=Ws(t,e,!0);return n&&Qf(a,n),zo>0&&!r&&gn&&(a.shapeFlag&6?gn[gn.indexOf(t)]=a:gn.push(a)),a.patchFlag|=-2,a}if(qO(t)&&(t=t.__vccOpts),e){e=LO(e);let{class:a,style:l}=e;a&&!Qe(a)&&(e.class=Bc(a)),De(l)&&(WE(l)&&!ee(l)&&(l=nt({},l)),e.style=Df(l))}const o=Qe(t)?1:JN(t)?128:kO(t)?64:De(t)?4:ae(t)?2:0;return T(t,e,n,s,i,o,r,!0)}function LO(t){return t?WE(t)||Xc in t?nt({},t):t:null}function Ws(t,e,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=t,a=e?MO(s||{},e):s;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&IT(a),ref:e&&e.ref?n&&i?ee(i)?i.concat(Cl(e)):[i,Cl(e)]:Cl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Et?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ws(t.ssContent),ssFallback:t.ssFallback&&Ws(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function ze(t=" ",e=0){return de(Qc,null,t,e)}function Yf(t,e){const n=de(Il,null,t);return n.staticCount=e,n}function xs(t="",e=!1){return e?(ue(),ls(Tn,null,t)):de(Tn,null,t)}function Dn(t){return t==null||typeof t=="boolean"?de(Tn):ee(t)?de(Et,null,t.slice()):typeof t=="object"?Rs(t):de(Qc,null,String(t))}function Rs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ws(t)}function Qf(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ee(e))n=16;else if(typeof e=="object")if(s&65){const i=e.default;i&&(i._c&&(i._d=!1),Qf(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(Xc in e)?e._ctx=Ot:i===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),s&64?(n=16,e=[ze(e)]):n=8);t.children=e,t.shapeFlag|=n}function MO(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const i in s)if(i==="class")e.class!==s.class&&(e.class=Bc([e.class,s.class]));else if(i==="style")e.style=Df([e.style,s.style]);else if(Vc(i)){const r=e[i],o=s[i];o&&r!==o&&!(ee(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=s[i])}return e}function On(t,e,n,s=null){an(t,e,7,[n,s])}const VO=_T();let FO=0;function $O(t,e,n){const s=t.type,i=(e?e.appContext:t.appContext)||VO,r={uid:FO++,vnode:t,type:s,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new _N(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:yT(s,i),emitsOptions:nT(s,i),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:s.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=KN.bind(null,r),t.ce&&t.ce(r),r}let ft=null;const Xf=()=>ft||Ot;let jl,cd;{const t=SE(),e=(n,s)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};jl=e("__VUE_INSTANCE_SETTERS__",n=>ft=n),cd=e("__VUE_SSR_SETTERS__",n=>Jc=n)}const wa=t=>{const e=ft;return jl(t),t.scope.on(),()=>{t.scope.off(),jl(e)}},F_=()=>{ft&&ft.scope.off(),jl(null)};function CT(t){return t.vnode.shapeFlag&4}let Jc=!1;function UO(t,e=!1){e&&cd(e);const{props:n,children:s}=t.vnode,i=CT(t);bO(t,n,i,e),CO(t,s);const r=i?BO(t,e):void 0;return e&&cd(!1),r}function BO(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=qE(new Proxy(t.ctx,mO));const{setup:s}=n;if(s){const i=t.setupContext=s.length>1?jO(t):null,r=wa(t);Mi();const o=Ds(s,t,0,[t.props,i]);if(Vi(),r(),AE(o)){if(o.then(F_,F_),e)return o.then(a=>{$_(t,a,e)}).catch(a=>{qc(a,t,0)});t.asyncDep=o}else $_(t,o,e)}else ST(t,e)}function $_(t,e,n){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:De(e)&&(t.setupState=QE(e)),ST(t,n)}let U_;function ST(t,e,n){const s=t.type;if(!t.render){if(!e&&U_&&!s.render){const i=s.template||zf(t).template;if(i){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=s,c=nt(nt({isCustomElement:r,delimiters:a},o),l);s.render=U_(i,c)}}t.render=s.render||sn}{const i=wa(t);Mi();try{_O(t)}finally{Vi(),i()}}}function HO(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Bt(t,"get","$attrs"),e[n]}}))}function jO(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return HO(t)},slots:t.slots,emit:t.emit,expose:e}}function Zc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(QE(qE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ro)return Ro[n](t)},has(e,n){return n in e||n in Ro}}))}function WO(t,e=!0){return ae(t)?t.displayName||t.name:t.name||e&&t.__name}function qO(t){return ae(t)&&"__vccOpts"in t}const mn=(t,e)=>FN(t,e,Jc);function Jf(t,e,n){const s=arguments.length;return s===2?De(e)&&!ee(e)?ld(e)?de(t,null,[e]):de(t,e):de(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ld(n)&&(n=[n]),de(t,e,n))}const KO="3.4.8";/**
* @vue/runtime-dom v3.4.8
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const zO="http://www.w3.org/2000/svg",GO="http://www.w3.org/1998/Math/MathML",Ps=typeof document<"u"?document:null,B_=Ps&&Ps.createElement("template"),YO={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const i=e==="svg"?Ps.createElementNS(zO,t):e==="mathml"?Ps.createElementNS(GO,t):Ps.createElement(t,n?{is:n}:void 0);return t==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:t=>Ps.createTextNode(t),createComment:t=>Ps.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ps.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,i,r){const o=n?n.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{B_.innerHTML=s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t;const a=B_.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ws="transition",ao="animation",Go=Symbol("_vtc"),Zf=(t,{slots:e})=>Jf(rO,QO(t),e);Zf.displayName="Transition";const RT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Zf.props=nt({},aT,RT);const ni=(t,e=[])=>{ee(t)?t.forEach(n=>n(...e)):t&&t(...e)},H_=t=>t?ee(t)?t.some(e=>e.length>1):t.length>1:!1;function QO(t){const e={};for(const j in t)j in RT||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:s,duration:i,enterFromClass:r=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,_=XO(i),g=_&&_[0],y=_&&_[1],{onBeforeEnter:E,onEnter:C,onEnterCancelled:w,onLeave:b,onLeaveCancelled:M,onBeforeAppear:P=E,onAppear:q=C,onAppearCancelled:V=w}=e,Z=(j,ie,We)=>{si(j,ie?u:a),si(j,ie?c:o),We&&We()},Y=(j,ie)=>{j._isLeaving=!1,si(j,h),si(j,f),si(j,d),ie&&ie()},fe=j=>(ie,We)=>{const ct=j?q:C,_e=()=>Z(ie,j,We);ni(ct,[ie,_e]),j_(()=>{si(ie,j?l:r),bs(ie,j?u:a),H_(ct)||W_(ie,s,g,_e)})};return nt(e,{onBeforeEnter(j){ni(E,[j]),bs(j,r),bs(j,o)},onBeforeAppear(j){ni(P,[j]),bs(j,l),bs(j,c)},onEnter:fe(!1),onAppear:fe(!0),onLeave(j,ie){j._isLeaving=!0;const We=()=>Y(j,ie);bs(j,h),ek(),bs(j,d),j_(()=>{j._isLeaving&&(si(j,h),bs(j,f),H_(b)||W_(j,s,y,We))}),ni(b,[j,We])},onEnterCancelled(j){Z(j,!1),ni(w,[j])},onAppearCancelled(j){Z(j,!0),ni(V,[j])},onLeaveCancelled(j){Y(j),ni(M,[j])}})}function XO(t){if(t==null)return null;if(De(t))return[ah(t.enter),ah(t.leave)];{const e=ah(t);return[e,e]}}function ah(t){return aN(t)}function bs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Go]||(t[Go]=new Set)).add(e)}function si(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Go];n&&(n.delete(e),n.size||(t[Go]=void 0))}function j_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let JO=0;function W_(t,e,n,s){const i=t._endId=++JO,r=()=>{i===t._endId&&s()};if(n)return setTimeout(r,n);const{type:o,timeout:a,propCount:l}=ZO(t,e);if(!o)return s();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,d),r()},d=f=>{f.target===t&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),t.addEventListener(c,d)}function ZO(t,e){const n=window.getComputedStyle(t),s=_=>(n[_]||"").split(", "),i=s(`${ws}Delay`),r=s(`${ws}Duration`),o=q_(i,r),a=s(`${ao}Delay`),l=s(`${ao}Duration`),c=q_(a,l);let u=null,h=0,d=0;e===ws?o>0&&(u=ws,h=o,d=r.length):e===ao?c>0&&(u=ao,h=c,d=l.length):(h=Math.max(o,c),u=h>0?o>c?ws:ao:null,d=u?u===ws?r.length:l.length:0);const f=u===ws&&/\b(transform|all)(,|$)/.test(s(`${ws}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:f}}function q_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>K_(n)+K_(t[s])))}function K_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ek(){return document.body.offsetHeight}function tk(t,e,n){const s=t[Go];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const nk=Symbol("_vod"),sk=Symbol("");function ik(t,e,n){const s=t.style,i=Qe(n);if(n&&!i){if(e&&!Qe(e))for(const r in e)n[r]==null&&ud(s,r,"");for(const r in n)ud(s,r,n[r])}else{const r=s.display;if(i){if(e!==n){const o=s[sk];o&&(n+=";"+o),s.cssText=n}}else e&&t.removeAttribute("style");nk in t&&(s.display=r)}}const z_=/\s*!important$/;function ud(t,e,n){if(ee(n))n.forEach(s=>ud(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=rk(t,e);z_.test(n)?t.setProperty(qr(s),n.replace(z_,""),"important"):t[s]=n}}const G_=["Webkit","Moz","ms"],lh={};function rk(t,e){const n=lh[e];if(n)return n;let s=zn(e);if(s!=="filter"&&s in t)return lh[e]=s;s=Uc(s);for(let i=0;i<G_.length;i++){const r=G_[i]+s;if(r in t)return lh[e]=r}return e}const Y_="http://www.w3.org/1999/xlink";function ok(t,e,n,s,i){if(s&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Y_,e.slice(6,e.length)):t.setAttributeNS(Y_,e,n);else{const r=fN(e);n==null||r&&!RE(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function ak(t,e,n,s,i,r,o){if(e==="innerHTML"||e==="textContent"){s&&o(s,i,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){t._value=n;const c=a==="OPTION"?t.getAttribute("value"):t.value,u=n??"";c!==u&&(t.value=u),n==null&&t.removeAttribute(e);return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=RE(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function li(t,e,n,s){t.addEventListener(e,n,s)}function lk(t,e,n,s){t.removeEventListener(e,n,s)}const Q_=Symbol("_vei");function ck(t,e,n,s,i=null){const r=t[Q_]||(t[Q_]={}),o=r[e];if(s&&o)o.value=s;else{const[a,l]=uk(e);if(s){const c=r[e]=fk(s,i);li(t,a,c,l)}else o&&(lk(t,a,o,l),r[e]=void 0)}}const X_=/(?:Once|Passive|Capture)$/;function uk(t){let e;if(X_.test(t)){e={};let s;for(;s=t.match(X_);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qr(t.slice(2)),e]}let ch=0;const hk=Promise.resolve(),dk=()=>ch||(hk.then(()=>ch=0),ch=Date.now());function fk(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;an(pk(s,n.value),e,5,[s])};return n.value=t,n.attached=dk(),n}function pk(t,e){if(ee(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>i=>!i._stopped&&s&&s(i))}else return e}const J_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mk=(t,e,n,s,i,r,o,a,l)=>{const c=i==="svg";e==="class"?tk(t,s,c):e==="style"?ik(t,n,s):Vc(e)?Nf(e)||ck(t,e,n,s,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):_k(t,e,s,c))?ak(t,e,s,r,o,a,l):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),ok(t,e,s,c))};function _k(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&J_(e)&&ae(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return J_(e)&&Qe(n)?!1:e in t}const Wl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ee(e)?n=>wl(e,n):e};function gk(t){t.target.composing=!0}function Z_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign"),ts={created(t,{modifiers:{lazy:e,trim:n,number:s}},i){t[hr]=Wl(i);const r=s||i.props&&i.props.type==="number";li(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),r&&(a=Fl(a)),t[hr](a)}),n&&li(t,"change",()=>{t.value=t.value.trim()}),e||(li(t,"compositionstart",gk),li(t,"compositionend",Z_),li(t,"change",Z_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:s,number:i}},r){if(t[hr]=Wl(r),t.composing)return;const o=i||t.type==="number"?Fl(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||s&&t.value.trim()===a)||(t.value=a))}},yk={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const i=Fc(e);li(t,"change",()=>{const r=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Fl(ql(o)):ql(o));t[hr](t.multiple?i?new Set(r):r:r[0])}),t[hr]=Wl(s)},mounted(t,{value:e}){eg(t,e)},beforeUpdate(t,e,n){t[hr]=Wl(n)},updated(t,{value:e}){eg(t,e)}};function eg(t,e){const n=t.multiple;if(!(n&&!ee(e)&&!Fc(e))){for(let s=0,i=t.options.length;s<i;s++){const r=t.options[s],o=ql(r);if(n)ee(e)?r.selected=mN(e,o)>-1:r.selected=e.has(o);else if(Hc(ql(r),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ql(t){return"_value"in t?t._value:t.value}const vk=["ctrl","shift","alt","meta"],Ek={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vk.some(n=>t[`${n}Key`]&&!e.includes(n))},Tk=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=Ek[e[o]];if(a&&a(i,e))return}return t(i,...r)})},wk=nt({patchProp:mk},YO);let tg;function bk(){return tg||(tg=RO(wk))}const Ak=(...t)=>{const e=bk().createApp(...t),{mount:n}=e;return e.mount=s=>{const i=Ck(s);if(!i)return;const r=e._component;!ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,Ik(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Ik(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ck(t){return Qe(t)?document.querySelector(t):t}const Mt=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},Sk={},Rk=t=>(jf("data-v-b347631a"),t=t(),Wf(),t),Pk={class:"navbar z-100 navbar-expand-lg w-100 bg-fruuters"},Nk={class:"container"},Ok=Rk(()=>T("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[T("span",{class:"navbar-toggler-icon"})],-1)),kk={class:"collapse navbar-collapse justify-content-start",id:"navbarNav"},Dk={class:"col-6 navbar-nav justify-content-evenly fw-light"},xk={class:"nav-item"},Lk={class:"nav-item"},Mk={class:"nav-item"},Vk={class:"nav-item"};function Fk(t,e){const n=Ye("RouterLink");return ue(),Se("nav",Pk,[T("div",Nk,[de(n,{to:"/",class:"text-white h2 text-decoration-none letter nav-title"},{default:Nt(()=>[ze("früüters.id")]),_:1}),Ok,T("div",kk,[T("ul",Dk,[T("li",xk,[de(n,{to:"/categories","active-class":"fw-bold",class:"nav-link text-white"},{default:Nt(()=>[ze("Categories")]),_:1})]),T("li",Lk,[de(n,{to:"/offers","active-class":"fw-bold",class:"nav-link text-white"},{default:Nt(()=>[ze("Offers")]),_:1})]),T("li",Mk,[de(n,{to:"/account","active-class":"fw-bold",class:"nav-link text-white"},{default:Nt(()=>[ze("Account")]),_:1})]),T("li",Vk,[de(n,{to:"/contact","active-class":"fw-bold",class:"nav-link text-white"},{default:Nt(()=>[ze("Contact")]),_:1})])])])])])}const $k=Mt(Sk,[["render",Fk],["__scopeId","data-v-b347631a"]]),Uk={},Bk={class:"bg-fruuters footer"},Hk=Yf('<div class="container" data-v-04febc99><footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4" data-v-04febc99><ul class="col-md-2 mb-0 text-white list-group" data-v-04febc99><li data-v-04febc99>Fruuters.id :</li><li data-v-04febc99>Get Your Own Fruits</li><li data-v-04febc99>More Easier!</li></ul><a href="/" class="text-white col-md-6 d-flex align-items-center justify-content-center mb-3 mb-md-0 link-dark text-decoration-none" data-v-04febc99><div class="display-5 fw-bold footer-title" data-v-04febc99>früüters</div></a><ul class="nav col-md-2 justify-content-end" data-v-04febc99><a href="https://github.com/mozaldy/" class="text-decoration-none" data-v-04febc99><p class="mb-0 text-white" data-v-04febc99>Made by The 2DH Team</p></a></ul></footer></div>',1),jk=[Hk];function Wk(t,e){return ue(),Se("div",Bk,jk)}const qk=Mt(Uk,[["render",Wk],["__scopeId","data-v-04febc99"]]),Kk=Kf({__name:"App",setup(t){return(e,n)=>{const s=Ye("router-view");return ue(),Se("div",null,[de($k),de(s,null,{default:Nt(({Component:i})=>[de(Zf,{name:"slide",mode:"out-in"},{default:Nt(()=>[(ue(),ls(XN(i),{key:e.$route.path}))]),_:2},1024)]),_:1}),de(qk)])}}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ji=typeof window<"u";function zk(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Pe=Object.assign;function uh(t,e){const n={};for(const s in e){const i=e[s];n[s]=An(i)?i.map(t):t(i)}return n}const No=()=>{},An=Array.isArray,Gk=/\/$/,Yk=t=>t.replace(Gk,"");function hh(t,e,n="/"){let s,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),i=t(r)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=Zk(s??e,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:o}}function Qk(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function ng(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Xk(t,e,n){const s=e.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Rr(e.matched[s],n.matched[i])&&PT(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Rr(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function PT(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Jk(t[n],e[n]))return!1;return!0}function Jk(t,e){return An(t)?sg(t,e):An(e)?sg(e,t):t===e}function sg(t,e){return An(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function Zk(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o-(o===s.length?1:0)).join("/")}var Yo;(function(t){t.pop="pop",t.push="push"})(Yo||(Yo={}));var Oo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Oo||(Oo={}));function eD(t){if(!t)if(Ji){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Yk(t)}const tD=/^[^#]+#/;function nD(t,e){return t.replace(tD,"#")+e}function sD(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const eu=()=>({left:window.pageXOffset,top:window.pageYOffset});function iD(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=sD(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function ig(t,e){return(history.state?history.state.position-e:-1)+t}const hd=new Map;function rD(t,e){hd.set(t,e)}function oD(t){const e=hd.get(t);return hd.delete(t),e}let aD=()=>location.protocol+"//"+location.host;function NT(t,e){const{pathname:n,search:s,hash:i}=e,r=t.indexOf("#");if(r>-1){let a=i.includes(t.slice(r))?t.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ng(l,"")}return ng(n,t)+s+i}function lD(t,e,n,s){let i=[],r=[],o=null;const a=({state:d})=>{const f=NT(t,location),_=n.value,g=e.value;let y=0;if(d){if(n.value=f,e.value=d,o&&o===_){o=null;return}y=g?d.position-g.position:0}else s(f);i.forEach(E=>{E(n.value,_,{delta:y,type:Yo.pop,direction:y?y>0?Oo.forward:Oo.back:Oo.unknown})})};function l(){o=n.value}function c(d){i.push(d);const f=()=>{const _=i.indexOf(d);_>-1&&i.splice(_,1)};return r.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Pe({},d.state,{scroll:eu()}),"")}function h(){for(const d of r)d();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function rg(t,e,n,s=!1,i=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:i?eu():null}}function cD(t){const{history:e,location:n}=window,s={value:NT(t,n)},i={value:e.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const h=t.indexOf("#"),d=h>-1?(n.host&&document.querySelector("base")?t:t.slice(h))+l:aD()+t+l;try{e[u?"replaceState":"pushState"](c,"",d),i.value=c}catch(f){console.error(f),n[u?"replace":"assign"](d)}}function o(l,c){const u=Pe({},e.state,rg(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),s.value=l}function a(l,c){const u=Pe({},i.value,e.state,{forward:l,scroll:eu()});r(u.current,u,!0);const h=Pe({},rg(s.value,l,null),{position:u.position+1},c);r(l,h,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function uD(t){t=eD(t);const e=cD(t),n=lD(t,e.state,e.location,e.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=Pe({location:"",base:t,go:s,createHref:nD.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function hD(t){return typeof t=="string"||t&&typeof t=="object"}function OT(t){return typeof t=="string"||typeof t=="symbol"}const As={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},kT=Symbol("");var og;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(og||(og={}));function Pr(t,e){return Pe(new Error,{type:t,[kT]:!0},e)}function es(t,e){return t instanceof Error&&kT in t&&(e==null||!!(t.type&e))}const ag="[^/]+?",dD={sensitive:!1,strict:!1,start:!0,end:!0},fD=/[.+*?^${}()[\]/\\]/g;function pD(t,e){const n=Pe({},dD,e),s=[];let i=n.start?"^":"";const r=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(n.sensitive?.25:0);if(d.type===0)h||(i+="/"),i+=d.value.replace(fD,"\\$&"),f+=40;else if(d.type===1){const{value:_,repeatable:g,optional:y,regexp:E}=d;r.push({name:_,repeatable:g,optional:y});const C=E||ag;if(C!==ag){f+=10;try{new RegExp(`(${C})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${_}" (${C}): `+b.message)}}let w=g?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;h||(w=y&&c.length<2?`(?:/${w})`:"/"+w),y&&(w+="?"),i+=w,f+=20,y&&(f+=-8),g&&(f+=-20),C===".*"&&(f+=-50)}u.push(f)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",_=r[d-1];h[_.name]=f&&_.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of t){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:_,repeatable:g,optional:y}=f,E=_ in c?c[_]:"";if(An(E)&&!g)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const C=An(E)?E.join("/"):E;if(!C)if(y)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${_}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function mD(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function _D(t,e){let n=0;const s=t.score,i=e.score;for(;n<s.length&&n<i.length;){const r=mD(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(lg(s))return 1;if(lg(i))return-1}return i.length-s.length}function lg(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const gD={type:0,value:""},yD=/[a-zA-Z0-9_]/;function vD(t){if(!t)return[[]];if(t==="/")return[[gD]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function h(){c&&(n===0?r.push({type:0,value:c}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),n=1):d();break;case 4:d(),n=s;break;case 1:l==="("?n=2:yD.test(l)?d():(h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:h(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),i}function ED(t,e,n){const s=pD(vD(t.path),n),i=Pe(s,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function TD(t,e){const n=[],s=new Map;e=hg({strict:!1,end:!0,sensitive:!1},e);function i(u){return s.get(u)}function r(u,h,d){const f=!d,_=wD(u);_.aliasOf=d&&d.record;const g=hg(e,u),y=[_];if("alias"in u){const w=typeof u.alias=="string"?[u.alias]:u.alias;for(const b of w)y.push(Pe({},_,{components:d?d.record.components:_.components,path:b,aliasOf:d?d.record:_}))}let E,C;for(const w of y){const{path:b}=w;if(h&&b[0]!=="/"){const M=h.record.path,P=M[M.length-1]==="/"?"":"/";w.path=h.record.path+(b&&P+b)}if(E=ED(w,h,g),d?d.alias.push(E):(C=C||E,C!==E&&C.alias.push(E),f&&u.name&&!ug(E)&&o(u.name)),_.children){const M=_.children;for(let P=0;P<M.length;P++)r(M[P],E,d&&d.children[P])}d=d||E,(E.record.components&&Object.keys(E.record.components).length||E.record.name||E.record.redirect)&&l(E)}return C?()=>{o(C)}:No}function o(u){if(OT(u)){const h=s.get(u);h&&(s.delete(u),n.splice(n.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=n.indexOf(u);h>-1&&(n.splice(h,1),u.record.name&&s.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let h=0;for(;h<n.length&&_D(u,n[h])>=0&&(u.record.path!==n[h].record.path||!DT(u,n[h]));)h++;n.splice(h,0,u),u.record.name&&!ug(u)&&s.set(u.record.name,u)}function c(u,h){let d,f={},_,g;if("name"in u&&u.name){if(d=s.get(u.name),!d)throw Pr(1,{location:u});g=d.record.name,f=Pe(cg(h.params,d.keys.filter(C=>!C.optional).map(C=>C.name)),u.params&&cg(u.params,d.keys.map(C=>C.name))),_=d.stringify(f)}else if("path"in u)_=u.path,d=n.find(C=>C.re.test(_)),d&&(f=d.parse(_),g=d.record.name);else{if(d=h.name?s.get(h.name):n.find(C=>C.re.test(h.path)),!d)throw Pr(1,{location:u,currentLocation:h});g=d.record.name,f=Pe({},h.params,u.params),_=d.stringify(f)}const y=[];let E=d;for(;E;)y.unshift(E.record),E=E.parent;return{name:g,path:_,params:f,matched:y,meta:AD(y)}}return t.forEach(u=>r(u)),{addRoute:r,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function cg(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function wD(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:bD(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function bD(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function ug(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function AD(t){return t.reduce((e,n)=>Pe(e,n.meta),{})}function hg(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function DT(t,e){return e.children.some(n=>n===t||DT(t,n))}const xT=/#/g,ID=/&/g,CD=/\//g,SD=/=/g,RD=/\?/g,LT=/\+/g,PD=/%5B/g,ND=/%5D/g,MT=/%5E/g,OD=/%60/g,VT=/%7B/g,kD=/%7C/g,FT=/%7D/g,DD=/%20/g;function ep(t){return encodeURI(""+t).replace(kD,"|").replace(PD,"[").replace(ND,"]")}function xD(t){return ep(t).replace(VT,"{").replace(FT,"}").replace(MT,"^")}function dd(t){return ep(t).replace(LT,"%2B").replace(DD,"+").replace(xT,"%23").replace(ID,"%26").replace(OD,"`").replace(VT,"{").replace(FT,"}").replace(MT,"^")}function LD(t){return dd(t).replace(SD,"%3D")}function MD(t){return ep(t).replace(xT,"%23").replace(RD,"%3F")}function VD(t){return t==null?"":MD(t).replace(CD,"%2F")}function Kl(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function FD(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(LT," "),o=r.indexOf("="),a=Kl(o<0?r:r.slice(0,o)),l=o<0?null:Kl(r.slice(o+1));if(a in e){let c=e[a];An(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function dg(t){let e="";for(let n in t){const s=t[n];if(n=LD(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(An(s)?s.map(r=>r&&dd(r)):[s&&dd(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function $D(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=An(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return e}const UD=Symbol(""),fg=Symbol(""),tp=Symbol(""),np=Symbol(""),fd=Symbol("");function lo(){let t=[];function e(s){return t.push(s),()=>{const i=t.indexOf(s);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ns(t,e,n,s,i){const r=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(Pr(4,{from:n,to:e})):h instanceof Error?a(h):hD(h)?a(Pr(2,{from:e,to:h})):(r&&s.enterCallbacks[i]===r&&typeof h=="function"&&r.push(h),o())},c=t.call(s&&s.instances[i],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function dh(t,e,n,s){const i=[];for(const r of t)for(const o in r.components){let a=r.components[o];if(!(e!=="beforeRouteEnter"&&!r.instances[o]))if(BD(a)){const c=(a.__vccOpts||a)[e];c&&i.push(Ns(c,n,s,r,o))}else{let l=a();i.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${r.path}"`));const u=zk(c)?c.default:c;r.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&Ns(d,n,s,r,o)()}))}}return i}function BD(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function pg(t){const e=ln(tp),n=ln(np),s=mn(()=>e.resolve(Ei(t.to))),i=mn(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],h=n.matched;if(!u||!h.length)return-1;const d=h.findIndex(Rr.bind(null,u));if(d>-1)return d;const f=mg(l[c-2]);return c>1&&mg(u)===f&&h[h.length-1].path!==f?h.findIndex(Rr.bind(null,l[c-2])):d}),r=mn(()=>i.value>-1&&WD(n.params,s.value.params)),o=mn(()=>i.value>-1&&i.value===n.matched.length-1&&PT(n.params,s.value.params));function a(l={}){return jD(l)?e[Ei(t.replace)?"replace":"push"](Ei(t.to)).catch(No):Promise.resolve()}return{route:s,href:mn(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const HD=Kf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:pg,setup(t,{slots:e}){const n=Wc(pg(t)),{options:s}=ln(tp),i=mn(()=>({[_g(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[_g(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:Jf("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),tu=HD;function jD(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function WD(t,e){for(const n in e){const s=e[n],i=t[n];if(typeof s=="string"){if(s!==i)return!1}else if(!An(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function mg(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const _g=(t,e,n)=>t??e??n,qD=Kf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=ln(fd),i=mn(()=>t.route||s.value),r=ln(fg,0),o=mn(()=>{let c=Ei(r);const{matched:u}=i.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=mn(()=>i.value.matched[o.value]);Al(fg,mn(()=>o.value+1)),Al(UD,a),Al(fd,i);const l=cr();return So(()=>[l.value,a.value,t.name],([c,u,h],[d,f,_])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!Rr(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=i.value,u=t.name,h=a.value,d=h&&h.components[u];if(!d)return gg(n.default,{Component:d,route:c});const f=h.props[u],_=f?f===!0?c.params:typeof f=="function"?f(c):f:null,y=Jf(d,Pe({},_,e,{onVnodeUnmounted:E=>{E.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return gg(n.default,{Component:y,route:c})||y}}});function gg(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const KD=qD;function zD(t){const e=TD(t.routes,t),n=t.parseQuery||FD,s=t.stringifyQuery||dg,i=t.history,r=lo(),o=lo(),a=lo(),l=GE(As);let c=As;Ji&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=uh.bind(null,I=>""+I),h=uh.bind(null,VD),d=uh.bind(null,Kl);function f(I,B){let F,z;return OT(I)?(F=e.getRecordMatcher(I),z=B):z=I,e.addRoute(z,F)}function _(I){const B=e.getRecordMatcher(I);B&&e.removeRoute(B)}function g(){return e.getRoutes().map(I=>I.record)}function y(I){return!!e.getRecordMatcher(I)}function E(I,B){if(B=Pe({},B||l.value),typeof I=="string"){const m=hh(n,I,B.path),v=e.resolve({path:m.path},B),S=i.createHref(m.fullPath);return Pe(m,v,{params:d(v.params),hash:Kl(m.hash),redirectedFrom:void 0,href:S})}let F;if("path"in I)F=Pe({},I,{path:hh(n,I.path,B.path).path});else{const m=Pe({},I.params);for(const v in m)m[v]==null&&delete m[v];F=Pe({},I,{params:h(m)}),B.params=h(B.params)}const z=e.resolve(F,B),ve=I.hash||"";z.params=u(d(z.params));const xe=Qk(s,Pe({},I,{hash:xD(ve),path:z.path})),p=i.createHref(xe);return Pe({fullPath:xe,hash:ve,query:s===dg?$D(I.query):I.query||{}},z,{redirectedFrom:void 0,href:p})}function C(I){return typeof I=="string"?hh(n,I,l.value.path):Pe({},I)}function w(I,B){if(c!==I)return Pr(8,{from:B,to:I})}function b(I){return q(I)}function M(I){return b(Pe(C(I),{replace:!0}))}function P(I){const B=I.matched[I.matched.length-1];if(B&&B.redirect){const{redirect:F}=B;let z=typeof F=="function"?F(I):F;return typeof z=="string"&&(z=z.includes("?")||z.includes("#")?z=C(z):{path:z},z.params={}),Pe({query:I.query,hash:I.hash,params:"path"in z?{}:I.params},z)}}function q(I,B){const F=c=E(I),z=l.value,ve=I.state,xe=I.force,p=I.replace===!0,m=P(F);if(m)return q(Pe(C(m),{state:typeof m=="object"?Pe({},ve,m.state):ve,force:xe,replace:p}),B||F);const v=F;v.redirectedFrom=B;let S;return!xe&&Xk(s,z,F)&&(S=Pr(16,{to:v,from:z}),Vt(z,z,!0,!1)),(S?Promise.resolve(S):Y(v,z)).catch(A=>es(A)?es(A,2)?A:Ht(A):ge(A,v,z)).then(A=>{if(A){if(es(A,2))return q(Pe({replace:p},C(A.to),{state:typeof A.to=="object"?Pe({},ve,A.to.state):ve,force:xe}),B||v)}else A=j(v,z,!0,p,ve);return fe(v,z,A),A})}function V(I,B){const F=w(I,B);return F?Promise.reject(F):Promise.resolve()}function Z(I){const B=jt.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(I):I()}function Y(I,B){let F;const[z,ve,xe]=GD(I,B);F=dh(z.reverse(),"beforeRouteLeave",I,B);for(const m of z)m.leaveGuards.forEach(v=>{F.push(Ns(v,I,B))});const p=V.bind(null,I,B);return F.push(p),Ke(F).then(()=>{F=[];for(const m of r.list())F.push(Ns(m,I,B));return F.push(p),Ke(F)}).then(()=>{F=dh(ve,"beforeRouteUpdate",I,B);for(const m of ve)m.updateGuards.forEach(v=>{F.push(Ns(v,I,B))});return F.push(p),Ke(F)}).then(()=>{F=[];for(const m of xe)if(m.beforeEnter)if(An(m.beforeEnter))for(const v of m.beforeEnter)F.push(Ns(v,I,B));else F.push(Ns(m.beforeEnter,I,B));return F.push(p),Ke(F)}).then(()=>(I.matched.forEach(m=>m.enterCallbacks={}),F=dh(xe,"beforeRouteEnter",I,B),F.push(p),Ke(F))).then(()=>{F=[];for(const m of o.list())F.push(Ns(m,I,B));return F.push(p),Ke(F)}).catch(m=>es(m,8)?m:Promise.reject(m))}function fe(I,B,F){a.list().forEach(z=>Z(()=>z(I,B,F)))}function j(I,B,F,z,ve){const xe=w(I,B);if(xe)return xe;const p=B===As,m=Ji?history.state:{};F&&(z||p?i.replace(I.fullPath,Pe({scroll:p&&m&&m.scroll},ve)):i.push(I.fullPath,ve)),l.value=I,Vt(I,B,F,p),Ht()}let ie;function We(){ie||(ie=i.listen((I,B,F)=>{if(!Wt.listening)return;const z=E(I),ve=P(z);if(ve){q(Pe(ve,{replace:!0}),z).catch(No);return}c=z;const xe=l.value;Ji&&rD(ig(xe.fullPath,F.delta),eu()),Y(z,xe).catch(p=>es(p,12)?p:es(p,2)?(q(p.to,z).then(m=>{es(m,20)&&!F.delta&&F.type===Yo.pop&&i.go(-1,!1)}).catch(No),Promise.reject()):(F.delta&&i.go(-F.delta,!1),ge(p,z,xe))).then(p=>{p=p||j(z,xe,!1),p&&(F.delta&&!es(p,8)?i.go(-F.delta,!1):F.type===Yo.pop&&es(p,20)&&i.go(-1,!1)),fe(z,xe,p)}).catch(No)}))}let ct=lo(),_e=lo(),ce;function ge(I,B,F){Ht(I);const z=_e.list();return z.length?z.forEach(ve=>ve(I,B,F)):console.error(I),Promise.reject(I)}function ut(){return ce&&l.value!==As?Promise.resolve():new Promise((I,B)=>{ct.add([I,B])})}function Ht(I){return ce||(ce=!I,We(),ct.list().forEach(([B,F])=>I?F(I):B()),ct.reset()),I}function Vt(I,B,F,z){const{scrollBehavior:ve}=t;if(!Ji||!ve)return Promise.resolve();const xe=!F&&oD(ig(I.fullPath,0))||(z||!F)&&history.state&&history.state.scroll||null;return JE().then(()=>ve(I,B,xe)).then(p=>p&&iD(p)).catch(p=>ge(p,I,B))}const Xe=I=>i.go(I);let fn;const jt=new Set,Wt={currentRoute:l,listening:!0,addRoute:f,removeRoute:_,hasRoute:y,getRoutes:g,resolve:E,options:t,push:b,replace:M,go:Xe,back:()=>Xe(-1),forward:()=>Xe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:_e.add,isReady:ut,install(I){const B=this;I.component("RouterLink",tu),I.component("RouterView",KD),I.config.globalProperties.$router=B,Object.defineProperty(I.config.globalProperties,"$route",{enumerable:!0,get:()=>Ei(l)}),Ji&&!fn&&l.value===As&&(fn=!0,b(i.location).catch(ve=>{}));const F={};for(const ve in As)Object.defineProperty(F,ve,{get:()=>l.value[ve],enumerable:!0});I.provide(tp,B),I.provide(np,HE(F)),I.provide(fd,l);const z=I.unmount;jt.add(I),I.unmount=function(){jt.delete(I),jt.size<1&&(c=As,ie&&ie(),ie=null,l.value=As,fn=!1,ce=!1),z()}}};function Ke(I){return I.reduce((B,F)=>B.then(()=>Z(F)),Promise.resolve())}return Wt}function GD(t,e){const n=[],s=[],i=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(c=>Rr(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Rr(c,l))||i.push(l))}return[n,s,i]}function $T(){return ln(np)}const YD={props:{text1:String,text2:String,img_url:String,price:String}},QD={class:"rounded-bottom-5 bg-fruuters"},XD={class:"d-flex flex-wrap justify-content-between pb-3 ms-10p"},JD={class:"my-auto h-fit col-6"},ZD={class:"text-white display-5 text-uppercase fw-bold fst-italic"},ex={class:"text-end text-white display-5 text-uppercase fw-bold fst-italic"},tx={key:0,class:"text-white text-uppercase"},nx={class:"col-5 z-top"},sx=["src"];function ix(t,e,n,s,i,r){return ue(),Se("header",QD,[T("div",XD,[T("div",JD,[T("h1",ZD,$e(n.text1),1),T("h1",ex,$e(n.text2),1),n.price?(ue(),Se("h1",tx,"$ "+$e(n.price)+".00/kg",1)):xs("",!0)]),T("div",nx,[T("img",{src:n.img_url,alt:"",class:"w-100 rounded rounded-5"},null,8,sx)])])])}const gs=Mt(YD,[["render",ix],["__scopeId","data-v-fca75644"]]),rx={props:{productData:{type:Object,required:!0}},data(){return{quantity:1,success:!1}},methods:{closeModal(){this.$emit("close")},addToCart(){this.success=!0}}},UT=t=>(jf("data-v-0d39def1"),t=t(),Wf(),t),ox={class:"modal"},ax={class:"modal-content"},lx={class:"form-group"},cx=UT(()=>T("label",{for:"quantity"},"Kuantitas:",-1)),ux={class:"form-group"},hx=UT(()=>T("label",{for:"exampleFormControlSelect1"},"Pilih petani dan harga:",-1)),dx={class:"form-control",id:"producer"},fx={class:"h5 mt-1"},px={key:0};function mx(t,e,n,s,i,r){return ue(),Se("div",ox,[T("div",ax,[T("span",{class:"close",onClick:e[0]||(e[0]=(...o)=>r.closeModal&&r.closeModal(...o))},"×"),T("div",lx,[cx,kn(T("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>i.quantity=o),class:"form-control",type:"number",id:"quantity"},null,512),[[ts,i.quantity]])]),T("div",ux,[hx,T("select",dx,[(ue(!0),Se(Et,null,Sr(n.productData.producers,o=>(ue(),Se("option",null,$e(o.id)+" - $"+$e(n.productData.price)+"/kg ",1))),256))])]),T("p",fx,"Total: $"+$e(n.productData.price*i.quantity),1),T("button",{onClick:e[2]||(e[2]=(...o)=>r.addToCart&&r.addToCart(...o)),type:"submit",class:"btn mt-2 btn-primary"},"Add to cart"),i.success?(ue(),Se("p",px,$e(n.productData.title)+" added to cart!",1)):xs("",!0)])])}const _x=Mt(rx,[["render",mx],["__scopeId","data-v-0d39def1"]]),gx={components:{RouterLink:tu,AddCartModal:_x},props:{productData:{type:Object,required:!0},index:Number,detail:Boolean},data(){return{showModalFlag:!1}},methods:{showModal(){this.showModalFlag=!0},hideModal(){this.showModalFlag=!1}}},yx={class:"left col-sm-4"},vx=["src"],Ex={class:"right col-sm-6 d-flex flex-column justify-content-evenly"},Tx={key:0,class:"text-uppercase display-5 fw-bold fst-italic"},wx={class:"fw-bold"},bx={class:"fw-bold"},Ax={class:"fw-bold"},Ix={key:0},Cx={class:"d-flex btn-container"};function Sx(t,e,n,s,i,r){const o=Ye("AddCartModal"),a=Ye("RouterLink");return ue(),Se("div",{class:Bc({"d-flex":!0,"flex-wrap":!0,"mb-5":!0,"justify-content-evenly":!0,"flex-row-reverse":n.index%2!==0})},[T("div",yx,[T("img",{src:n.productData.img_url,alt:"",class:"w-100 rounded rounded-5"},null,8,vx)]),T("div",Ex,[n.productData.discount?(ue(),Se("h1",Tx," today's limited offer ")):xs("",!0),T("h3",null,$e(n.productData.title),1),T("p",null,$e(n.productData.description),1),T("ul",null,[T("li",null,[ze(" Produced in: "),T("span",wx,$e(n.productData.produced_in),1)]),T("li",null,[ze(" Production capacity: "),T("span",bx,$e(n.productData.production_capacity),1),ze(" tons/month ")]),T("li",null,[ze(" Stock: "),T("span",Ax,$e(n.productData.product_stock),1),ze(" tons ")])]),T("h1",null,[n.productData.discount>0?(ue(),Se("del",Ix,"$ "+$e(n.productData.price.toFixed(2))+"/kg",1)):xs("",!0),ze(" $ "+$e((n.productData.price-n.productData.price*(n.productData.discount/100)).toFixed(2))+"/kg ",1)]),T("div",Cx,[T("button",{onClick:e[0]||(e[0]=(...l)=>r.showModal&&r.showModal(...l)),class:"btn btn-primary me-3"},"Add to Cart"),i.showModalFlag?(ue(),ls(o,{key:0,onClose:r.hideModal,productData:n.productData},null,8,["onClose","productData"])):xs("",!0),n.detail?(ue(),ls(a,{key:1,to:"/checkout",class:"btn btn-secondary"},{default:Nt(()=>[ze(" Buy Now ")]),_:1})):(ue(),ls(a,{key:2,to:{name:"product",params:{productId:n.productData.id}},class:"btn btn-primary"},{default:Nt(()=>[ze(" Learn more ")]),_:1},8,["to"]))])])],2)}const BT=Mt(gx,[["render",Sx],["__scopeId","data-v-9fa42014"]]);var yg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw Kr(e)},Kr=function(t){return new Error("Firebase Database ("+HT.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Rx=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},nu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=r>>2,h=(r&3)<<4|a>>4;let d=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(d=64)),s.push(n[u],n[h],n[d],n[f])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rx(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||c==null||h==null)throw new Px;const d=r<<2|a>>4;if(s.push(d),c!==64){const f=a<<4&240|c>>2;if(s.push(f),h!==64){const _=c<<6&192|h;s.push(_)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Px extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WT=function(t){const e=jT(t);return nu.encodeByteArray(e,!0)},zl=function(t){return WT(t).replace(/\./g,"")},Gl=function(t){try{return nu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){return qT(void 0,t)}function qT(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Ox(n)||(t[n]=qT(t[n],e[n]));return t}function Ox(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=()=>kx().__FIREBASE_DEFAULTS__,xx=()=>{if(typeof process>"u"||typeof yg>"u")return;const t=yg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Lx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gl(t[1]);return e&&JSON.parse(e)},sp=()=>{try{return Dx()||xx()||Lx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Mx=t=>{var e,n;return(n=(e=sp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Vx=t=>{const e=Mx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},KT=()=>{var t;return(t=sp())===null||t===void 0?void 0:t.config},Fx=t=>{var e;return(e=sp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},t);return[zl(JSON.stringify(n)),zl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ip(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gn())}function Ux(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GT(){return HT.NODE_ADMIN===!0}function YT(){try{return typeof indexedDB=="object"}catch{return!1}}function Bx(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="FirebaseError";class ys extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Hx,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zr.prototype.create)}}class zr{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?jx(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ys(i,a,s)}}function jx(t,e){return t.replace(Wx,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const Wx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t){return JSON.parse(t)}function pt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=function(t){let e={},n={},s={},i="";try{const r=t.split(".");e=Xo(Gl(r[0])||""),n=Xo(Gl(r[1])||""),i=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},qx=function(t){const e=QT(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Kx=function(t){const e=QT(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Nr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function pd(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Eg(r)&&Eg(o)){if(!pd(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Eg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let h=0;h<16;h++)s[h]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let h=0;h<16;h++)s[h]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let h=16;h<80;h++){const d=s[h-3]^s[h-8]^s[h-14]^s[h-16];s[h]=(d<<1|d>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let h=0;h<80;h++){h<40?h<20?(c=a^r&(o^a),u=1518500249):(c=r^o^a,u=1859775393):h<60?(c=r&o|a&(r|o),u=2400959708):(c=r^o^a,u=3395469782);const d=(i<<5|i>>>27)+c+l+u+s[h]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=d}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<n;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function Gx(t,e){const n=new Yx(t,e);return n.subscribe.bind(n)}class Yx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let i;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");Qx(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:s},i.next===void 0&&(i.next=fh),i.error===void 0&&(i.error=fh),i.complete===void 0&&(i.complete=fh);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fh(){}function Xx(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,$(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},su=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){return t&&t._delegate?t._delegate:t}class Cn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Qo;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(t1(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:e1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function e1(t){return t===ii?void 0:t}function t1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const s1={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},i1=pe.INFO,r1={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},o1=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=r1[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ba{constructor(e){this.name=e,this._logLevel=i1,this._logHandler=o1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?s1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const a1=(t,e)=>e.some(n=>t instanceof n);let Tg,wg;function l1(){return Tg||(Tg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return wg||(wg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XT=new WeakMap,md=new WeakMap,JT=new WeakMap,ph=new WeakMap,op=new WeakMap;function u1(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Ls(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&XT.set(n,t)}).catch(()=>{}),op.set(e,t),e}function h1(t){if(md.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});md.set(t,e)}let _d={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return md.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ls(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function d1(t){_d=t(_d)}function f1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(mh(this),e,...n);return JT.set(s,e.sort?e.sort():[e]),Ls(s)}:c1().includes(t)?function(...e){return t.apply(mh(this),e),Ls(XT.get(this))}:function(...e){return Ls(t.apply(mh(this),e))}}function p1(t){return typeof t=="function"?f1(t):(t instanceof IDBTransaction&&h1(t),a1(t,l1())?new Proxy(t,_d):t)}function Ls(t){if(t instanceof IDBRequest)return u1(t);if(ph.has(t))return ph.get(t);const e=p1(t);return e!==t&&(ph.set(t,e),op.set(e,t)),e}const mh=t=>op.get(t);function m1(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Ls(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Ls(o.result),l.oldVersion,l.newVersion,Ls(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const _1=["get","getKey","getAll","getAllKeys","count"],g1=["put","add","delete","clear"],_h=new Map;function bg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_h.get(e))return _h.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=g1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||_1.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return _h.set(e,r),r}d1(t=>({...t,get:(e,n,s)=>bg(e,n)||t.get(e,n,s),has:(e,n)=>!!bg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(v1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function v1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gd="@firebase/app",Ag="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new ba("@firebase/app"),E1="@firebase/app-compat",T1="@firebase/analytics-compat",w1="@firebase/analytics",b1="@firebase/app-check-compat",A1="@firebase/app-check",I1="@firebase/auth",C1="@firebase/auth-compat",S1="@firebase/database",R1="@firebase/database-compat",P1="@firebase/functions",N1="@firebase/functions-compat",O1="@firebase/installations",k1="@firebase/installations-compat",D1="@firebase/messaging",x1="@firebase/messaging-compat",L1="@firebase/performance",M1="@firebase/performance-compat",V1="@firebase/remote-config",F1="@firebase/remote-config-compat",$1="@firebase/storage",U1="@firebase/storage-compat",B1="@firebase/firestore",H1="@firebase/firestore-compat",j1="firebase",W1="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",q1={[gd]:"fire-core",[E1]:"fire-core-compat",[w1]:"fire-analytics",[T1]:"fire-analytics-compat",[A1]:"fire-app-check",[b1]:"fire-app-check-compat",[I1]:"fire-auth",[C1]:"fire-auth-compat",[S1]:"fire-rtdb",[R1]:"fire-rtdb-compat",[P1]:"fire-fn",[N1]:"fire-fn-compat",[O1]:"fire-iid",[k1]:"fire-iid-compat",[D1]:"fire-fcm",[x1]:"fire-fcm-compat",[L1]:"fire-perf",[M1]:"fire-perf-compat",[V1]:"fire-rc",[F1]:"fire-rc-compat",[$1]:"fire-gcs",[U1]:"fire-gcs-compat",[B1]:"fire-fst",[H1]:"fire-fst-compat","fire-js":"fire-js",[j1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,vd=new Map;function K1(t,e){try{t.container.addComponent(e)}catch(n){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yn(t){const e=t.name;if(vd.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;vd.set(e,t);for(const n of Ql.values())K1(n,t);return!0}function z1(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ms=new zr("app","Firebase",G1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=W1;function ZT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:yd,automaticDataCollectionEnabled:!1},e),i=s.name;if(typeof i!="string"||!i)throw Ms.create("bad-app-name",{appName:String(i)});if(n||(n=KT()),!n)throw Ms.create("no-options");const r=Ql.get(i);if(r){if(pd(n,r.options)&&pd(s,r.config))return r;throw Ms.create("duplicate-app",{appName:i})}const o=new n1(i);for(const l of vd.values())o.addComponent(l);const a=new Y1(n,s,o);return Ql.set(i,a),a}function ew(t=yd){const e=Ql.get(t);if(!e&&t===yd&&KT())return ZT();if(!e)throw Ms.create("no-app",{appName:t});return e}function Gt(t,e,n){var s;let i=(s=q1[t])!==null&&s!==void 0?s:t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(a.join(" "));return}Yn(new Cn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebase-heartbeat-database",X1=1,Jo="firebase-heartbeat-store";let gh=null;function tw(){return gh||(gh=m1(Q1,X1,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Jo)}}}).catch(t=>{throw Ms.create("idb-open",{originalErrorMessage:t.message})})),gh}async function J1(t){try{return await(await tw()).transaction(Jo).objectStore(Jo).get(nw(t))}catch(e){if(e instanceof ys)Ii.warn(e.message);else{const n=Ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ii.warn(n.message)}}}async function Ig(t,e){try{const s=(await tw()).transaction(Jo,"readwrite");await s.objectStore(Jo).put(e,nw(t)),await s.done}catch(n){if(n instanceof ys)Ii.warn(n.message);else{const s=Ms.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ii.warn(s.message)}}}function nw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=1024,eL=30*24*60*60*1e3;class tL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sL(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Cg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=eL}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Cg(),{heartbeatsToSend:s,unsentEntries:i}=nL(this._heartbeatsCache.heartbeats),r=zl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Cg(){return new Date().toISOString().substring(0,10)}function nL(t,e=Z1){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Sg(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sg(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class sL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YT()?Bx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await J1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ig(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sg(t){return zl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){Yn(new Cn("platform-logger",e=>new y1(e),"PRIVATE")),Yn(new Cn("heartbeat",e=>new tL(e),"PRIVATE")),Gt(gd,Ag,t),Gt(gd,Ag,"esm2017"),Gt("fire-js","")}iL("");function sw(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function iw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rL=iw,rw=new zr("auth","Firebase",iw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new ba("@firebase/auth");function oL(t,...e){Xl.logLevel<=pe.WARN&&Xl.warn(`Auth (${Gr}): ${t}`,...e)}function Sl(t,...e){Xl.logLevel<=pe.ERROR&&Xl.error(`Auth (${Gr}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t,...e){throw ap(t,...e)}function ow(t,...e){return ap(t,...e)}function aL(t,e,n){const s=Object.assign(Object.assign({},rL()),{[e]:n});return new zr("auth","Firebase",s).create(e,{appName:t.name})}function ap(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return rw.create(t,...e)}function Ne(t,e,...n){if(!t)throw ap(e,...n)}function ko(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sl(e),new Error(e)}function Jl(t,e){t||ko(e)}function lL(){return Pg()==="http:"||Pg()==="https:"}function Pg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lL()||Ux()||"connection"in navigator)?navigator.onLine:!0}function uL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jl(n>e,"Short delay should be less than long delay!"),this.isMobile=ip()||zT()}get(){return cL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t,e){Jl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ko("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ko("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ko("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=new Aa(3e4,6e4);function lw(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function iu(t,e,n,s,i={}){return cw(t,i,async()=>{let r={},o={};s&&(e==="GET"?o=s:r={body:JSON.stringify(s)});const a=rp(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),aw.fetch()(uw(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},r))})}async function cw(t,e,n){t._canInitEmulator=!1;const s=Object.assign(Object.assign({},dL),e);try{const i=new pL(t),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw rl(t,"user-disabled",o);const u=s[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw aL(t,u,c);Rg(t,u)}}catch(i){if(i instanceof ys)throw i;Rg(t,"network-request-failed",{message:String(i)})}}function uw(t,e,n,s){const i=`${e}${n}?${s}`;return t.config.emulator?hL(t.config,i):`${t.config.apiScheme}://${i}`}class pL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ow(this.auth,"network-request-failed")),fL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rl(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=ow(t,e,s);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e){return iu(t,"POST","/v1/accounts:delete",e)}async function _L(t,e){return iu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gL(t,e=!1){const n=In(t),s=await n.getIdToken(e),i=hw(s);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Do(yh(i.auth_time)),issuedAtTime:Do(yh(i.iat)),expirationTime:Do(yh(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function yh(t){return Number(t)*1e3}function hw(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Sl("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gl(n);return i?JSON.parse(i):(Sl("Failed to decode base64 JWT payload"),null)}catch(i){return Sl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yL(t){const e=hw(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ed(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof ys&&vL(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function vL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Do(this.lastLoginAt),this.creationTime=Do(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){var e;const n=t.auth,s=await t.getIdToken(),i=await Ed(t,_L(n,{idToken:s}));Ne(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=!((e=r.providerUserInfo)===null||e===void 0)&&e.length?bL(r.providerUserInfo):[],a=wL(t.providerData,o),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new dw(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function TL(t){const e=In(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wL(t,e){return[...t.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function bL(t){return t.map(e=>{var{providerId:n}=e,s=sw(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AL(t,e){const n=await cw(t,{},async()=>{const s=rp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:r}=t.config,o=uw(t,i,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",aw.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IL(t,e){return iu(t,"POST","/v2/accounts:revokeToken",lw(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yL(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Ne(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await AL(e,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new Zo;return s&&(Ne(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),i&&(Ne(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),r&&(Ne(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return ko("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:n,auth:s,stsTokenManager:i}=e,r=sw(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new dw(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Ed(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return gL(this,e)}reload(){return TL(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ed(this,mL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,i,r,o,a,l,c,u;const h=(s=n.displayName)!==null&&s!==void 0?s:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,f=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,C=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:w,emailVerified:b,isAnonymous:M,providerData:P,stsTokenManager:q}=n;Ne(w&&q,e,"internal-error");const V=Zo.fromJSON(this.name,q);Ne(typeof w=="string",e,"internal-error"),Is(h,e.name),Is(d,e.name),Ne(typeof b=="boolean",e,"internal-error"),Ne(typeof M=="boolean",e,"internal-error"),Is(f,e.name),Is(_,e.name),Is(g,e.name),Is(y,e.name),Is(E,e.name),Is(C,e.name);const Z=new dr({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:M,photoURL:_,phoneNumber:f,tenantId:g,stsTokenManager:V,createdAt:E,lastLoginAt:C});return P&&Array.isArray(P)&&(Z.providerData=P.map(Y=>Object.assign({},Y))),y&&(Z._redirectEventId=y),Z}static async _fromIdTokenResponse(e,n,s=!1){const i=new Zo;i.updateFromServerResponse(n);const r=new dr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await Zl(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=new Map;function di(t){Jl(t instanceof Function,"Expected a class definition");let e=Ng.get(t);return e?(Jl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ng.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fw.type="NONE";const Og=fw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t,e,n){return`firebase:${t}:${e}:${n}`}class fr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=vh(this.userKey,i.apiKey,r),this.fullPersistenceKey=vh("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?dr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new fr(di(Og),e,s);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=i[0]||di(Og);const o=vh(s,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=dr._fromJSON(e,u);c!==r&&(a=h),r=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new fr(r,e,s):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new fr(r,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OL(e))return"Blackberry";if(kL(e))return"Webos";if(SL(e))return"Safari";if((e.includes("chrome/")||RL(e))&&!e.includes("edge/"))return"Chrome";if(NL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function CL(t=Gn()){return/firefox\//i.test(t)}function SL(t=Gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function RL(t=Gn()){return/crios\//i.test(t)}function PL(t=Gn()){return/iemobile/i.test(t)}function NL(t=Gn()){return/android/i.test(t)}function OL(t=Gn()){return/blackberry/i.test(t)}function kL(t=Gn()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e=[]){let n;switch(t){case"Browser":n=kg(Gn());break;case"Worker":n=`${kg(Gn())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gr}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e={}){return iu(t,"GET","/v2/passwordPolicy",lw(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=6;class ML{constructor(e){var n,s,i,r;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:LL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=e.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,i,r,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsUppercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(e,n,s,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dg(this),this.idTokenSubscription=new Dg(this),this.beforeStateQueue=new DL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=di(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await fr.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?In(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xL(this),n=new ML(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zr("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await IL(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&di(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await fr.create(this,[di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,s,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oL(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function FL(t){return In(t)}class Dg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Gx(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function $L(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(di);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}new Aa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Aa(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Aa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Aa(5e3,15e3);var xg="@firebase/auth",Lg="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function HL(t){Yn(new Cn("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Ne(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(t)},c=new VL(s,i,r,l);return $L(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Yn(new Cn("auth-internal",e=>{const n=FL(e.getProvider("auth").getImmediate());return(s=>new UL(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(xg,Lg,BL(t)),Gt(xg,Lg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=5*60;Fx("authIdTokenMaxAge");HL("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new Map,qL={activated:!1,tokenObservers:[]};function Sn(t){return WL.get(t)||Object.assign({},qL)}const Mg={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,n,s,i,r){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=s,this.lowerBound=i,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=i,i>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Qo,this.pending.promise.catch(n=>{}),await zL(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Qo,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function zL(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ec=new zr("appCheck","AppCheck",GL);function mw(t){if(!Sn(t).activated)throw ec.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL="firebase-app-check-database",QL=1,Td="firebase-app-check-store";let ol=null;function XL(){return ol||(ol=new Promise((t,e)=>{try{const n=indexedDB.open(YL,QL);n.onsuccess=s=>{t(s.target.result)},n.onerror=s=>{var i;e(ec.create("storage-open",{originalErrorMessage:(i=s.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=s=>{const i=s.target.result;switch(s.oldVersion){case 0:i.createObjectStore(Td,{keyPath:"compositeKey"})}}}catch(n){e(ec.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),ol)}function JL(t,e){return ZL(eM(t),e)}async function ZL(t,e){const s=(await XL()).transaction(Td,"readwrite"),r=s.objectStore(Td).put({compositeKey:t,value:e});return new Promise((o,a)=>{r.onsuccess=l=>{o()},s.onerror=l=>{var c;a(ec.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})}function eM(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd=new ba("@firebase/app-check");function Vg(t,e){return YT()?JL(t,e).catch(n=>{wd.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={error:"UNKNOWN_ERROR"};function nM(t){return nu.encodeString(JSON.stringify(t),!1)}async function bd(t,e=!1){const n=t.app;mw(n);const s=Sn(n);let i=s.token,r;if(i&&!yo(i)&&(s.token=void 0,i=void 0),!i){const l=await s.cachedTokenPromise;l&&(yo(l)?i=l:await Vg(n,void 0))}if(!e&&i&&yo(i))return{token:i.token};let o=!1;try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().finally(()=>{s.exchangeTokenPromise=void 0}),o=!0),i=await Sn(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?wd.warn(l.message):wd.error(l),r=l}let a;return i?r?yo(i)?a={token:i.token,internalError:r}:a=$g(r):(a={token:i.token},s.token=i,await Vg(n,i)):a=$g(r),o&&oM(n,a),a}async function sM(t){const e=t.app;mw(e);const{provider:n}=Sn(e);{const{token:s}=await n.getToken();return{token:s}}}function iM(t,e,n,s){const{app:i}=t,r=Sn(i),o={next:n,error:s,type:e};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&yo(r.token)){const a=r.token;Promise.resolve().then(()=>{n({token:a.token}),Fg(t)}).catch(()=>{})}r.cachedTokenPromise.then(()=>Fg(t))}function _w(t,e){const n=Sn(t),s=n.tokenObservers.filter(i=>i.next!==e);s.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=s}function Fg(t){const{app:e}=t,n=Sn(e);let s=n.tokenRefresher;s||(s=rM(t),n.tokenRefresher=s),!s.isRunning()&&n.isTokenAutoRefreshEnabled&&s.start()}function rM(t){const{app:e}=t;return new KL(async()=>{const n=Sn(e);let s;if(n.token?s=await bd(t,!0):s=await bd(t),s.error)throw s.error;if(s.internalError)throw s.internalError},()=>!0,()=>{const n=Sn(e);if(n.token){let s=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return s=Math.min(s,i),Math.max(0,s-Date.now())}else return 0},Mg.RETRIAL_MIN_WAIT,Mg.RETRIAL_MAX_WAIT)}function oM(t,e){const n=Sn(t).tokenObservers;for(const s of n)try{s.type==="EXTERNAL"&&e.error!=null?s.error(e.error):s.next(e)}catch{}}function yo(t){return t.expireTimeMillis-Date.now()>0}function $g(t){return{token:nM(tM),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Sn(this.app);for(const n of e)_w(this.app,n.next);return Promise.resolve()}}function lM(t,e){return new aM(t,e)}function cM(t){return{getToken:e=>bd(t,e),getLimitedUseToken:()=>sM(t),addTokenListener:e=>iM(t,"INTERNAL",e),removeTokenListener:e=>_w(t.app,e)}}const uM="@firebase/app-check",hM="0.8.1",dM="app-check",Ug="app-check-internal";function fM(){Yn(new Cn(dM,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return lM(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Ug).initialize()})),Yn(new Cn(Ug,t=>{const e=t.getProvider("app-check").getImmediate();return cM(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Gt(uM,hM)}fM();var pM="firebase",mM="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt(pM,mM,"app");const _M=Symbol("firebaseApp");function gw(t){return Xf()&&ln(_M,null)||ew(t)}const Mn=()=>{};function lp(t,e){return e.split(".").reduce((n,s)=>n&&n[s],t)}function gM(t,e,n){const s=(""+e).split("."),i=s.pop(),r=s.reduce((o,a)=>o&&o[a],t);if(r!=null)return Array.isArray(r)?r.splice(Number(i),1,n):r[i]=n}function Fi(t){return!!t&&typeof t=="object"}const yM=Object.prototype;function vM(t){return Fi(t)&&Object.getPrototypeOf(t)===yM}function cp(t){return Fi(t)&&t.type==="document"}function EM(t){return Fi(t)&&t.type==="collection"}function TM(t){return cp(t)||EM(t)}function wM(t){return Fi(t)&&t.type==="query"}function bM(t){return Fi(t)&&"ref"in t}function AM(t){return Fi(t)&&typeof t.bucket=="string"}function IM(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const CM=Symbol.for("v-scx");function SM(){return!!ln(CM,0)}var Bg={};const Hg="@firebase/database",jg="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yw="";function RM(t){yw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Xo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return vs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PM(e)}}catch{}return new NM},fi=vw("localStorage"),Ad=vw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new ba("@firebase/database"),OM=function(){let t=1;return function(){return t++}}(),Ew=function(t){const e=Jx(t),n=new zx;n.update(e);const s=n.digest();return nu.encodeByteArray(s)},Ia=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ia.apply(null,s):typeof s=="object"?e+=pt(s):e+=s,e+=" "}return e};let Ti=null,Wg=!0;const kM=function(t,e){$(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(pr.logLevel=pe.VERBOSE,Ti=pr.log.bind(pr),e&&Ad.set("logging_enabled",!0)):typeof t=="function"?Ti=t:(Ti=null,Ad.remove("logging_enabled"))},Tt=function(...t){if(Wg===!0&&(Wg=!1,Ti===null&&Ad.get("logging_enabled")===!0&&kM(!0)),Ti){const e=Ia.apply(null,t);Ti(e)}},Ca=function(t){return function(...e){Tt(t,...e)}},Id=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ia(...t);pr.error(e)},Ci=function(...t){const e=`FIREBASE FATAL ERROR: ${Ia(...t)}`;throw pr.error(e),new Error(e)},Yt=function(...t){const e="FIREBASE WARNING: "+Ia(...t);pr.warn(e)},DM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Yt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tw=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},xM=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Or="[MIN_NAME]",Si="[MAX_NAME]",Yr=function(t,e){if(t===e)return 0;if(t===Or||e===Si)return-1;if(e===Or||t===Si)return 1;{const n=qg(t),s=qg(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},LM=function(t,e){return t===e?0:t<e?-1:1},co=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pt(e))},up=function(t){if(typeof t!="object"||t===null)return pt(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=pt(e[s]),n+=":",n+=up(t[e[s]]);return n+="}",n},ww=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function hn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const bw=function(t){$(!Tw(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,r,o,a,l;t===0?(r=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const u=c.join("");let h="";for(l=0;l<64;l+=8){let d=parseInt(u.substr(l,8),2).toString(16);d.length===1&&(d="0"+d),h=h+d}return h.toLowerCase()},MM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},FM=new RegExp("^-?(0*)\\d{1,10}$"),$M=-2147483648,UM=2147483647,qg=function(t){if(FM.test(t)){const e=Number(t);if(e>=$M&&e<=UM)return e}return null},Sa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Yt("Exception was thrown by user callback.",n),e},Math.floor(0))}},BM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){Yt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yt(e)}}class Cd{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Cd.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="5",Aw="v",Iw="s",Cw="r",Sw="f",Rw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Pw="ls",Nw="p",Sd="ac",Ow="websocket",kw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n,s,i,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function qM(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Dw(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let s;if(e===Ow)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===kw)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qM(t)&&(n.ns=t.namespace);const i=[];return hn(n,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(){this.counters_={}}incrementCounter(e,n=1){vs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Nx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh={},Th={};function dp(t){const e=t.toString();return Eh[e]||(Eh[e]=new KM),Eh[e]}function zM(t,e){const n=t.toString();return Th[n]||(Th[n]=e()),Th[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&Sa(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg="start",YM="close",QM="pLPCommand",XM="pRTLPCB",xw="id",Lw="pw",Mw="ser",JM="cb",ZM="seg",eV="ts",tV="d",nV="dframe",Vw=1870,Fw=30,sV=Vw-Fw,iV=25e3,rV=3e4;class sr{constructor(e,n,s,i,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ca(e),this.stats_=dp(n),this.urlFn=l=>(this.appCheckToken&&(l[Sd]=this.appCheckToken),Dw(n,kw,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new GM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(rV)),xM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new fp((...r)=>{const[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Kg)this.id=a,this.password=l;else if(o===YM)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[Kg]="t",s[Mw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[JM]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Aw]=hp,this.transportSessionId&&(s[Iw]=this.transportSessionId),this.lastSessionId&&(s[Pw]=this.lastSessionId),this.applicationId&&(s[Nw]=this.applicationId),this.appCheckToken&&(s[Sd]=this.appCheckToken),typeof location<"u"&&location.hostname&&Rw.test(location.hostname)&&(s[Cw]=Sw);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){sr.forceAllow_=!0}static forceDisallow(){sr.forceDisallow_=!0}static isAvailable(){return sr.forceAllow_?!0:!sr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MM()&&!VM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=WT(n),i=ww(s,sV);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[nV]="t",s[xw]=e,s[Lw]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class fp{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=OM(),window[QM+this.uniqueCallbackIdentifier]=e,window[XM+this.uniqueCallbackIdentifier]=n,this.myIFrame=fp.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Tt("frame writing exception"),a.stack&&Tt(a.stack),Tt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tt("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[xw]=this.myID,e[Lw]=this.myPW,e[Mw]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fw+s.length<=Vw;){const o=this.pendingSegs.shift();s=s+"&"+ZM+i+"="+o.seg+"&"+eV+i+"="+o.ts+"&"+tV+i+"="+o.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(iV)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Tt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=16384,aV=45e3;let tc=null;typeof MozWebSocket<"u"?tc=MozWebSocket:typeof WebSocket<"u"&&(tc=WebSocket);class _n{constructor(e,n,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ca(this.connId),this.stats_=dp(n),this.connURL=_n.connectionURL_(n,o,a,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,r){const o={};return o[Aw]=hp,typeof location<"u"&&location.hostname&&Rw.test(location.hostname)&&(o[Cw]=Sw),n&&(o[Iw]=n),s&&(o[Pw]=s),i&&(o[Sd]=i),r&&(o[Nw]=r),Dw(e,Ow,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fi.set("previous_websocket_failure",!0);try{let s;GT(),this.mySock=new tc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){_n.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&tc!==null&&!_n.forceDisallow_}static previouslyFailed(){return fi.isInMemoryStorage||fi.get("previous_websocket_failure")===!0}markConnectionHealthy(){fi.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=Xo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ww(n,oV);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(aV))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}_n.responsesRequiredToBeHealthy=2;_n.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[sr,_n]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=_n&&_n.isAvailable();let s=n&&!_n.previouslyFailed();if(e.webSocketOnly&&(n||Yt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[_n];else{const i=this.transports_=[];for(const r of ea.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);ea.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ea.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=6e4,cV=5e3,uV=10*1024,hV=100*1024,wh="t",zg="d",dV="s",Gg="r",fV="e",Yg="o",Qg="a",Xg="n",Jg="p",pV="h";class mV{constructor(e,n,s,i,r,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ca("c:"+this.id+":"),this.transportManager_=new ea(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(wh in e){const n=e[wh];n===Qg?this.upgradeIfSecondaryHealthy_():n===Gg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Yg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=co("t",e),s=co("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Jg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Qg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xg,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=co("t",e),s=co("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=co(wh,e);if(zg in e){const s=e[zg];if(n===pV){const i=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Xg){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dV?this.onConnectionShutdown_(s):n===Gg?this.onReset_(s):n===fV?Id("Server Error: "+s):n===Yg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Id("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hp!==s&&Yt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),xo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(lV))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(cV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Jg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===n&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Uw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ip()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new nc}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=32,ey=768;class Be{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Be("")}function Te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function qs(t){return t.pieces_.length-t.pieceNum_}function Fe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Be(t.pieces_,e)}function Bw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _V(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Hw(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function jw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Be(e,0)}function ot(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof Be)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new Be(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function rn(t,e){const n=Te(t),s=Te(e);if(n===null)return e;if(n===s)return rn(Fe(t),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ww(t,e){if(qs(t)!==qs(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function yn(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(qs(t)>qs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class gV{constructor(e,n){this.errorPrefix_=n,this.parts_=Hw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=su(this.parts_[s]);qw(this)}}function yV(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=su(e),qw(t)}function vV(t){const e=t.parts_.pop();t.byteLength_-=su(e),t.parts_.length>0&&(t.byteLength_-=1)}function qw(t){if(t.byteLength_>ey)throw new Error(t.errorPrefix_+"has a key path longer than "+ey+" bytes ("+t.byteLength_+").");if(t.parts_.length>Zg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Zg+") or object contains a cycle "+ri(t))}function ri(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp extends Uw{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}static getInstance(){return new pp}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=1e3,EV=60*5*1e3,ty=30*1e3,TV=1.3,wV=3e4,bV="server_kill",ny=3;class cs extends $w{constructor(e,n,s,i,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=cs.nextPersistentConnectionId_++,this.log_=Ca("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uo,this.maxReconnectDelay_=EV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!GT())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,r={r:i,a:e,b:n};this.log_(pt(r)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new Qo,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;cs.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&vs(e,"w")){const s=Nr(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();Yt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Kx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ty)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=qx(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,r){this.initConnection_();const o={p:n,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Id("Unrecognized action received from server: "+pt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=uo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wV&&(this.reconnectDelay_=uo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*TV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+cs.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},c=function(h){$(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(h)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,d]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Tt("getToken() completed but was canceled"):(Tt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=d&&d.token,a=new mV(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,f=>{Yt(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(bV)},r))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Yt(h),l())}}}interrupt(e){Tt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vg(this.interruptReasons_)&&(this.reconnectDelay_=uo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>up(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new Be(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){Tt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ny&&(this.reconnectDelay_=ty,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Tt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ny&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yw.replace(/\./g,"-")]=1,ip()?e["framework.cordova"]=1:zT()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nc.getInstance().currentlyOnline();return vg(this.interruptReasons_)&&e}}cs.nextPersistentConnectionId_=0;cs.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new we(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new we(Or,e),i=new we(Or,n);return this.compare(s,i)!==0}minPost(){return we.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al;class Kw extends ru{static get __EMPTY_NODE(){return al}static set __EMPTY_NODE(e){al=e}compare(e,n){return Yr(e.name,n.name)}isDefinedOn(e){throw Kr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(Si,al)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,al)}toString(){return".key"}}const mr=new Kw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=class{constructor(e,n,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},zt=class vo{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??vo.RED,this.left=i??Vn.EMPTY_NODE,this.right=r??Vn.EMPTY_NODE}copy(e,n,s,i,r){return new vo(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Vn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};zt.RED=!0;zt.BLACK=!1;class AV{copy(e,n,s,i,r){return this}insert(e,n,s){return new zt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Vn=class Rl{constructor(e,n=Rl.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Rl(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,zt.BLACK,null,null))}remove(e){return new Rl(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ll(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ll(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ll(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ll(this.root_,null,this.comparator_,!0,e)}};Vn.EMPTY_NODE=new AV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t,e){return Yr(t.name,e.name)}function mp(t,e){return Yr(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rd;function CV(t){Rd=t}const zw=function(t){return typeof t=="number"?"number:"+bw(t):"string:"+t},Gw=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&vs(e,".sv"),"Priority must be a string or number.")}else $(t===Rd||t.isEmpty(),"priority of unexpected type.");$(t===Rd||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy;class it{constructor(e,n=it.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gw(this.priorityNode_)}static set __childrenNodeConstructor(e){sy=e}static get __childrenNodeConstructor(){return sy}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new it(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:it.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ye(e)?this:Te(e)===".priority"?this.priorityNode_:it.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:it.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Te(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:($(s!==".priority"||qs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,it.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+zw(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=bw(this.value_):e+=this.value_,this.lazyHash_=Ew(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===it.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof it.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=it.VALUE_TYPE_ORDER.indexOf(n),r=it.VALUE_TYPE_ORDER.indexOf(s);return $(i>=0,"Unknown leaf type: "+n),$(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}it.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yw,Qw;function SV(t){Yw=t}function RV(t){Qw=t}class PV extends ru{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),r=s.compareTo(i);return r===0?Yr(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(Si,new it("[PRIORITY-POST]",Qw))}makePost(e,n){const s=Yw(e);return new we(n,new it("[PRIORITY-POST]",s))}toString(){return".priority"}}const It=new PV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=Math.log(2);class OV{constructor(e){const n=r=>parseInt(Math.log(r)/NV,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const sc=function(t,e,n,s){t.sort(e);const i=function(l,c){const u=c-l;let h,d;if(u===0)return null;if(u===1)return h=t[l],d=n?n(h):h,new zt(d,h.node,zt.BLACK,null,null);{const f=parseInt(u/2,10)+l,_=i(l,f),g=i(f+1,c);return h=t[f],d=n?n(h):h,new zt(d,h.node,zt.BLACK,_,g)}},r=function(l){let c=null,u=null,h=t.length;const d=function(_,g){const y=h-_,E=h;h-=_;const C=i(y+1,E),w=t[y],b=n?n(w):w;f(new zt(b,w.node,g,null,C))},f=function(_){c?(c.left=_,c=_):(u=_,c=_)};for(let _=0;_<l.count;++_){const g=l.nextBitIsOne(),y=Math.pow(2,l.count-(_+1));g?d(y,zt.BLACK):(d(y,zt.BLACK),d(y,zt.RED))}return u},o=new OV(t.length),a=r(o);return new Vn(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh;const zi={};class ss{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(zi&&It,"ChildrenNode.ts has not been loaded"),bh=bh||new ss({".priority":zi},{".priority":It}),bh}get(e){const n=Nr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Vn?n:null}hasIndex(e){return vs(this.indexSet_,e.toString())}addIndex(e,n){$(e!==mr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=n.getIterator(we.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=sc(s,e.getCompare()):a=zi;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new ss(u,c)}addToIndexes(e,n){const s=Yl(this.indexes_,(i,r)=>{const o=Nr(this.indexSet_,r);if($(o,"Missing index implementation for "+r),i===zi)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(we.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),sc(a,o.getCompare())}else return zi;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new we(e.name,a))),l.insert(e,e.node)}});return new ss(s,this.indexSet_)}removeFromIndexes(e,n){const s=Yl(this.indexes_,i=>{if(i===zi)return i;{const r=n.get(e.name);return r?i.remove(new we(e.name,r)):i}});return new ss(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho;class Re{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Gw(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ho||(ho=new Re(new Vn(mp),null,ss.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ho}updatePriority(e){return this.children_.isEmpty()?this:new Re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?ho:n}}getChild(e){const n=Te(e);return n===null?this:this.getImmediateChild(n).getChild(Fe(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new we(e,n);let i,r;n.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?ho:this.priorityNode_;return new Re(i,o,r)}}updateChild(e,n){const s=Te(e);if(s===null)return n;{$(Te(e)!==".priority"||qs(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(Fe(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,r=!0;if(this.forEachChild(It,(o,a)=>{n[o]=a.val(e),s++,r&&Re.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+zw(this.getPriority().val())+":"),this.forEachChild(It,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Ew(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new we(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new we(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new we(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,we.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,we.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ra?-1:0}withIndex(e){if(e===mr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Re(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===mr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(It),i=n.getIterator(It);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===mr?null:this.indexMap_.get(e.toString())}}Re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class kV extends Re{constructor(){super(new Vn(mp),Re.EMPTY_NODE,ss.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Re.EMPTY_NODE}isEmpty(){return!1}}const Ra=new kV;Object.defineProperties(we,{MIN:{value:new we(Or,Re.EMPTY_NODE)},MAX:{value:new we(Si,Ra)}});Kw.__EMPTY_NODE=Re.EMPTY_NODE;it.__childrenNodeConstructor=Re;CV(Ra);RV(Ra);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=!0;function wt(t,e=null){if(t===null)return Re.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new it(n,wt(e))}if(!(t instanceof Array)&&DV){const n=[];let s=!1;if(hn(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=wt(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new we(o,l)))}}),n.length===0)return Re.EMPTY_NODE;const r=sc(n,IV,o=>o.name,mp);if(s){const o=sc(n,It.getCompare());return new Re(r,wt(e),new ss({".priority":o},{".priority":It}))}else return new Re(r,wt(e),ss.Default)}else{let n=Re.EMPTY_NODE;return hn(t,(s,i)=>{if(vs(t,s)&&s.substring(0,1)!=="."){const r=wt(i);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(wt(e))}}SV(wt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV extends ru{constructor(e){super(),this.indexPath_=e,$(!ye(e)&&Te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),r=s.compareTo(i);return r===0?Yr(e.name,n.name):r}makePost(e,n){const s=wt(e),i=Re.EMPTY_NODE.updateChild(this.indexPath_,s);return new we(n,i)}maxPost(){const e=Re.EMPTY_NODE.updateChild(this.indexPath_,Ra);return new we(Si,e)}toString(){return Hw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV extends ru{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Yr(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){const s=wt(e);return new we(n,s)}toString(){return".value"}}const MV=new LV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){return{type:"value",snapshotNode:t}}function FV(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function $V(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function iy(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function UV(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Or}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Si}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new _p;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ry(t){const e={};if(t.isDefault())return e;let n;if(t.index_===It?n="$priority":t.index_===MV?n="$value":t.index_===mr?n="$key":($(t.index_ instanceof xV,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pt(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=pt(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+pt(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=pt(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function oy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==It&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends $w{constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Ca("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=ic.getListenId_(e,s),a={};this.listens_[o]=a;const l=ry(e._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,s),Nr(this.listens_,o)===a){let d;c?c===401?d="permission_denied":d="rest_error:"+c:d="ok",i(d,null)}})}unlisten(e,n){const s=ic.getListenId_(e,n);delete this.listens_[s]}get(e){const n=ry(e._queryParams),s=e._path.toString(),i=new Qo;return this.restRequest_(s+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(n.auth=i.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rp(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Xo(a.responseText)}catch{Yt("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&Yt("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(){return{value:null,children:new Map}}function Xw(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=Te(e);t.children.has(s)||t.children.set(s,rc());const i=t.children.get(s);e=Fe(e),Xw(i,e,n)}}function Pd(t,e,n){t.value!==null?n(e,t.value):HV(t,(s,i)=>{const r=new Be(e.toString()+"/"+s);Pd(i,r,n)})}function HV(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&hn(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=10*1e3,WV=30*1e3,qV=5*60*1e3;class KV{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new jV(e);const s=ay+(WV-ay)*Math.random();xo(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;hn(e,(i,r)=>{r>0&&vs(this.statsToReport_,i)&&(n[i]=r,s=!0)}),s&&this.server_.reportStats(n),xo(this.reportStats_.bind(this),Math.floor(Math.random()*2*qV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Fn||(Fn={}));function Jw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Zw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function eb(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Fn.ACK_USER_WRITE,this.source=Jw()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Be(e));return new oc(ke(),n,this.revert)}}else return $(Te(this.path)===e,"operationForChild called for unrelated child."),new oc(Fe(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Fn.OVERWRITE}operationForChild(e){return ye(this.path)?new Ri(this.source,ke(),this.snap.getImmediateChild(e)):new Ri(this.source,Fe(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Fn.MERGE}operationForChild(e){if(ye(this.path)){const n=this.children.subtree(new Be(e));return n.isEmpty()?null:n.value?new Ri(this.source,ke(),n.value):new ta(this.source,ke(),n)}else return $(Te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ta(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;const n=Te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function zV(t,e,n,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(UV(o.childName,o.snapshotNode))}),fo(t,i,"child_removed",e,s,n),fo(t,i,"child_added",e,s,n),fo(t,i,"child_moved",r,s,n),fo(t,i,"child_changed",e,s,n),fo(t,i,"value",e,s,n),i}function fo(t,e,n,s,i,r){const o=s.filter(a=>a.type===n);o.sort((a,l)=>YV(t,a,l)),o.forEach(a=>{const l=GV(t,a,r);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function GV(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function YV(t,e,n){if(e.childName==null||n.childName==null)throw Kr("Should only compare child_ events.");const s=new we(e.childName,e.snapshotNode),i=new we(n.childName,n.snapshotNode);return t.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e){return{eventCache:t,serverCache:e}}function Lo(t,e,n,s){return tb(new gp(e,n,s),t.serverCache)}function nb(t,e,n,s){return tb(t.eventCache,new gp(e,n,s))}function Nd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Pi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah;const QV=()=>(Ah||(Ah=new Vn(LM)),Ah);class Me{constructor(e,n=QV()){this.value=e,this.children=n}static fromObject(e){let n=new Me(null);return hn(e,(s,i)=>{n=n.set(new Be(s),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(ye(e))return null;{const s=Te(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(Fe(e),n);return r!=null?{path:ot(new Be(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{const n=Te(e),s=this.children.get(n);return s!==null?s.subtree(Fe(e)):new Me(null)}}set(e,n){if(ye(e))return new Me(n,this.children);{const s=Te(e),r=(this.children.get(s)||new Me(null)).set(Fe(e),n),o=this.children.insert(s,r);return new Me(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new Me(null):new Me(null,this.children);{const n=Te(e),s=this.children.get(n);if(s){const i=s.remove(Fe(e));let r;return i.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,i),this.value===null&&r.isEmpty()?new Me(null):new Me(this.value,r)}else return this}}get(e){if(ye(e))return this.value;{const n=Te(e),s=this.children.get(n);return s?s.get(Fe(e)):null}}setTree(e,n){if(ye(e))return n;{const s=Te(e),r=(this.children.get(s)||new Me(null)).setTree(Fe(e),n);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new Me(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(ot(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(ye(e))return null;{const r=Te(e),o=this.children.get(r);return o?o.findOnPath_(Fe(e),ot(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,s){if(ye(e))return this;{this.value&&s(n,this.value);const i=Te(e),r=this.children.get(i);return r?r.foreachOnPath_(Fe(e),ot(n,i),s):new Me(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(ot(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.writeTree_=e}static empty(){return new wn(new Me(null))}}function Mo(t,e,n){if(ye(e))return new wn(new Me(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=rn(i,e);return r=r.updateChild(o,n),new wn(t.writeTree_.set(i,r))}else{const i=new Me(n),r=t.writeTree_.setTree(e,i);return new wn(r)}}}function ly(t,e,n){let s=t;return hn(n,(i,r)=>{s=Mo(s,ot(e,i),r)}),s}function cy(t,e){if(ye(e))return wn.empty();{const n=t.writeTree_.setTree(e,new Me(null));return new wn(n)}}function Od(t,e){return $i(t,e)!=null}function $i(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rn(n.path,e)):null}function uy(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(It,(s,i)=>{e.push(new we(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new we(s,i.value))}),e}function Vs(t,e){if(ye(e))return t;{const n=$i(t,e);return n!=null?new wn(new Me(n)):new wn(t.writeTree_.subtree(e))}}function kd(t){return t.writeTree_.isEmpty()}function kr(t,e){return sb(ke(),t.writeTree_,e)}function sb(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?($(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=sb(ot(t,i),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(ot(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t,e){return cb(e,t)}function XV(t,e,n,s,i){$(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=Mo(t.visibleWrites,e,n)),t.lastWriteId=s}function JV(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function ZV(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,r=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&eF(a,s.path)?i=!1:yn(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return tF(t),!0;if(s.snap)t.visibleWrites=cy(t.visibleWrites,s.path);else{const a=s.children;hn(a,l=>{t.visibleWrites=cy(t.visibleWrites,ot(s.path,l))})}return!0}else return!1}function eF(t,e){if(t.snap)return yn(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&yn(ot(t.path,n),e))return!0;return!1}function tF(t){t.visibleWrites=rb(t.allWrites,nF,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function nF(t){return t.visible}function rb(t,e,n){let s=wn.empty();for(let i=0;i<t.length;++i){const r=t[i];if(e(r)){const o=r.path;let a;if(r.snap)yn(n,o)?(a=rn(n,o),s=Mo(s,a,r.snap)):yn(o,n)&&(a=rn(o,n),s=Mo(s,ke(),r.snap.getChild(a)));else if(r.children){if(yn(n,o))a=rn(n,o),s=ly(s,a,r.children);else if(yn(o,n))if(a=rn(o,n),ye(a))s=ly(s,ke(),r.children);else{const l=Nr(r.children,Te(a));if(l){const c=l.getChild(Fe(a));s=Mo(s,ke(),c)}}}else throw Kr("WriteRecord should have .snap or .children")}}return s}function ob(t,e,n,s,i){if(!s&&!i){const r=$i(t.visibleWrites,e);if(r!=null)return r;{const o=Vs(t.visibleWrites,e);if(kd(o))return n;if(n==null&&!Od(o,ke()))return null;{const a=n||Re.EMPTY_NODE;return kr(o,a)}}}else{const r=Vs(t.visibleWrites,e);if(!i&&kd(r))return n;if(!i&&n==null&&!Od(r,ke()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(yn(c.path,e)||yn(e,c.path))},a=rb(t.allWrites,o,e),l=n||Re.EMPTY_NODE;return kr(a,l)}}}function sF(t,e,n){let s=Re.EMPTY_NODE;const i=$i(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(It,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(n){const r=Vs(t.visibleWrites,e);return n.forEachChild(It,(o,a)=>{const l=kr(Vs(r,new Be(o)),a);s=s.updateImmediateChild(o,l)}),uy(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=Vs(t.visibleWrites,e);return uy(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function iF(t,e,n,s,i){$(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=ot(e,n);if(Od(t.visibleWrites,r))return null;{const o=Vs(t.visibleWrites,r);return kd(o)?i.getChild(n):kr(o,i.getChild(n))}}function rF(t,e,n,s){const i=ot(e,n),r=$i(t.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(n)){const o=Vs(t.visibleWrites,i);return kr(o,s.getNode().getImmediateChild(n))}else return null}function oF(t,e){return $i(t.visibleWrites,e)}function aF(t,e,n,s,i,r,o){let a;const l=Vs(t.visibleWrites,e),c=$i(l,ke());if(c!=null)a=c;else if(n!=null)a=kr(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],h=o.getCompare(),d=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let f=d.getNext();for(;f&&u.length<i;)h(f,s)!==0&&u.push(f),f=d.getNext();return u}else return[]}function lF(){return{visibleWrites:wn.empty(),allWrites:[],lastWriteId:-1}}function Dd(t,e,n,s){return ob(t.writeTree,t.treePath,e,n,s)}function ab(t,e){return sF(t.writeTree,t.treePath,e)}function hy(t,e,n,s){return iF(t.writeTree,t.treePath,e,n,s)}function ac(t,e){return oF(t.writeTree,ot(t.treePath,e))}function cF(t,e,n,s,i,r){return aF(t.writeTree,t.treePath,e,n,s,i,r)}function yp(t,e,n){return rF(t.writeTree,t.treePath,e,n)}function lb(t,e){return cb(ot(t.treePath,e),t.writeTree)}function cb(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,iy(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,$V(s,i.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,FV(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,iy(s,e.snapshotNode,i.oldSnap));else throw Kr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const ub=new hF;class vp{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new gp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yp(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pi(this.viewCache_),r=cF(this.writes_,i,n,1,s,e);return r.length===0?null:r[0]}}function dF(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function fF(t,e,n,s,i){const r=new uF;let o,a;if(n.type===Fn.OVERWRITE){const c=n;c.source.fromUser?o=xd(t,e,c.path,c.snap,s,i,r):($(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ye(c.path),o=lc(t,e,c.path,c.snap,s,i,a,r))}else if(n.type===Fn.MERGE){const c=n;c.source.fromUser?o=mF(t,e,c.path,c.children,s,i,r):($(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Ld(t,e,c.path,c.children,s,i,a,r))}else if(n.type===Fn.ACK_USER_WRITE){const c=n;c.revert?o=yF(t,e,c.path,s,i,r):o=_F(t,e,c.path,c.affectedTree,s,i,r)}else if(n.type===Fn.LISTEN_COMPLETE)o=gF(t,e,n.path,s,r);else throw Kr("Unknown operation type: "+n.type);const l=r.getChanges();return pF(e,o,l),{viewCache:o,changes:l}}function pF(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=Nd(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(VV(Nd(e)))}}function hb(t,e,n,s,i,r){const o=e.eventCache;if(ac(s,n)!=null)return e;{let a,l;if(ye(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Pi(e),u=c instanceof Re?c:Re.EMPTY_NODE,h=ab(s,u);a=t.filter.updateFullNode(e.eventCache.getNode(),h,r)}else{const c=Dd(s,Pi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=Te(n);if(c===".priority"){$(qs(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const h=hy(s,n,u,l);h!=null?a=t.filter.updatePriority(u,h):a=o.getNode()}else{const u=Fe(n);let h;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const d=hy(s,n,o.getNode(),l);d!=null?h=o.getNode().getImmediateChild(c).updateChild(u,d):h=o.getNode().getImmediateChild(c)}else h=yp(s,c,e.serverCache);h!=null?a=t.filter.updateChild(o.getNode(),c,h,u,i,r):a=o.getNode()}}return Lo(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function lc(t,e,n,s,i,r,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(ye(n))c=u.updateFullNode(l.getNode(),s,null);else if(u.filtersNodes()&&!l.isFiltered()){const f=l.getNode().updateChild(n,s);c=u.updateFullNode(l.getNode(),f,null)}else{const f=Te(n);if(!l.isCompleteForPath(n)&&qs(n)>1)return e;const _=Fe(n),y=l.getNode().getImmediateChild(f).updateChild(_,s);f===".priority"?c=u.updatePriority(l.getNode(),y):c=u.updateChild(l.getNode(),f,y,_,ub,null)}const h=nb(e,c,l.isFullyInitialized()||ye(n),u.filtersNodes()),d=new vp(i,h,r);return hb(t,h,n,i,d,a)}function xd(t,e,n,s,i,r,o){const a=e.eventCache;let l,c;const u=new vp(i,e,r);if(ye(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=Lo(e,c,!0,t.filter.filtersNodes());else{const h=Te(n);if(h===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),l=Lo(e,c,a.isFullyInitialized(),a.isFiltered());else{const d=Fe(n),f=a.getNode().getImmediateChild(h);let _;if(ye(d))_=s;else{const g=u.getCompleteChild(h);g!=null?Bw(d)===".priority"&&g.getChild(jw(d)).isEmpty()?_=g:_=g.updateChild(d,s):_=Re.EMPTY_NODE}if(f.equals(_))l=e;else{const g=t.filter.updateChild(a.getNode(),h,_,d,u,o);l=Lo(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function dy(t,e){return t.eventCache.isCompleteForChild(e)}function mF(t,e,n,s,i,r,o){let a=e;return s.foreach((l,c)=>{const u=ot(n,l);dy(e,Te(u))&&(a=xd(t,a,u,c,i,r,o))}),s.foreach((l,c)=>{const u=ot(n,l);dy(e,Te(u))||(a=xd(t,a,u,c,i,r,o))}),a}function fy(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function Ld(t,e,n,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;ye(n)?c=s:c=new Me(null).setTree(n,s);const u=e.serverCache.getNode();return c.children.inorderTraversal((h,d)=>{if(u.hasChild(h)){const f=e.serverCache.getNode().getImmediateChild(h),_=fy(t,f,d);l=lc(t,l,new Be(h),_,i,r,o,a)}}),c.children.inorderTraversal((h,d)=>{const f=!e.serverCache.isCompleteForChild(h)&&d.value===null;if(!u.hasChild(h)&&!f){const _=e.serverCache.getNode().getImmediateChild(h),g=fy(t,_,d);l=lc(t,l,new Be(h),g,i,r,o,a)}}),l}function _F(t,e,n,s,i,r,o){if(ac(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(ye(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return lc(t,e,n,l.getNode().getChild(n),i,r,a,o);if(ye(n)){let c=new Me(null);return l.getNode().forEachChild(mr,(u,h)=>{c=c.set(new Be(u),h)}),Ld(t,e,n,c,i,r,a,o)}else return e}else{let c=new Me(null);return s.foreach((u,h)=>{const d=ot(n,u);l.isCompleteForPath(d)&&(c=c.set(u,l.getNode().getChild(d)))}),Ld(t,e,n,c,i,r,a,o)}}function gF(t,e,n,s,i){const r=e.serverCache,o=nb(e,r.getNode(),r.isFullyInitialized()||ye(n),r.isFiltered());return hb(t,o,n,s,ub,i)}function yF(t,e,n,s,i,r){let o;if(ac(s,n)!=null)return e;{const a=new vp(s,e,i),l=e.eventCache.getNode();let c;if(ye(n)||Te(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Dd(s,Pi(e));else{const h=e.serverCache.getNode();$(h instanceof Re,"serverChildren would be complete if leaf node"),u=ab(s,h)}u=u,c=t.filter.updateFullNode(l,u,r)}else{const u=Te(n);let h=yp(s,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=t.filter.updateChild(l,u,h,Fe(n),a,r):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,Re.EMPTY_NODE,Fe(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Dd(s,Pi(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||ac(s,ke())!=null,Lo(e,c,o,t.filter.filtersNodes())}}function vF(t,e){const n=Pi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(Te(e)).isEmpty())?n.getChild(e):null}function py(t,e,n,s){e.type===Fn.MERGE&&e.source.queryId!==null&&($(Pi(t.viewCache_),"We should always have a full cache before handling merges"),$(Nd(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,r=fF(t.processor_,i,e,n,s);return dF(t.processor_,r.viewCache),$(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,EF(t,r.changes,r.viewCache.eventCache.getNode(),null)}function EF(t,e,n,s){const i=s?[s]:t.eventRegistrations_;return zV(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let my;function TF(t){$(!my,"__referenceConstructor has already been defined"),my=t}function Ep(t,e,n,s){const i=e.source.queryId;if(i!==null){const r=t.views.get(i);return $(r!=null,"SyncTree gave us an op for an invalid query."),py(r,e,n,s)}else{let r=[];for(const o of t.views.values())r=r.concat(py(o,e,n,s));return r}}function Tp(t,e){let n=null;for(const s of t.views.values())n=n||vF(s,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _y;function wF(t){$(!_y,"__referenceConstructor has already been defined"),_y=t}class gy{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Me(null),this.pendingWriteTree_=lF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bF(t,e,n,s,i){return XV(t.pendingWriteTree_,e,n,s,i),i?au(t,new Ri(Jw(),e,n)):[]}function ir(t,e,n=!1){const s=JV(t.pendingWriteTree_,e);if(ZV(t.pendingWriteTree_,e)){let r=new Me(null);return s.snap!=null?r=r.set(ke(),!0):hn(s.children,o=>{r=r.set(new Be(o),!0)}),au(t,new oc(s.path,r,n))}else return[]}function ou(t,e,n){return au(t,new Ri(Zw(),e,n))}function AF(t,e,n){const s=Me.fromObject(n);return au(t,new ta(Zw(),e,s))}function IF(t,e,n,s){const i=mb(t,s);if(i!=null){const r=_b(i),o=r.path,a=r.queryId,l=rn(o,e),c=new Ri(eb(a),l,n);return gb(t,o,c)}else return[]}function CF(t,e,n,s){const i=mb(t,s);if(i){const r=_b(i),o=r.path,a=r.queryId,l=rn(o,e),c=Me.fromObject(n),u=new ta(eb(a),l,c);return gb(t,o,u)}else return[]}function db(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=rn(o,e),c=Tp(a,l);if(c)return c});return ob(i,e,r,n,!0)}function au(t,e){return fb(e,t.syncPointTree_,null,ib(t.pendingWriteTree_,ke()))}function fb(t,e,n,s){if(ye(t.path))return pb(t,e,n,s);{const i=e.get(ke());n==null&&i!=null&&(n=Tp(i,ke()));let r=[];const o=Te(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=lb(s,o);r=r.concat(fb(a,l,c,u))}return i&&(r=r.concat(Ep(i,t,s,n))),r}}function pb(t,e,n,s){const i=e.get(ke());n==null&&i!=null&&(n=Tp(i,ke()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=lb(s,o),u=t.operationForChild(o);u&&(r=r.concat(pb(u,a,l,c)))}),i&&(r=r.concat(Ep(i,t,s,n))),r}function mb(t,e){return t.tagToQueryMap.get(e)}function _b(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Be(t.substr(0,e))}}function gb(t,e,n){const s=t.syncPointTree_.get(e);$(s,"Missing sync point for query tag that we're tracking");const i=ib(t.pendingWriteTree_,e);return Ep(s,n,i,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new wp(n)}node(){return this.node_}}class bp{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ot(this.path_,e);return new bp(this.syncTree_,n)}node(){return db(this.syncTree_,this.path_)}}const SF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},yy=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return RF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return PF(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},RF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},PF=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&$(!1,"Unexpected increment value: "+s);const i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},NF=function(t,e,n,s){return Ap(e,new bp(n,t),s)},OF=function(t,e,n){return Ap(t,new wp(e),n)};function Ap(t,e,n){const s=t.getPriority().val(),i=yy(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=yy(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new it(a,wt(i)):t}else{const o=t;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new it(i))),o.forEachChild(It,(a,l)=>{const c=Ap(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function Cp(t,e){let n=e instanceof Be?e:new Be(e),s=t,i=Te(n);for(;i!==null;){const r=Nr(s.node.children,i)||{children:{},childCount:0};s=new Ip(i,s,r),n=Fe(n),i=Te(n)}return s}function Qr(t){return t.node.value}function yb(t,e){t.node.value=e,Md(t)}function vb(t){return t.node.childCount>0}function kF(t){return Qr(t)===void 0&&!vb(t)}function lu(t,e){hn(t.node.children,(n,s)=>{e(new Ip(n,t,s))})}function Eb(t,e,n,s){n&&!s&&e(t),lu(t,i=>{Eb(i,e,!0,s)}),n&&s&&e(t)}function DF(t,e,n){let s=n?t:t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Pa(t){return new Be(t.parent===null?t.name:Pa(t.parent)+"/"+t.name)}function Md(t){t.parent!==null&&xF(t.parent,t.name,t)}function xF(t,e,n){const s=kF(n),i=vs(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,Md(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Md(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=/[\[\].#$\/\u0000-\u001F\u007F]/,MF=/[\[\].#$\u0000-\u001F\u007F]/,Ih=10*1024*1024,Tb=function(t){return typeof t=="string"&&t.length!==0&&!LF.test(t)},VF=function(t){return typeof t=="string"&&t.length!==0&&!MF.test(t)},FF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),VF(t)},wb=function(t,e,n){const s=n instanceof Be?new gV(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ri(s));if(typeof e=="function")throw new Error(t+"contains a function "+ri(s)+" with contents = "+e.toString());if(Tw(e))throw new Error(t+"contains "+e.toString()+" "+ri(s));if(typeof e=="string"&&e.length>Ih/3&&su(e)>Ih)throw new Error(t+"contains a string greater than "+Ih+" utf8 bytes "+ri(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(hn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Tb(o)))throw new Error(t+" contains an invalid key ("+o+") "+ri(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yV(s,o),wb(t,a,s),vV(s)}),i&&r)throw new Error(t+' contains ".value" child '+ri(s)+" in addition to actual children.")}},$F=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Tb(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!FF(n))throw new Error(Xx(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function BF(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();n!==null&&!Ww(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ui(t,e,n){BF(t,n),HF(t,s=>yn(s,e)||yn(e,s))}function HF(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const r=i.path;e(r)?(jF(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function jF(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Ti&&Tt("event: "+n.toString()),Sa(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="repo_interrupt",qF=25;class KF{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new UF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rc(),this.transactionQueueTree_=new Ip,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zF(t,e,n){if(t.stats_=dp(t.repoInfo_),t.forceRestClient_||BM())t.server_=new ic(t.repoInfo_,(s,i,r,o)=>{vy(t,s,i,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ey(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new cs(t.repoInfo_,e,(s,i,r,o)=>{vy(t,s,i,r,o)},s=>{Ey(t,s)},s=>{YF(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=zM(t.repoInfo_,()=>new KV(t.stats_,t.server_)),t.infoData_=new BV,t.infoSyncTree_=new gy({startListening:(s,i,r,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=ou(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Sp(t,"connected",!1),t.serverSyncTree_=new gy({startListening:(s,i,r,o)=>(t.server_.listen(s,r,i,(a,l)=>{const c=o(a,l);Ui(t.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function GF(t){const n=t.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function bb(t){return SF({timestamp:GF(t)})}function vy(t,e,n,s,i){t.dataUpdateCount++;const r=new Be(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(s){const l=Yl(n,c=>wt(c));o=CF(t.serverSyncTree_,r,l,i)}else{const l=wt(n);o=IF(t.serverSyncTree_,r,l,i)}else if(s){const l=Yl(n,c=>wt(c));o=AF(t.serverSyncTree_,r,l)}else{const l=wt(n);o=ou(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Pp(t,r)),Ui(t.eventQueue_,a,o)}function Ey(t,e){Sp(t,"connected",e),e===!1&&XF(t)}function YF(t,e){hn(e,(n,s)=>{Sp(t,n,s)})}function Sp(t,e,n){const s=new Be("/.info/"+e),i=wt(n);t.infoData_.updateSnapshot(s,i);const r=ou(t.infoSyncTree_,s,i);Ui(t.eventQueue_,s,r)}function QF(t){return t.nextWriteId_++}function XF(t){Ab(t,"onDisconnectEvents");const e=bb(t),n=rc();Pd(t.onDisconnect_,ke(),(i,r)=>{const o=NF(i,r,t.serverSyncTree_,e);Xw(n,i,o)});let s=[];Pd(n,ke(),(i,r)=>{s=s.concat(ou(t.serverSyncTree_,i,r));const o=t$(t,i);Pp(t,o)}),t.onDisconnect_=rc(),Ui(t.eventQueue_,ke(),s)}function JF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(WF)}function Ab(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Tt(n,...e)}function Ib(t,e,n){return db(t.serverSyncTree_,e,n)||Re.EMPTY_NODE}function Rp(t,e=t.transactionQueueTree_){if(e||cu(t,e),Qr(e)){const n=Sb(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&ZF(t,Pa(e),n)}else vb(e)&&lu(e,n=>{Rp(t,n)})}function ZF(t,e,n){const s=n.map(c=>c.currentWriteId),i=Ib(t,e,s);let r=i;const o=i.hash();for(let c=0;c<n.length;c++){const u=n[c];$(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const h=rn(e,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Ab(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const h=[];for(let d=0;d<n.length;d++)n[d].status=2,u=u.concat(ir(t.serverSyncTree_,n[d].currentWriteId)),n[d].onComplete&&h.push(()=>n[d].onComplete(null,!0,n[d].currentOutputSnapshotResolved)),n[d].unwatcher();cu(t,Cp(t.transactionQueueTree_,e)),Rp(t,t.transactionQueueTree_),Ui(t.eventQueue_,e,u);for(let d=0;d<h.length;d++)Sa(h[d])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Yt("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}Pp(t,e)}},o)}function Pp(t,e){const n=Cb(t,e),s=Pa(n),i=Sb(t,n);return e$(t,i,s),s}function e$(t,e,n){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=rn(n,l.path);let u=!1,h;if($(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=qF)u=!0,h="maxretry",i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0));else{const d=Ib(t,l.path,o);l.currentInputSnapshot=d;const f=e[a].update(d.val());if(f!==void 0){wb("transaction failed: Data returned ",f,l.path);let _=wt(f);typeof f=="object"&&f!=null&&vs(f,".priority")||(_=_.updatePriority(d.getPriority()));const y=l.currentWriteId,E=bb(t),C=OF(_,d,E);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=C,l.currentWriteId=QF(t),o.splice(o.indexOf(y),1),i=i.concat(bF(t.serverSyncTree_,l.path,C,l.currentWriteId,l.applyLocally)),i=i.concat(ir(t.serverSyncTree_,y,!0))}else u=!0,h="nodata",i=i.concat(ir(t.serverSyncTree_,l.currentWriteId,!0))}Ui(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(d){setTimeout(d,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(h),!1,null))))}cu(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)Sa(s[a]);Rp(t,t.transactionQueueTree_)}function Cb(t,e){let n,s=t.transactionQueueTree_;for(n=Te(e);n!==null&&Qr(s)===void 0;)s=Cp(s,n),e=Fe(e),n=Te(e);return s}function Sb(t,e){const n=[];return Rb(t,e,n),n.sort((s,i)=>s.order-i.order),n}function Rb(t,e,n){const s=Qr(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);lu(e,i=>{Rb(t,i,n)})}function cu(t,e){const n=Qr(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,yb(e,n.length>0?n:void 0)}lu(e,s=>{cu(t,s)})}function t$(t,e){const n=Pa(Cb(t,e)),s=Cp(t.transactionQueueTree_,e);return DF(s,i=>{Ch(t,i)}),Ch(t,s),Eb(s,i=>{Ch(t,i)}),n}function Ch(t,e){const n=Qr(e);if(n){const s=[];let i=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?($(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):($(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ir(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?yb(e,void 0):n.length=r+1,Ui(t.eventQueue_,Pa(e),i);for(let o=0;o<s.length;o++)Sa(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function s$(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Yt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Ty=function(t,e){const n=i$(t),s=n.namespace;n.domain==="firebase.com"&&Ci(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&Ci("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||DM();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new WM(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new Be(n.pathString)}},i$=function(t){let e="",n="",s="",i="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let h=t.indexOf("?");h===-1&&(h=t.length),e=t.substring(0,Math.min(u,h)),u<h&&(i=n$(t.substring(u,h)));const d=s$(t.substring(Math.min(t.length,h)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const _=e.indexOf(".");s=e.substring(0,_).toLowerCase(),n=e.substring(_+1),r=s}"ns"in d&&(r=d.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return ye(this._path)?null:Bw(this._path)}get ref(){return new Xr(this._repo,this._path)}get _queryIdentifier(){const e=oy(this._queryParams),n=up(e);return n==="{}"?"default":n}get _queryObject(){return oy(this._queryParams)}isEqual(e){if(e=In(e),!(e instanceof Np))return!1;const n=this._repo===e._repo,s=Ww(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+_V(this._path)}}class Xr extends Np{constructor(e,n){super(e,n,new _p,!1)}get parent(){const e=jw(this._path);return e===null?null:new Xr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}TF(Xr);wF(Xr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$="FIREBASE_DATABASE_EMULATOR_HOST",Vd={};let o$=!1;function a$(t,e,n,s,i){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||Ci("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tt("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Ty(r,i),a=o.repoInfo,l,c;typeof process<"u"&&Bg&&(c=Bg[r$]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=Ty(r,i),a=o.repoInfo):l=!o.repoInfo.secure;const u=i&&l?new Cd(Cd.OWNER):new jM(t.name,t.options,e);$F("Invalid Firebase Database URL",o),ye(o.path)||Ci("Database URL must point to the root of a Firebase Database (not including a child path).");const h=c$(a,t,u,new HM(t.name,n));return new u$(h,t)}function l$(t,e){const n=Vd[e];(!n||n[t.key]!==t)&&Ci(`Database ${e}(${t.repoInfo_}) has already been deleted.`),JF(t),delete n[t.key]}function c$(t,e,n,s){let i=Vd[e.name];i||(i={},Vd[e.name]=i);let r=i[t.toURLString()];return r&&Ci("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new KF(t,o$,n,s),i[t.toURLString()]=r,r}class u${constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xr(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(l$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ci("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t){RM(Gr),Yn(new Cn("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return a$(s,i,r,n)},"PUBLIC").setMultipleInstances(!0)),Gt(Hg,jg,t),Gt(Hg,jg,"esm2017")}cs.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};cs.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};h$();var d$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U,Op=Op||{},re=d$||self;function uu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Na(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function f$(t){return Object.prototype.hasOwnProperty.call(t,Sh)&&t[Sh]||(t[Sh]=++p$)}var Sh="closure_uid_"+(1e9*Math.random()>>>0),p$=0;function m$(t,e,n){return t.call.apply(t.bind,arguments)}function _$(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ct(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ct=m$:Ct=_$,Ct.apply(null,arguments)}function cl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function lt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(s,o)}}function Js(){this.s=this.s,this.o=this.o}var g$=0;Js.prototype.s=!1;Js.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),g$!=0)&&f$(this)};Js.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pb=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function kp(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function wy(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(uu(s)){const i=t.length||0,r=s.length||0;t.length=i+r;for(let o=0;o<r;o++)t[i+o]=s[o]}else t.push(s)}}function St(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}St.prototype.h=function(){this.defaultPrevented=!0};var y$=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};re.addEventListener("test",n,e),re.removeEventListener("test",n,e)}catch{}return t}();function na(t){return/^[\s\xa0]*$/.test(t)}function hu(){var t=re.navigator;return t&&(t=t.userAgent)?t:""}function Ln(t){return hu().indexOf(t)!=-1}function Dp(t){return Dp[" "](t),t}Dp[" "]=function(){};function v$(t,e){var n=hU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var E$=Ln("Opera"),Dr=Ln("Trident")||Ln("MSIE"),Nb=Ln("Edge"),Fd=Nb||Dr,Ob=Ln("Gecko")&&!(hu().toLowerCase().indexOf("webkit")!=-1&&!Ln("Edge"))&&!(Ln("Trident")||Ln("MSIE"))&&!Ln("Edge"),T$=hu().toLowerCase().indexOf("webkit")!=-1&&!Ln("Edge");function kb(){var t=re.document;return t?t.documentMode:void 0}var $d;e:{var Rh="",Ph=function(){var t=hu();if(Ob)return/rv:([^\);]+)(\)|;)/.exec(t);if(Nb)return/Edge\/([\d\.]+)/.exec(t);if(Dr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(T$)return/WebKit\/(\S+)/.exec(t);if(E$)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ph&&(Rh=Ph?Ph[1]:""),Dr){var Nh=kb();if(Nh!=null&&Nh>parseFloat(Rh)){$d=String(Nh);break e}}$d=Rh}var Ud;if(re.document&&Dr){var by=kb();Ud=by||parseInt($d,10)||void 0}else Ud=void 0;var w$=Ud;function sa(t,e){if(St.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ob){e:{try{Dp(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:b$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&sa.$.h.call(this)}}lt(sa,St);var b$={2:"touch",3:"pen",4:"mouse"};sa.prototype.h=function(){sa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Oa="closure_listenable_"+(1e6*Math.random()|0),A$=0;function I$(t,e,n,s,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.la=i,this.key=++A$,this.fa=this.ia=!1}function du(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xp(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function C$(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function Db(t){const e={};for(const n in t)e[n]=t[n];return e}const Ay="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function xb(t,e){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)t[n]=s[n];for(let r=0;r<Ay.length;r++)n=Ay[r],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function fu(t){this.src=t,this.g={},this.h=0}fu.prototype.add=function(t,e,n,s,i){var r=t.toString();t=this.g[r],t||(t=this.g[r]=[],this.h++);var o=Hd(t,e,s,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new I$(e,this.src,r,!!s,i),e.ia=n,t.push(e)),e};function Bd(t,e){var n=e.type;if(n in t.g){var s=t.g[n],i=Pb(s,e),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(du(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hd(t,e,n,s){for(var i=0;i<t.length;++i){var r=t[i];if(!r.fa&&r.listener==e&&r.capture==!!n&&r.la==s)return i}return-1}var Lp="closure_lm_"+(1e6*Math.random()|0),Oh={};function Lb(t,e,n,s,i){if(s&&s.once)return Vb(t,e,n,s,i);if(Array.isArray(e)){for(var r=0;r<e.length;r++)Lb(t,e[r],n,s,i);return null}return n=Fp(n),t&&t[Oa]?t.O(e,n,Na(s)?!!s.capture:!!s,i):Mb(t,e,n,!1,s,i)}function Mb(t,e,n,s,i,r){if(!e)throw Error("Invalid event type");var o=Na(i)?!!i.capture:!!i,a=Vp(t);if(a||(t[Lp]=a=new fu(t)),n=a.add(e,n,s,o,r),n.proxy)return n;if(s=S$(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)y$||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),s,i);else if(t.attachEvent)t.attachEvent($b(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function S$(){function t(n){return e.call(t.src,t.listener,n)}const e=R$;return t}function Vb(t,e,n,s,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)Vb(t,e[r],n,s,i);return null}return n=Fp(n),t&&t[Oa]?t.P(e,n,Na(s)?!!s.capture:!!s,i):Mb(t,e,n,!0,s,i)}function Fb(t,e,n,s,i){if(Array.isArray(e))for(var r=0;r<e.length;r++)Fb(t,e[r],n,s,i);else s=Na(s)?!!s.capture:!!s,n=Fp(n),t&&t[Oa]?(t=t.i,e=String(e).toString(),e in t.g&&(r=t.g[e],n=Hd(r,n,s,i),-1<n&&(du(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete t.g[e],t.h--)))):t&&(t=Vp(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hd(e,n,s,i)),(n=-1<t?e[t]:null)&&Mp(n))}function Mp(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Oa])Bd(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent($b(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Vp(e))?(Bd(n,t),n.h==0&&(n.src=null,e[Lp]=null)):du(t)}}}function $b(t){return t in Oh?Oh[t]:Oh[t]="on"+t}function R$(t,e){if(t.fa)t=!0;else{e=new sa(e,this);var n=t.listener,s=t.la||t.src;t.ia&&Mp(t),t=n.call(s,e)}return t}function Vp(t){return t=t[Lp],t instanceof fu?t:null}var kh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fp(t){return typeof t=="function"?t:(t[kh]||(t[kh]=function(e){return t.handleEvent(e)}),t[kh])}function at(){Js.call(this),this.i=new fu(this),this.S=this,this.J=null}lt(at,Js);at.prototype[Oa]=!0;at.prototype.removeEventListener=function(t,e,n,s){Fb(this,t,e,n,s)};function _t(t,e){var n,s=t.J;if(s)for(n=[];s;s=s.J)n.push(s);if(t=t.S,s=e.type||e,typeof e=="string")e=new St(e,t);else if(e instanceof St)e.target=e.target||t;else{var i=e;e=new St(s,t),xb(e,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=e.g=n[r];i=ul(o,s,!0,e)&&i}if(o=e.g=t,i=ul(o,s,!0,e)&&i,i=ul(o,s,!1,e)&&i,n)for(r=0;r<n.length;r++)o=e.g=n[r],i=ul(o,s,!1,e)&&i}at.prototype.N=function(){if(at.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)du(n[s]);delete t.g[e],t.h--}}this.J=null};at.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};at.prototype.P=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function ul(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,r=0;r<e.length;++r){var o=e[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Bd(t.i,o),i=a.call(l,s)!==!1&&i}}return i&&!s.defaultPrevented}var $p=re.JSON.stringify;class P${constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function N$(){var t=Up;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class O${constructor(){this.h=this.g=null}add(e,n){const s=Ub.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Ub=new P$(()=>new k$,t=>t.reset());class k${constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function D$(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function x$(t){re.setTimeout(()=>{throw t},0)}let ia,ra=!1,Up=new O$,Bb=()=>{const t=re.Promise.resolve(void 0);ia=()=>{t.then(L$)}};var L$=()=>{for(var t;t=N$();){try{t.h.call(t.g)}catch(n){x$(n)}var e=Ub;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ra=!1};function pu(t,e){at.call(this),this.h=t||1,this.g=e||re,this.j=Ct(this.qb,this),this.l=Date.now()}lt(pu,at);U=pu.prototype;U.ga=!1;U.T=null;U.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_t(this,"tick"),this.ga&&(Bp(this),this.start()))}};U.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Bp(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}U.N=function(){pu.$.N.call(this),Bp(this),delete this.g};function Hp(t,e,n){if(typeof t=="function")n&&(t=Ct(t,n));else if(t&&typeof t.handleEvent=="function")t=Ct(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(t,e||0)}function Hb(t){t.g=Hp(()=>{t.g=null,t.i&&(t.i=!1,Hb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class M$ extends Js{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Hb(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oa(t){Js.call(this),this.h=t,this.g={}}lt(oa,Js);var Iy=[];function jb(t,e,n,s){Array.isArray(n)||(n&&(Iy[0]=n.toString()),n=Iy);for(var i=0;i<n.length;i++){var r=Lb(e,n[i],s||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}}function Wb(t){xp(t.g,function(e,n){this.g.hasOwnProperty(n)&&Mp(e)},t),t.g={}}oa.prototype.N=function(){oa.$.N.call(this),Wb(this)};oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function mu(){this.g=!0}mu.prototype.Ea=function(){this.g=!1};function V$(t,e,n,s,i,r){t.info(function(){if(t.g)if(r)for(var o="",a=r.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&h[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function F$(t,e,n,s,i,r,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+e+`
`+n+`
`+r+" "+o})}function rr(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+U$(t,n)+(s?" "+s:"")})}function $$(t,e){t.info(function(){return"TIMEOUT: "+e})}mu.prototype.info=function(){};function U$(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return $p(n)}catch{return e}}var Bi={},Cy=null;function _u(){return Cy=Cy||new at}Bi.Ta="serverreachability";function qb(t){St.call(this,Bi.Ta,t)}lt(qb,St);function aa(t){const e=_u();_t(e,new qb(e))}Bi.STAT_EVENT="statevent";function Kb(t,e){St.call(this,Bi.STAT_EVENT,t),this.stat=e}lt(Kb,St);function kt(t){const e=_u();_t(e,new Kb(e,t))}Bi.Ua="timingevent";function zb(t,e){St.call(this,Bi.Ua,t),this.size=e}lt(zb,St);function ka(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){t()},e)}var gu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Gb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function jp(){}jp.prototype.h=null;function Sy(t){return t.h||(t.h=t.i())}function Yb(){}var Da={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wp(){St.call(this,"d")}lt(Wp,St);function qp(){St.call(this,"c")}lt(qp,St);var jd;function yu(){}lt(yu,jp);yu.prototype.g=function(){return new XMLHttpRequest};yu.prototype.i=function(){return{}};jd=new yu;function xa(t,e,n,s){this.l=t,this.j=e,this.m=n,this.W=s||1,this.U=new oa(this),this.P=B$,t=Fd?125:void 0,this.V=new pu(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Qb}function Qb(){this.i=null,this.g="",this.h=!1}var B$=45e3,Xb={},Wd={};U=xa.prototype;U.setTimeout=function(t){this.P=t};function qd(t,e,n){t.L=1,t.A=Eu(ds(e)),t.u=n,t.S=!0,Jb(t,null)}function Jb(t,e){t.G=Date.now(),La(t),t.B=ds(t.A);var n=t.B,s=t.W;Array.isArray(s)||(s=[String(s)]),oA(n.i,"t",s),t.o=0,n=t.l.J,t.h=new Qb,t.g=SA(t.l,n?e:null,!t.u),0<t.O&&(t.M=new M$(Ct(t.Pa,t,t.g),t.O)),jb(t.U,t.g,"readystatechange",t.nb),e=t.I?Db(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),aa(),V$(t.j,t.v,t.B,t.m,t.W,t.u)}U.nb=function(t){t=t.target;const e=this.M;e&&$n(t)==3?e.l():this.Pa(t)};U.Pa=function(t){try{if(t==this.g)e:{const u=$n(this.g);var e=this.g.Ia();const h=this.g.da();if(!(3>u)&&(u!=3||Fd||this.g&&(this.h.h||this.g.ja()||Oy(this.g)))){this.J||u!=4||e==7||(e==8||0>=h?aa(3):aa(2)),vu(this);var n=this.g.da();this.ca=n;t:if(Zb(this)){var s=Oy(this.g);t="";var i=s.length,r=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pi(this),Vo(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:r&&e==i-1});s.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,F$(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!na(a)){var c=a;break t}}c=null}if(n=c)rr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Kd(this,n);else{this.i=!1,this.s=3,kt(12),pi(this),Vo(this);break e}}this.S?(eA(this,u,o),Fd&&this.i&&u==3&&(jb(this.U,this.V,"tick",this.mb),this.V.start())):(rr(this.j,this.m,o,null),Kd(this,o)),u==4&&pi(this),this.i&&!this.J&&(u==4?bA(this.l,this):(this.i=!1,La(this)))}else lU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,kt(12)):(this.s=0,kt(13)),pi(this),Vo(this)}}}catch{}finally{}};function Zb(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function eA(t,e,n){let s=!0,i;for(;!t.J&&t.o<n.length;)if(i=H$(t,n),i==Wd){e==4&&(t.s=4,kt(14),s=!1),rr(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Xb){t.s=4,kt(15),rr(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else rr(t.j,t.m,i,null),Kd(t,i);Zb(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,kt(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xp(e),e.M=!0,kt(11))):(rr(t.j,t.m,n,"[Invalid Chunked Response]"),pi(t),Vo(t))}U.mb=function(){if(this.g){var t=$n(this.g),e=this.g.ja();this.o<e.length&&(vu(this),eA(this,t,e),this.i&&t!=4&&La(this))}};function H$(t,e){var n=t.o,s=e.indexOf(`
`,n);return s==-1?Wd:(n=Number(e.substring(n,s)),isNaN(n)?Xb:(s+=1,s+n>e.length?Wd:(e=e.slice(s,s+n),t.o=s+n,e)))}U.cancel=function(){this.J=!0,pi(this)};function La(t){t.Y=Date.now()+t.P,tA(t,t.P)}function tA(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ka(Ct(t.lb,t),e)}function vu(t){t.C&&(re.clearTimeout(t.C),t.C=null)}U.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?($$(this.j,this.B),this.L!=2&&(aa(),kt(17)),pi(this),this.s=2,Vo(this)):tA(this,this.Y-t)};function Vo(t){t.l.H==0||t.J||bA(t.l,t)}function pi(t){vu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Bp(t.V),Wb(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Kd(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||zd(n.i,t))){if(!t.K&&zd(n.i,t)&&n.H==3){try{var s=n.Ja.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)hc(n),Au(n);else break e;Qp(n),kt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ka(Ct(n.ib,n),6e3));if(1>=cA(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else mi(n,11)}else if((t.K||n.g==t)&&hc(n),!na(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const h=c[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));const d=c[5];d!=null&&typeof d=="number"&&0<d&&(s=1.5*d,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const f=t.g;if(f){const _=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_){var r=s.i;r.g||_.indexOf("spdy")==-1&&_.indexOf("quic")==-1&&_.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&(Kp(r,r.h),r.h=null))}if(s.F){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(s.Da=g,Ue(s.I,s.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=t;if(s.wa=CA(s,s.J?s.pa:null,s.Y),o.K){uA(s.i,o);var a=o,l=s.L;l&&a.setTimeout(l),a.C&&(vu(a),La(a)),s.g=o}else TA(s);0<n.j.length&&Iu(n)}else c[0]!="stop"&&c[0]!="close"||mi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?mi(n,7):Yp(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}aa(4)}catch{}}function j$(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(uu(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function W$(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(uu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function nA(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(uu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=W$(t),s=j$(t),i=s.length,r=0;r<i;r++)e.call(void 0,s[r],n&&n[r],t)}var sA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q$(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),i=null;if(0<=s){var r=t[n].substring(0,s);i=t[n].substring(s+1)}else r=t[n];e(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function wi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wi){this.h=t.h,cc(this,t.j),this.s=t.s,this.g=t.g,uc(this,t.m),this.l=t.l;var e=t.i,n=new la;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Ry(this,n),this.o=t.o}else t&&(e=String(t).match(sA))?(this.h=!1,cc(this,e[1]||"",!0),this.s=Eo(e[2]||""),this.g=Eo(e[3]||"",!0),uc(this,e[4]),this.l=Eo(e[5]||"",!0),Ry(this,e[6]||"",!0),this.o=Eo(e[7]||"")):(this.h=!1,this.i=new la(null,this.h))}wi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(To(e,Py,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(To(e,Py,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(To(n,n.charAt(0)=="/"?G$:z$,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",To(n,Q$)),t.join("")};function ds(t){return new wi(t)}function cc(t,e,n){t.j=n?Eo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function uc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ry(t,e,n){e instanceof la?(t.i=e,X$(t.i,t.h)):(n||(e=To(e,Y$)),t.i=new la(e,t.h))}function Ue(t,e,n){t.i.set(e,n)}function Eu(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Eo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function To(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,K$),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function K$(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Py=/[#\/\?@]/g,z$=/[#\?:]/g,G$=/[#\?]/g,Y$=/[#\?@]/g,Q$=/#/g;function la(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Zs(t){t.g||(t.g=new Map,t.h=0,t.i&&q$(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}U=la.prototype;U.add=function(t,e){Zs(this),this.i=null,t=Jr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function iA(t,e){Zs(t),e=Jr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function rA(t,e){return Zs(t),e=Jr(t,e),t.g.has(e)}U.forEach=function(t,e){Zs(this),this.g.forEach(function(n,s){n.forEach(function(i){t.call(e,i,s,this)},this)},this)};U.ta=function(){Zs(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const i=t[s];for(let r=0;r<i.length;r++)n.push(e[s])}return n};U.Z=function(t){Zs(this);let e=[];if(typeof t=="string")rA(this,t)&&(e=e.concat(this.g.get(Jr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};U.set=function(t,e){return Zs(this),this.i=null,t=Jr(this,t),rA(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};U.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function oA(t,e,n){iA(t,e),0<n.length&&(t.i=null,t.g.set(Jr(t,e),kp(n)),t.h+=n.length)}U.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),t.push(i)}}return this.i=t.join("&")};function Jr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function X$(t,e){e&&!t.j&&(Zs(t),t.i=null,t.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(iA(this,s),oA(this,i,n))},t)),t.j=e}var J$=class{constructor(t,e){this.g=t,this.map=e}};function aA(t){this.l=t||Z$,re.PerformanceNavigationTiming?(t=re.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Z$=10;function lA(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function cA(t){return t.h?1:t.g?t.g.size:0}function zd(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Kp(t,e){t.g?t.g.add(e):t.h=e}function uA(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}aA.prototype.cancel=function(){if(this.i=hA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function hA(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return kp(t.i)}var eU=class{stringify(t){return re.JSON.stringify(t,void 0)}parse(t){return re.JSON.parse(t,void 0)}};function tU(){this.g=new eU}function nU(t,e,n){const s=n||"";try{nA(t,function(i,r){let o=i;Na(i)&&(o=$p(i)),e.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw e.push(s+"type="+encodeURIComponent("_badmap")),i}}function sU(t,e){const n=new mu;if(re.Image){const s=new Image;s.onload=cl(hl,n,s,"TestLoadImage: loaded",!0,e),s.onerror=cl(hl,n,s,"TestLoadImage: error",!1,e),s.onabort=cl(hl,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=cl(hl,n,s,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function hl(t,e,n,s,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(s)}catch{}}function Tu(t){this.l=t.ec||null,this.j=t.ob||!1}lt(Tu,jp);Tu.prototype.g=function(){return new wu(this.l,this.j)};Tu.prototype.i=function(t){return function(){return t}}({});function wu(t,e){at.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}lt(wu,at);var zp=0;U=wu.prototype;U.open=function(t,e){if(this.readyState!=zp)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ca(this)};U.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};U.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ma(this)),this.readyState=zp};U.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dA(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function dA(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}U.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ma(this):ca(this),this.readyState==3&&dA(this)}};U.Za=function(t){this.g&&(this.response=this.responseText=t,Ma(this))};U.Ya=function(t){this.g&&(this.response=t,Ma(this))};U.ka=function(){this.g&&Ma(this)};function Ma(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ca(t)}U.setRequestHeader=function(t,e){this.v.append(t,e)};U.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};U.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ca(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var iU=re.JSON.parse;function Ge(t){at.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=fA,this.L=this.M=!1}lt(Ge,at);var fA="",rU=/^https?$/i,oU=["POST","PUT"];U=Ge.prototype;U.Oa=function(t){this.M=t};U.ha=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jd.g(),this.C=this.u?Sy(this.u):Sy(jd),this.g.onreadystatechange=Ct(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(r){Ny(this,r);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=re.FormData&&t instanceof re.FormData,!(0<=Pb(oU,e))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{_A(this),0<this.B&&((this.L=aU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ct(this.ua,this)):this.A=Hp(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(r){Ny(this,r)}};function aU(t){return Dr&&typeof t.timeout=="number"&&t.ontimeout!==void 0}U.ua=function(){typeof Op<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_t(this,"timeout"),this.abort(8))};function Ny(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,pA(t),bu(t)}function pA(t){t.F||(t.F=!0,_t(t,"complete"),_t(t,"error"))}U.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,_t(this,"complete"),_t(this,"abort"),bu(this))};U.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bu(this,!0)),Ge.$.N.call(this)};U.La=function(){this.s||(this.G||this.v||this.l?mA(this):this.kb())};U.kb=function(){mA(this)};function mA(t){if(t.h&&typeof Op<"u"&&(!t.C[1]||$n(t)!=4||t.da()!=2)){if(t.v&&$n(t)==4)Hp(t.La,0,t);else if(_t(t,"readystatechange"),$n(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=o===0){var i=String(t.I).match(sA)[1]||null;!i&&re.self&&re.self.location&&(i=re.self.location.protocol.slice(0,-1)),s=!rU.test(i?i.toLowerCase():"")}n=s}if(n)_t(t,"complete"),_t(t,"success");else{t.m=6;try{var r=2<$n(t)?t.g.statusText:""}catch{r=""}t.j=r+" ["+t.da()+"]",pA(t)}}finally{bu(t)}}}}function bu(t,e){if(t.g){_A(t);const n=t.g,s=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||_t(t,"ready");try{n.onreadystatechange=s}catch{}}}function _A(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(re.clearTimeout(t.A),t.A=null)}U.isActive=function(){return!!this.g};function $n(t){return t.g?t.g.readyState:0}U.da=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}};U.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};U.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),iU(e)}};function Oy(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case fA:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function lU(t){const e={};t=(t.g&&2<=$n(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<t.length;s++){if(na(t[s]))continue;var n=D$(t[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=e[i]||[];e[i]=r,r.push(n)}C$(e,function(s){return s.join(", ")})}U.Ia=function(){return this.m};U.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function gA(t){let e="";return xp(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Gp(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=gA(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ue(t,e,n))}function po(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function yA(t){this.Ga=0,this.j=[],this.l=new mu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=po("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=po("baseRetryDelayMs",5e3,t),this.hb=po("retryDelaySeedMs",1e4,t),this.eb=po("forwardChannelMaxRetries",2,t),this.xa=po("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new aA(t&&t.concurrentRequestLimit),this.Ja=new tU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}U=yA.prototype;U.ra=8;U.H=1;function Yp(t){if(vA(t),t.H==3){var e=t.W++,n=ds(t.I);if(Ue(n,"SID",t.K),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Va(t,n),e=new xa(t,t.l,e),e.L=2,e.A=Eu(ds(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&re.Image&&(new Image().src=e.A,n=!0),n||(e.g=SA(e.l,null),e.g.ha(e.A)),e.G=Date.now(),La(e)}IA(t)}function Au(t){t.g&&(Xp(t),t.g.cancel(),t.g=null)}function vA(t){Au(t),t.u&&(re.clearTimeout(t.u),t.u=null),hc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&re.clearTimeout(t.m),t.m=null)}function Iu(t){if(!lA(t.i)&&!t.m){t.m=!0;var e=t.Na;ia||Bb(),ra||(ia(),ra=!0),Up.add(e,t),t.C=0}}function cU(t,e){return cA(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ka(Ct(t.Na,t,e),AA(t,t.C)),t.C++,!0)}U.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new xa(this,this.l,t);let r=this.s;if(this.U&&(r?(r=Db(r),xb(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=EA(this,i,e),n=ds(this.I),Ue(n,"RID",t),Ue(n,"CVER",22),this.F&&Ue(n,"X-HTTP-Session-Id",this.F),Va(this,n),r&&(this.O?e="headers="+encodeURIComponent(String(gA(r)))+"&"+e:this.o&&Gp(n,this.o,r)),Kp(this.i,i),this.bb&&Ue(n,"TYPE","init"),this.P?(Ue(n,"$req",e),Ue(n,"SID","null"),i.aa=!0,qd(i,n,null)):qd(i,n,e),this.H=2}}else this.H==3&&(t?ky(this,t):this.j.length==0||lA(this.i)||ky(this))};function ky(t,e){var n;e?n=e.m:n=t.W++;const s=ds(t.I);Ue(s,"SID",t.K),Ue(s,"RID",n),Ue(s,"AID",t.V),Va(t,s),t.o&&t.s&&Gp(s,t.o,t.s),n=new xa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=EA(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Kp(t.i,n),qd(n,s,e)}function Va(t,e){t.na&&xp(t.na,function(n,s){Ue(e,s,n)}),t.h&&nA({},function(n,s){Ue(e,s,n)})}function EA(t,e,n){n=Math.min(t.j.length,n);var s=t.h?Ct(t.h.Va,t.h,t):null;e:{var i=t.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let l=0;l<n;l++){let c=i[l].g;const u=i[l].map;if(c-=r,0>c)r=Math.max(0,i[l].g-100),a=!1;else try{nU(u,o,"req"+c+"_")}catch{s&&s(u)}}if(a){s=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,s}function TA(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ia||Bb(),ra||(ia(),ra=!0),Up.add(e,t),t.A=0}}function Qp(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ka(Ct(t.Ma,t),AA(t,t.A)),t.A++,!0)}U.Ma=function(){if(this.u=null,wA(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ka(Ct(this.jb,this),t)}};U.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,kt(10),Au(this),wA(this))};function Xp(t){t.B!=null&&(re.clearTimeout(t.B),t.B=null)}function wA(t){t.g=new xa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=ds(t.wa);Ue(e,"RID","rpc"),Ue(e,"SID",t.K),Ue(e,"AID",t.V),Ue(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ue(e,"TO",t.qa),Ue(e,"TYPE","xmlhttp"),Va(t,e),t.o&&t.s&&Gp(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Eu(ds(e)),n.u=null,n.S=!0,Jb(n,t)}U.ib=function(){this.v!=null&&(this.v=null,Au(this),Qp(this),kt(19))};function hc(t){t.v!=null&&(re.clearTimeout(t.v),t.v=null)}function bA(t,e){var n=null;if(t.g==e){hc(t),Xp(t),t.g=null;var s=2}else if(zd(t.i,e))n=e.F,uA(t.i,e),s=1;else return;if(t.H!=0){if(e.i)if(s==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;s=_u(),_t(s,new zb(s,n)),Iu(t)}else TA(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(s==1&&cU(t,e)||s==2&&Qp(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:mi(t,5);break;case 4:mi(t,10);break;case 3:mi(t,6);break;default:mi(t,2)}}}function AA(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function mi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var s=Ct(t.pb,t);n||(n=new wi("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||cc(n,"https"),Eu(n)),sU(n.toString(),s)}else kt(2);t.H=0,t.h&&t.h.za(e),IA(t),vA(t)}U.pb=function(t){t?(this.l.info("Successfully pinged google.com"),kt(2)):(this.l.info("Failed to ping google.com"),kt(1))};function IA(t){if(t.H=0,t.ma=[],t.h){const e=hA(t.i);(e.length!=0||t.j.length!=0)&&(wy(t.ma,e),wy(t.ma,t.j),t.i.i.length=0,kp(t.j),t.j.length=0),t.h.ya()}}function CA(t,e,n){var s=n instanceof wi?ds(n):new wi(n);if(s.g!="")e&&(s.g=e+"."+s.g),uc(s,s.m);else{var i=re.location;s=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var r=new wi(null);s&&cc(r,s),e&&(r.g=e),i&&uc(r,i),n&&(r.l=n),s=r}return n=t.F,e=t.Da,n&&e&&Ue(s,n,e),Ue(s,"VER",t.ra),Va(t,s),s}function SA(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new Tu({ob:n})):new Ge(t.va),e.Oa(t.J),e}U.isActive=function(){return!!this.h&&this.h.isActive(this)};function RA(){}U=RA.prototype;U.Ba=function(){};U.Aa=function(){};U.za=function(){};U.ya=function(){};U.isActive=function(){return!0};U.Va=function(){};function dc(){if(Dr&&!(10<=Number(w$)))throw Error("Environmental error: no available transport.")}dc.prototype.g=function(t,e){return new Zt(t,e)};function Zt(t,e){at.call(this),this.g=new yA(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!na(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!na(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Zr(this)}lt(Zt,at);Zt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;kt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=CA(t,null,t.Y),Iu(t)};Zt.prototype.close=function(){Yp(this.g)};Zt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=$p(t),t=n);e.j.push(new J$(e.fb++,t)),e.H==3&&Iu(e)};Zt.prototype.N=function(){this.g.h=null,delete this.j,Yp(this.g),delete this.g,Zt.$.N.call(this)};function PA(t){Wp.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}lt(PA,Wp);function NA(){qp.call(this),this.status=1}lt(NA,qp);function Zr(t){this.g=t}lt(Zr,RA);Zr.prototype.Ba=function(){_t(this.g,"a")};Zr.prototype.Aa=function(t){_t(this.g,new PA(t))};Zr.prototype.za=function(t){_t(this.g,new NA)};Zr.prototype.ya=function(){_t(this.g,"b")};function uU(){this.blockSize=-1}function Rn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}lt(Rn,uU);Rn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Dh(t,e,n){n||(n=0);var s=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)s[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var r=t.g[3],o=e+(r^n&(i^r))+s[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[1]+3905402710&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[5]+1200080426&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[9]+2336552879&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(r^n&(i^r))+s[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=r+(i^e&(n^i))+s[13]+4254626195&4294967295,r=e+(o<<12&4294967295|o>>>20),o=i+(n^r&(e^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(e^i&(r^e))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^r&(n^i))+s[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[6]+3225465664&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[10]+38016083&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[14]+3275163606&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^r&(n^i))+s[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(e^n))+s[2]+4243563512&4294967295,r=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(r^e))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^e&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^r)+s[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[8]+2272392833&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[4]+1272893353&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[0]+3936430074&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^r)+s[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=r+(e^n^i)+s[12]+3873151461&4294967295,r=e+(o<<11&4294967295|o>>>21),o=i+(r^e^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^e)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~r))+s[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[7]+1126891415&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[3]+2399980690&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[15]+4264355552&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~r))+s[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=r+(n^(e|~i))+s[11]+3174756917&4294967295,r=e+(o<<10&4294967295|o>>>22),o=i+(e^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~e))+s[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+r&4294967295}Rn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,s=this.m,i=this.h,r=0;r<e;){if(i==0)for(;r<=n;)Dh(this,t,r),r+=this.blockSize;if(typeof t=="string"){for(;r<e;)if(s[i++]=t.charCodeAt(r++),i==this.blockSize){Dh(this,s),i=0;break}}else for(;r<e;)if(s[i++]=t[r++],i==this.blockSize){Dh(this,s),i=0;break}}this.h=i,this.i+=e};Rn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var s=0;32>s;s+=8)t[n++]=this.g[e]>>>s&255;return t};function Oe(t,e){this.h=e;for(var n=[],s=!0,i=t.length-1;0<=i;i--){var r=t[i]|0;s&&r==e||(n[i]=r,s=!1)}this.g=n}var hU={};function Jp(t){return-128<=t&&128>t?v$(t,function(e){return new Oe([e|0],0>e?-1:0)}):new Oe([t|0],0>t?-1:0)}function Un(t){if(isNaN(t)||!isFinite(t))return _r;if(0>t)return dt(Un(-t));for(var e=[],n=1,s=0;t>=n;s++)e[s]=t/n|0,n*=Gd;return new Oe(e,0)}function OA(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return dt(OA(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Un(Math.pow(e,8)),s=_r,i=0;i<t.length;i+=8){var r=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+r),e);8>r?(r=Un(Math.pow(e,r)),s=s.R(r).add(Un(o))):(s=s.R(n),s=s.add(Un(o)))}return s}var Gd=4294967296,_r=Jp(0),Yd=Jp(1),Dy=Jp(16777216);U=Oe.prototype;U.ea=function(){if(tn(this))return-dt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var s=this.D(n);t+=(0<=s?s:Gd+s)*e,e*=Gd}return t};U.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(is(this))return"0";if(tn(this))return"-"+dt(this).toString(t);for(var e=Un(Math.pow(t,6)),n=this,s="";;){var i=pc(n,e).g;n=fc(n,i.R(e));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,is(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};U.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function is(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function tn(t){return t.h==-1}U.X=function(t){return t=fc(this,t),tn(t)?-1:is(t)?0:1};function dt(t){for(var e=t.g.length,n=[],s=0;s<e;s++)n[s]=~t.g[s];return new Oe(n,~t.h).add(Yd)}U.abs=function(){return tn(this)?dt(this):this};U.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0,i=0;i<=e;i++){var r=s+(this.D(i)&65535)+(t.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new Oe(n,n[n.length-1]&-2147483648?-1:0)};function fc(t,e){return t.add(dt(e))}U.R=function(t){if(is(this)||is(t))return _r;if(tn(this))return tn(t)?dt(this).R(dt(t)):dt(dt(this).R(t));if(tn(t))return dt(this.R(dt(t)));if(0>this.X(Dy)&&0>t.X(Dy))return Un(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],s=0;s<2*e;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<t.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*s+2*i]+=o*l,dl(n,2*s+2*i),n[2*s+2*i+1]+=r*l,dl(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,dl(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,dl(n,2*s+2*i+2)}for(s=0;s<e;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=e;s<2*e;s++)n[s]=0;return new Oe(n,0)};function dl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function mo(t,e){this.g=t,this.h=e}function pc(t,e){if(is(e))throw Error("division by zero");if(is(t))return new mo(_r,_r);if(tn(t))return e=pc(dt(t),e),new mo(dt(e.g),dt(e.h));if(tn(e))return e=pc(t,dt(e)),new mo(dt(e.g),e.h);if(30<t.g.length){if(tn(t)||tn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Yd,s=e;0>=s.X(t);)n=xy(n),s=xy(s);var i=Gi(n,1),r=Gi(s,1);for(s=Gi(s,2),n=Gi(n,2);!is(s);){var o=r.add(s);0>=o.X(t)&&(i=i.add(n),r=o),s=Gi(s,1),n=Gi(n,1)}return e=fc(t,i.R(e)),new mo(i,e)}for(i=_r;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=Un(n),o=r.R(e);tn(o)||0<o.X(t);)n-=s,r=Un(n),o=r.R(e);is(r)&&(r=Yd),i=i.add(r),t=fc(t,o)}return new mo(i,t)}U.gb=function(t){return pc(this,t).h};U.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)&t.D(s);return new Oe(n,this.h&t.h)};U.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)|t.D(s);return new Oe(n,this.h|t.h)};U.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],s=0;s<e;s++)n[s]=this.D(s)^t.D(s);return new Oe(n,this.h^t.h)};function xy(t){for(var e=t.g.length+1,n=[],s=0;s<e;s++)n[s]=t.D(s)<<1|t.D(s-1)>>>31;return new Oe(n,t.h)}function Gi(t,e){var n=e>>5;e%=32;for(var s=t.g.length-n,i=[],r=0;r<s;r++)i[r]=0<e?t.D(r+n)>>>e|t.D(r+n+1)<<32-e:t.D(r+n);return new Oe(i,t.h)}dc.prototype.createWebChannel=dc.prototype.g;Zt.prototype.send=Zt.prototype.u;Zt.prototype.open=Zt.prototype.m;Zt.prototype.close=Zt.prototype.close;gu.NO_ERROR=0;gu.TIMEOUT=8;gu.HTTP_ERROR=6;Gb.COMPLETE="complete";Yb.EventType=Da;Da.OPEN="a";Da.CLOSE="b";Da.ERROR="c";Da.MESSAGE="d";at.prototype.listen=at.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Rn.prototype.digest=Rn.prototype.l;Rn.prototype.reset=Rn.prototype.reset;Rn.prototype.update=Rn.prototype.j;Oe.prototype.add=Oe.prototype.add;Oe.prototype.multiply=Oe.prototype.R;Oe.prototype.modulo=Oe.prototype.gb;Oe.prototype.compare=Oe.prototype.X;Oe.prototype.toNumber=Oe.prototype.ea;Oe.prototype.toString=Oe.prototype.toString;Oe.prototype.getBits=Oe.prototype.D;Oe.fromNumber=Un;Oe.fromString=OA;var dU=function(){return new dc},fU=function(){return _u()},xh=gu,pU=Gb,mU=Bi,Ly={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fl=Yb,_U=Ge,gU=Rn,gr=Oe;const My="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vt.UNAUTHENTICATED=new vt(null),vt.GOOGLE_CREDENTIALS=new vt("google-credentials-uid"),vt.FIRST_PARTY=new vt("first-party-uid"),vt.MOCK_USER=new vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new ba("@firebase/firestore");function _o(){return Ni.logLevel}function K(t,...e){if(Ni.logLevel<=pe.DEBUG){const n=e.map(Zp);Ni.debug(`Firestore (${eo}): ${t}`,...n)}}function fs(t,...e){if(Ni.logLevel<=pe.ERROR){const n=e.map(Zp);Ni.error(`Firestore (${eo}): ${t}`,...n)}}function xr(t,...e){if(Ni.logLevel<=pe.WARN){const n=e.map(Zp);Ni.warn(`Firestore (${eo}): ${t}`,...n)}}function Zp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${eo}) INTERNAL ASSERTION FAILED: `+t;throw fs(e),new Error(e)}function Le(t,e){t||se()}function le(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class X extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vt.UNAUTHENTICATED))}shutdown(){}}class vU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EU{constructor(e){this.t=e,this.currentUser=vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const i=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let r=new us;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new us,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=r;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new us)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string"),new kA(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new vt(e)}}class TU{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wU{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new TU(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bU{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AU{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const s=r=>{r.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>s(r))};const i=r=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new bU(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const i=IU(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=e.charAt(i[r]%e.length))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Lr(t,e,n){return t.length===e.length&&t.every((s,i)=>n(s,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new X(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new X(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new X(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new X(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new et(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new et(0,0))}static max(){return new oe(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,s){n===void 0?n=0:n>e.length&&se(),s===void 0?s=e.length-n:s>e.length-n&&se(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ua.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ua?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let i=0;i<s;i++){const r=e.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends ua{construct(e,n,s){return new je(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new X(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new je(n)}static emptyPath(){return new je([])}}const CU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends ua{construct(e,n,s){return new mt(e,n,s)}static isValidIdentifier(e){return CU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new X(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new X(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new X(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new X(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(je.fromString(e))}static fromName(e){return new te(je.fromString(e).popFirst(5))}static empty(){return new te(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new je(e.slice()))}}function SU(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(s===1e9?new et(n+1,0):new et(n,s));return new Ks(i,te.empty(),e)}function RU(t){return new Ks(t.readTime,t.key,-1)}class Ks{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ks(oe.min(),te.empty(),-1)}static max(){return new Ks(oe.max(),te.empty(),-1)}}function PU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==NU)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,s)=>{n(e)})}static reject(e){return new k((n,s)=>{s(e)})}static waitFor(e){return new k((n,s)=>{let i=0,r=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},l=>s(l))}),o=!0,r===i&&n()})}static or(e){let n=k.resolve(!1);for(const s of e)n=n.next(i=>i?k.resolve(i):s());return n}static forEach(e,n){const s=[];return e.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(e,n){return new k((s,i)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===r&&s(o)},u=>i(u))}})}static doWhile(e,n){return new k((s,i)=>{const r=()=>{e()===!0?n().next(()=>{r()},i):s()};r()})}}function $a(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.se(s),this.oe=s=>n.writeSequenceNumber(s))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}em._e=-1;function Cu(t){return t==null}function mc(t){return t===0&&1/t==-1/0}function kU(t){return typeof t=="number"&&Number.isInteger(t)&&!mc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n){this.comparator=e,this.root=n||ht.EMPTY}insert(e,n){return new qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ht.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ht.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pl(this.root,e,this.comparator,!0)}}class pl{constructor(e,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?s(e.key,n):1,n&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ht{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??ht.RED,this.left=i??ht.EMPTY,this.right=r??ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,i,r){return new ht(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ht.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ht.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}ht.EMPTY=null,ht.RED=!0,ht.BLACK=!1;ht.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,s,i,r){return this}insert(e,n,s){return new ht(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gt(this.comparator);return n.data=e,n}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new gt(mt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Lr(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new LA("Invalid base64 string: "+r):r}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const DU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(t){if(Le(!!t),typeof t=="string"){let e=0;const n=DU.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nm(t){const e=t.mapValue.fields.__previous_value__;return tm(e)?nm(e):e}function ha(t){const e=zs(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n,s,i,r,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class da{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new da("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ki(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tm(t)?4:LU(t)?9007199254740991:10:se()}function Qn(t,e){if(t===e)return!0;const n=ki(t);if(n!==ki(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ha(t).isEqual(ha(e));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=zs(i.timestampValue),a=zs(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,r){return Oi(i.bytesValue).isEqual(Oi(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,r){return Ze(i.geoPointValue.latitude)===Ze(r.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(r.geoPointValue.longitude)}(t,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Ze(i.integerValue)===Ze(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=Ze(i.doubleValue),a=Ze(r.doubleValue);return o===a?mc(o)===mc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Lr(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(Vy(o)!==Vy(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Qn(o[l],a[l])))return!1;return!0}(t,e);default:return se()}}function fa(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function Mr(t,e){if(t===e)return 0;const n=ki(t),s=ki(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Ze(r.integerValue||r.doubleValue),l=Ze(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return $y(t.timestampValue,e.timestampValue);case 4:return $y(ha(t),ha(e));case 5:return Ce(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Oi(r),l=Oi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ce(a[c],l[c]);if(u!==0)return u}return Ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ce(Ze(r.latitude),Ze(o.latitude));return a!==0?a:Ce(Ze(r.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,o){const a=r.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Mr(a[c],l[c]);if(u)return u}return Ce(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,o){if(r===ml.mapValue&&o===ml.mapValue)return 0;if(r===ml.mapValue)return 1;if(o===ml.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=Ce(l[h],u[h]);if(d!==0)return d;const f=Mr(a[l[h]],c[u[h]]);if(f!==0)return f}return Ce(l.length,u.length)}(t.mapValue,e.mapValue);default:throw se()}}function $y(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=zs(t),s=zs(e),i=Ce(n.seconds,s.seconds);return i!==0?i:Ce(n.nanos,s.nanos)}function Vr(t){return Qd(t)}function Qd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const s=zs(n);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=Qd(r);return s+"]"}(t.arrayValue):"mapValue"in t?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${Qd(n.fields[o])}`;return i+"}"}(t.mapValue):se()}function Xd(t){return!!t&&"integerValue"in t}function sm(t){return!!t&&"arrayValue"in t}function Uy(t){return!!t&&"nullValue"in t}function By(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function Fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Fo(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function LU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fo(n)}setAll(e){let n=mt.emptyPath(),s={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=Fo(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=n.mapValue.fields[e.get(s)];Pl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,s){to(n,(i,r)=>e[i]=r);for(const i of s)delete e[i]}clone(){return new nn(Fo(this.value))}}function MA(t){const e=[];return to(t.fields,(n,s)=>{const i=new mt([n]);if(Pl(s)){const r=MA(s.mapValue).fields;if(r.length===0)e.push(i);else for(const o of r)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,s,i,r,o,a){this.key=e,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new bt(e,0,oe.min(),oe.min(),oe.min(),nn.empty(),0)}static newFoundDocument(e,n,s,i){return new bt(e,1,n,oe.min(),s,i,0)}static newNoDocument(e,n){return new bt(e,2,n,oe.min(),oe.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,oe.min(),oe.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.position=e,this.inclusive=n}}function Hy(t,e,n){let s=0;for(let i=0;i<t.position.length;i++){const r=e[i],o=t.position[i];if(r.field.isKeyField()?s=te.comparator(te.fromName(o.referenceValue),n.key):s=Mr(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function jy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n="asc"){this.field=e,this.dir=n}}function MU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{}class tt extends VA{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new FU(e,n,s):n==="array-contains"?new BU(e,s):n==="in"?new HU(e,s):n==="not-in"?new jU(e,s):n==="array-contains-any"?new WU(e,s):new tt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new $U(e,s):new UU(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mr(n,this.value)):n!==null&&ki(this.value)===ki(n)&&this.matchesComparison(Mr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xn extends VA{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Xn(e,n)}matches(e){return FA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function FA(t){return t.op==="and"}function $A(t){return VU(t)&&FA(t)}function VU(t){for(const e of t.filters)if(e instanceof Xn)return!1;return!0}function Jd(t){if(t instanceof tt)return t.field.canonicalString()+t.op.toString()+Vr(t.value);if($A(t))return t.filters.map(e=>Jd(e)).join(",");{const e=t.filters.map(n=>Jd(n)).join(",");return`${t.op}(${e})`}}function UA(t,e){return t instanceof tt?function(s,i){return i instanceof tt&&s.op===i.op&&s.field.isEqual(i.field)&&Qn(s.value,i.value)}(t,e):t instanceof Xn?function(s,i){return i instanceof Xn&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&UA(o,i.filters[a]),!0):!1}(t,e):void se()}function BA(t){return t instanceof tt?function(n){return`${n.field.canonicalString()} ${n.op} ${Vr(n.value)}`}(t):t instanceof Xn?function(n){return n.op.toString()+" {"+n.getFilters().map(BA).join(" ,")+"}"}(t):"Filter"}class FU extends tt{constructor(e,n,s){super(e,n,s),this.key=te.fromName(s.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class $U extends tt{constructor(e,n){super(e,"in",n),this.keys=HA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class UU extends tt{constructor(e,n){super(e,"not-in",n),this.keys=HA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HA(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>te.fromName(s.referenceValue))}class BU extends tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sm(n)&&fa(n.arrayValue,this.value)}}class HU extends tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fa(this.value.arrayValue,n)}}class jU extends tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!fa(this.value.arrayValue,n)}}class WU extends tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>fa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e,n=null,s=[],i=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ce=null}}function Wy(t,e=null,n=[],s=[],i=null,r=null,o=null){return new qU(t,e,n,s,i,r,o)}function im(t){const e=le(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Jd(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Cu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Vr(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Vr(s)).join(",")),e.ce=n}return e.ce}function rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!MU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!UA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jy(t.startAt,e.startAt)&&jy(t.endAt,e.endAt)}function Zd(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n=null,s=[],i=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function KU(t,e,n,s,i,r,o,a){return new Su(t,e,n,s,i,r,o,a)}function Ru(t){return new Su(t)}function qy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zU(t){return t.collectionGroup!==null}function $o(t){const e=le(t);if(e.le===null){e.le=[];const n=new Set;for(const r of e.explicitOrderBy)e.le.push(r),n.add(r.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new gt(mt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.le.push(new gc(r,s))}),n.has(mt.keyField().canonicalString())||e.le.push(new gc(mt.keyField(),s))}return e.le}function jn(t){const e=le(t);return e.he||(e.he=GU(e,$o(t))),e.he}function GU(t,e){if(t.limitType==="F")return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new gc(i.field,r)});const n=t.endAt?new _c(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new _c(t.startAt.position,t.startAt.inclusive):null;return Wy(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function ef(t,e,n){return new Su(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pu(t,e){return rm(jn(t),jn(e))&&t.limitType===e.limitType}function jA(t){return`${im(jn(t))}|lt:${t.limitType}`}function Zi(t){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>BA(i)).join(", ")}]`),Cu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>Vr(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>Vr(i)).join(",")),`Target(${s})`}(jn(t))}; limitType=${t.limitType})`}function Nu(t,e){return e.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):te.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(t,e)&&function(s,i){for(const r of $o(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(t,e)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(t,e)&&function(s,i){return!(s.startAt&&!function(o,a,l){const c=Hy(o,a,l);return o.inclusive?c<=0:c<0}(s.startAt,$o(s),i)||s.endAt&&!function(o,a,l){const c=Hy(o,a,l);return o.inclusive?c>=0:c>0}(s.endAt,$o(s),i))}(t,e)}function YU(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WA(t){return(e,n)=>{let s=!1;for(const i of $o(t)){const r=QU(i,e,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function QU(t,e,n){const s=t.field.isKeyField()?te.comparator(e.key,n.key):function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?Mr(l,c):se()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,s)=>{for(const[i,r]of s)e(i,r)})}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=new qe(te.comparator);function ps(){return XU}const qA=new qe(te.comparator);function wo(...t){let e=qA;for(const n of t)e=e.insert(n.key,n);return e}function KA(t){let e=qA;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function _i(){return Uo()}function zA(){return Uo()}function Uo(){return new no(t=>t.toString(),(t,e)=>t.isEqual(e))}const JU=new qe(te.comparator),ZU=new gt(te.comparator);function me(...t){let e=ZU;for(const n of t)e=e.add(n);return e}const e4=new gt(Ce);function t4(){return e4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function YA(t){return{integerValue:""+t}}function n4(t,e){return kU(e)?YA(e):GA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this._=void 0}}function s4(t,e,n){return t instanceof yc?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&tm(r)&&(r=nm(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,e):t instanceof pa?XA(t,e):t instanceof ma?JA(t,e):function(i,r){const o=QA(i,r),a=Ky(o)+Ky(i.Ie);return Xd(o)&&Xd(i.Ie)?YA(a):GA(i.serializer,a)}(t,e)}function i4(t,e,n){return t instanceof pa?XA(t,e):t instanceof ma?JA(t,e):n}function QA(t,e){return t instanceof vc?function(s){return Xd(s)||function(r){return!!r&&"doubleValue"in r}(s)}(e)?e:{integerValue:0}:null}class yc extends Ou{}class pa extends Ou{constructor(e){super(),this.elements=e}}function XA(t,e){const n=ZA(e);for(const s of t.elements)n.some(i=>Qn(i,s))||n.push(s);return{arrayValue:{values:n}}}class ma extends Ou{constructor(e){super(),this.elements=e}}function JA(t,e){let n=ZA(e);for(const s of t.elements)n=n.filter(i=>!Qn(i,s));return{arrayValue:{values:n}}}class vc extends Ou{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Ky(t){return Ze(t.integerValue||t.doubleValue)}function ZA(t){return sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function r4(t,e){return t.field.isEqual(e.field)&&function(s,i){return s instanceof pa&&i instanceof pa||s instanceof ma&&i instanceof ma?Lr(s.elements,i.elements,Qn):s instanceof vc&&i instanceof vc?Qn(s.Ie,i.Ie):s instanceof yc&&i instanceof yc}(t.transform,e.transform)}class o4{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ku{}function eI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new om(t.key,Wn.none()):new Ua(t.key,t.data,Wn.none());{const n=t.data,s=nn.empty();let i=new gt(mt.comparator);for(let r of e.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new Hi(t.key,s,new vn(i.toArray()),Wn.none())}}function a4(t,e,n){t instanceof Ua?function(i,r,o){const a=i.value.clone(),l=Gy(i.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(i,r,o){if(!Nl(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Gy(i.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(tI(i)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Bo(t,e,n,s){return t instanceof Ua?function(r,o,a,l){if(!Nl(r.precondition,o))return a;const c=r.value.clone(),u=Yy(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,s):t instanceof Hi?function(r,o,a,l){if(!Nl(r.precondition,o))return a;const c=Yy(r.fieldTransforms,l,o),u=o.data;return u.setAll(tI(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(t,e,n,s):function(r,o,a){return Nl(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function l4(t,e){let n=null;for(const s of t.fieldTransforms){const i=e.data.field(s.field),r=QA(s.transform,i||null);r!=null&&(n===null&&(n=nn.empty()),n.set(s.field,r))}return n||null}function zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Lr(s,i,(r,o)=>r4(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ua extends ku{constructor(e,n,s,i=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends ku{constructor(e,n,s,i,r=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function tI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function Gy(t,e,n){const s=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const r=t[i],o=r.transform,a=e.data.field(r.field);s.set(r.field,i4(o,a,n[i]))}return s}function Yy(t,e,n){const s=new Map;for(const i of t){const r=i.transform,o=n.data.field(i.field);s.set(i.field,s4(r,o,e))}return s}class om extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class c4 extends ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,s,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(e.key)&&a4(r,e,s[i])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Bo(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Bo(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zA();return this.mutations.forEach(i=>{const r=e.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const l=eI(o,a);l!==null&&s.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&Lr(this.mutations,e.mutations,(n,s)=>zy(n,s))&&Lr(this.baseMutations,e.baseMutations,(n,s)=>zy(n,s))}}class am{constructor(e,n,s,i){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(e,n,s){Le(e.mutations.length===s.length);let i=function(){return JU}();const r=e.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new am(e,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,Ee;function f4(t){switch(t){default:return se();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function nI(t){if(t===void 0)return fs("GRPC error has no .code"),N.UNKNOWN;switch(t){case Je.OK:return N.OK;case Je.CANCELLED:return N.CANCELLED;case Je.UNKNOWN:return N.UNKNOWN;case Je.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Je.INTERNAL:return N.INTERNAL;case Je.UNAVAILABLE:return N.UNAVAILABLE;case Je.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Je.NOT_FOUND:return N.NOT_FOUND;case Je.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Je.ABORTED:return N.ABORTED;case Je.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Je.DATA_LOSS:return N.DATA_LOSS;default:return se()}}(Ee=Je||(Je={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4=new gr([4294967295,4294967295],0);function Qy(t){const e=p4().encode(t),n=new gU;return n.update(e),new Uint8Array(n.digest())}function Xy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new gr([n,s],0),new gr([i,r],0)]}class lm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new bo(`Invalid padding: ${n}`);if(s<0)throw new bo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new bo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new bo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=gr.fromNumber(this.Te)}de(e,n,s){let i=e.add(n.multiply(gr.fromNumber(s)));return i.compare(m4)===1&&(i=new gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Qy(e),[s,i]=Xy(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);if(!this.Ae(o))return!1}return!0}static create(e,n,s){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new lm(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=Qy(e),[s,i]=Xy(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);this.Re(o)}}Re(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,s,i,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const i=new Map;return i.set(e,Ba.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new Du(oe.min(),i,new qe(Ce),ps(),me())}}class Ba{constructor(e,n,s,i,r){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ba(s,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,n,s,i){this.Ve=e,this.removedTargetIds=n,this.key=s,this.me=i}}class sI{constructor(e,n){this.targetId=e,this.fe=n}}class iI{constructor(e,n,s=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=i}}class Jy{constructor(){this.ge=0,this.pe=ev(),this.ye=Rt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=me(),n=me(),s=me();return this.pe.forEach((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:se()}}),new Ba(this.ye,this.we,e,n,s)}Fe(){this.Se=!1,this.pe=ev()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Le(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class _4{constructor(e){this.Le=e,this.ke=new Map,this.qe=ps(),this.Qe=Zy(),this.Ke=new qe(Ce)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.Ce(e.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(e.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Be(),s.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((s,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,s=e.fe.count,i=this.Ye(n);if(i){const r=i.target;if(Zd(r))if(s===0){const o=new te(r.path);this.We(n,o,bt.newNoDocument(o,oe.min()))}else Le(s===1);else{const o=this.Ze(n);if(o!==s){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=Oi(s).toUint8Array()}catch(l){if(l instanceof LA)return xr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lm(o,i,r)}catch(l){return xr(l instanceof bo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,s){return n.fe.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.We(n,r,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((r,o)=>{const a=this.Ye(o);if(a){if(r.current&&Zd(a.target)){const l=new te(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,bt.newNoDocument(l,e))}r.De&&(n.set(o,r.ve()),r.Fe())}});let s=me();this.Qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.qe.forEach((r,o)=>o.setReadTime(e));const i=new Du(e,n,this.Ke,this.qe,s);return this.qe=ps(),this.Qe=Zy(),this.Ke=new qe(Ce),i}Ue(e,n){if(!this.je(e))return;const s=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Jy,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new gt(Ce),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Jy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Zy(){return new qe(te.comparator)}function ev(){return new qe(te.comparator)}const g4={asc:"ASCENDING",desc:"DESCENDING"},y4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v4={and:"AND",or:"OR"};class E4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tf(t,e){return t.useProto3Json||Cu(e)?e:{value:e}}function Ec(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function T4(t,e){return Ec(t,e.toTimestamp())}function qn(t){return Le(!!t),oe.fromTimestamp(function(n){const s=zs(n);return new et(s.seconds,s.nanos)}(t))}function cm(t,e){return function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents").child(e).canonicalString()}function oI(t){const e=je.fromString(t);return Le(uI(e)),e}function nf(t,e){return cm(t.databaseId,e.path)}function Lh(t,e){const n=oI(e);if(n.get(1)!==t.databaseId.projectId)throw new X(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new X(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(aI(n))}function sf(t,e){return cm(t.databaseId,e)}function w4(t){const e=oI(t);return e.length===4?je.emptyPath():aI(e)}function rf(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aI(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tv(t,e,n){return{name:nf(t,e),fields:n.value.mapValue.fields}}function b4(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(Le(u===void 0||typeof u=="string"),Rt.fromBase64String(u||"")):(Le(u===void 0||u instanceof Uint8Array),Rt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?N.UNKNOWN:nI(c.code);return new X(u,c.message||"")}(o);n=new iI(s,i,r,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=Lh(t,s.document.name),r=qn(s.document.updateTime),o=s.document.createTime?qn(s.document.createTime):oe.min(),a=new nn({mapValue:{fields:s.document.fields}}),l=bt.newFoundDocument(i,r,o,a),c=s.targetIds||[],u=s.removedTargetIds||[];n=new Ol(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=Lh(t,s.document),r=s.readTime?qn(s.readTime):oe.min(),o=bt.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Ol([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=Lh(t,s.document),r=s.removedTargetIds||[];n=new Ol([],r,i,null)}else{if(!("filter"in e))return se();{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new d4(i,r),a=s.targetId;n=new sI(a,o)}}return n}function A4(t,e){let n;if(e instanceof Ua)n={update:tv(t,e.key,e.value)};else if(e instanceof om)n={delete:nf(t,e.key)};else if(e instanceof Hi)n={update:tv(t,e.key,e.data),updateMask:D4(e.fieldMask)};else{if(!(e instanceof c4))return se();n={verify:nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof yc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof pa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ma)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof vc)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw se()}(0,s))),e.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:T4(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:se()}(t,e.precondition)),n}function I4(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,r){let o=i.updateTime?qn(i.updateTime):qn(r);return o.isEqual(oe.min())&&(o=qn(r)),new o4(o,i.transformResults||[])}(n,e))):[]}function C4(t,e){return{documents:[sf(t,e.path)]}}function S4(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=sf(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=sf(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const i=function(l){if(l.length!==0)return cI(Xn.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const r=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:er(h.field),direction:N4(h.dir)}}(c))}(e.orderBy);r&&(n.structuredQuery.orderBy=r);const o=tf(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function R4(t){let e=w4(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){Le(s===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let r=[];n.where&&(r=function(h){const d=lI(h);return d instanceof Xn&&$A(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(d=>function(_){return new gc(tr(_.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(h){let d;return d=typeof h=="object"?h.value:h,Cu(d)?null:d}(n.limit));let l=null;n.startAt&&(l=function(h){const d=!!h.before,f=h.values||[];return new _c(f,d)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const d=!h.before,f=h.values||[];return new _c(f,d)}(n.endAt)),KU(e,i,o,r,a,"F",l,c)}function P4(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=tr(n.unaryFilter.field);return tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=tr(n.unaryFilter.field);return tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=tr(n.unaryFilter.field);return tt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=tr(n.unaryFilter.field);return tt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return tt.create(tr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xn.create(n.compositeFilter.filters.map(s=>lI(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function N4(t){return g4[t]}function O4(t){return y4[t]}function k4(t){return v4[t]}function er(t){return{fieldPath:t.canonicalString()}}function tr(t){return mt.fromServerFormat(t.fieldPath)}function cI(t){return t instanceof tt?function(n){if(n.op==="=="){if(By(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NAN"}};if(Uy(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(By(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NAN"}};if(Uy(n.value))return{unaryFilter:{field:er(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:er(n.field),op:O4(n.op),value:n.value}}}(t):t instanceof Xn?function(n){const s=n.getFilters().map(i=>cI(i));return s.length===1?s[0]:{compositeFilter:{op:k4(n.op),filters:s}}}(t):se()}function D4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,s,i,r=oe.min(),o=oe.min(),a=Rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ut=e}}function L4(t){const e=R4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.on=new V4}addToCollectionParentIndex(e,n){return this.on.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Ks.min())}updateCollectionGroup(e,n,s){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class V4{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n]||new gt(je.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(e){const n=e.lastSegment(),s=e.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(e){return(this.index[e]||new gt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new Fr(0)}static Nn(){return new Fr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this.changes=new no(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?k.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,s,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(s!==null&&Bo(s.mutation,i,vn.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=me()){const i=_i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,s).next(r=>{let o=wo();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=_i();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,me()))}populateOverlays(e,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(e,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,i){let r=ps();const o=Uo(),a=function(){return Uo()}();return n.forEach((l,c)=>{const u=s.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Hi)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Bo(u.mutation,c,u.mutation.getFieldMask(),et.now())):o.set(c.key,vn.empty())}),this.recalculateAndSaveOverlays(e,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new $4(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Uo();let i=new qe((o,a)=>o-a),r=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=s.get(l)||vn.empty();u=a.applyToLocalView(c,u),s.set(l,u);const h=(i.get(a.batchId)||me()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=zA();u.forEach(d=>{if(!r.has(d)){const f=eI(n.get(d),s.get(d));f!==null&&h.set(d,f),r=r.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return k.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zU(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,i):this.getDocumentsMatchingCollectionQuery(e,n,s,i)}getNextDocuments(e,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,i-r.size):k.resolve(_i());let a=-1,l=r;return o.next(c=>k.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?k.resolve():this.remoteDocumentCache.getEntry(e,u).next(d=>{l=l.insert(u,d)}))).next(()=>this.populateOverlays(e,c,r)).next(()=>this.computeViews(e,l,c,me())).next(u=>({batchId:a,changes:KA(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(s=>{let i=wo();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,s,i){const r=n.collectionGroup;let o=wo();return this.indexManager.getCollectionParents(e,r).next(a=>k.forEach(a,l=>{const c=function(h,d){return new Su(d,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,s,i).next(u=>{u.forEach((h,d)=>{o=o.insert(h,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,r,i))).next(o=>{r.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,bt.newInvalidDocument(u)))});let a=wo();return o.forEach((l,c)=>{const u=r.get(l);u!==void 0&&Bo(u.mutation,c,vn.empty(),et.now()),Nu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return k.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:L4(i.bundledQuery),readTime:qn(i.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4{constructor(){this.overlays=new qe(te.comparator),this.lr=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const s=_i();return k.forEach(n,i=>this.getOverlay(e,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((i,r)=>{this.lt(e,n,r)}),k.resolve()}removeOverlaysForBatchId(e,n,s){const i=this.lr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.lr.delete(s)),k.resolve()}getOverlaysForCollection(e,n,s){const i=_i(),r=n.length+1,o=new te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>s&&i.set(l.getKey(),l)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,s,i){let r=new qe((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>s){let u=r.get(c.largestBatchId);u===null&&(u=_i(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=_i(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return k.resolve(a)}lt(e,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(s.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new h4(n,s));let r=this.lr.get(n);r===void 0&&(r=me(),this.lr.set(n,r)),this.lr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.hr=new gt(rt.Pr),this.Ir=new gt(rt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const s=new rt(e,n);this.hr=this.hr.add(s),this.Ir=this.Ir.add(s)}Er(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.dr(new rt(e,n))}Ar(e,n){e.forEach(s=>this.removeReference(s,n))}Rr(e){const n=new te(new je([])),s=new rt(n,e),i=new rt(n,e+1),r=[];return this.Ir.forEachInRange([s,i],o=>{this.dr(o),r.push(o.key)}),r}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new te(new je([])),s=new rt(n,e),i=new rt(n,e+1);let r=me();return this.Ir.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new rt(e,0),s=this.hr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rt{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return te.comparator(e.key,n.key)||Ce(e.gr,n.gr)}static Tr(e,n){return Ce(e.gr,n.gr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new gt(rt.Pr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,i){const r=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u4(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new rt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,i=this.Sr(s),r=i<0?0:i;return k.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),r=[];return this.yr.forEachInRange([s,i],o=>{const a=this.wr(o.gr);r.push(a)}),k.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new gt(Ce);return n.forEach(i=>{const r=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([r,o],a=>{s=s.add(a.gr)})}),k.resolve(this.br(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,i=s.length+1;let r=s;te.isDocumentKey(r)||(r=r.child(""));const o=new rt(new te(r),0);let a=new gt(Ce);return this.yr.forEachWhile(l=>{const c=l.key.path;return!!s.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.gr)),!0)},o),k.resolve(this.br(a))}br(e){const n=[];return e.forEach(s=>{const i=this.wr(s);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.yr;return k.forEach(n.mutations,i=>{const r=new rt(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=s})}Fn(e){}containsKey(e,n){const s=new rt(n,0),i=this.yr.firstAfterOrEqual(s);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.Cr=e,this.docs=function(){return new qe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return k.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let s=ps();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():bt.newInvalidDocument(i))}),k.resolve(s)}getDocumentsMatchingQuery(e,n,s,i){let r=ps();const o=n.path,a=new te(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||PU(RU(u),s)<=0||(i.has(u.key)||Nu(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return k.resolve(r)}getAllFromCollectionGroup(e,n,s,i){se()}vr(e,n){return k.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new q4(this)}getSize(e){return k.resolve(this.size)}}class q4 extends F4{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(s)}),k.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.persistence=e,this.Fr=new no(n=>im(n),rm),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Mr=0,this.Or=new um,this.targetCount=0,this.Nr=Fr.On()}forEachTarget(e,n){return this.Fr.forEach((s,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Mr&&(this.Mr=n),k.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new Fr(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.kn(n),k.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,s){let i=0;const r=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Fr.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(r).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const s=this.Fr.get(n)||null;return k.resolve(s)}addMatchingKeys(e,n,s){return this.Or.Er(n,s),k.resolve()}removeMatchingKeys(e,n,s){this.Or.Ar(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),k.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Or.mr(n);return k.resolve(s)}containsKey(e,n){return k.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z4{constructor(e,n){this.Br={},this.overlays={},this.Lr=new em(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new K4(this),this.indexManager=new M4,this.remoteDocumentCache=function(i){return new W4(i)}(s=>this.referenceDelegate.Qr(s)),this.serializer=new x4(n),this.Kr=new B4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Br[e.toKey()];return s||(s=new j4(n,this.referenceDelegate),this.Br[e.toKey()]=s),s}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,s){K("MemoryPersistence","Starting transaction:",e);const i=new G4(this.Lr.next());return this.referenceDelegate.$r(),s(i).next(r=>this.referenceDelegate.Ur(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Wr(e,n){return k.or(Object.values(this.Br).map(s=>()=>s.containsKey(e,n)))}}class G4 extends OU{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Gr=new um,this.zr=null}static jr(e){return new hm(e)}get Hr(){if(this.zr)return this.zr;throw se()}addReference(e,n,s){return this.Gr.addReference(s,n),this.Hr.delete(s.toString()),k.resolve()}removeReference(e,n,s){return this.Gr.removeReference(s,n),this.Hr.add(s.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(r=>this.Hr.add(r.toString()))}).next(()=>s.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Hr,s=>{const i=te.fromPath(s);return this.Jr(e,i).next(r=>{r||n.removeEntry(i,oe.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(s=>{s?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return k.or([()=>k.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,s,i){this.targetId=e,this.fromCache=n,this.ki=s,this.qi=i}static Qi(e,n){let s=me(),i=me();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new dm(e,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,s,i){const r={result:null};return this.zi(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ji(e,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new Y4;return this.Hi(e,n,o).next(a=>{if(r.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>r.result)}Ji(e,n,s,i){return s.documentReadCount<this.Ui?(_o()<=pe.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Zi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),k.resolve()):(_o()<=pe.DEBUG&&K("QueryEngine","Query:",Zi(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Wi*i?(_o()<=pe.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Zi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):k.resolve())}zi(e,n){if(qy(n))return k.resolve(null);let s=jn(n);return this.indexManager.getIndexType(e,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ef(n,null,"F"),s=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(r=>{const o=me(...r);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const c=this.Yi(n,a);return this.Zi(n,c,o,l.readTime)?this.zi(e,ef(n,null,"F")):this.Xi(e,c,n,l)}))})))}ji(e,n,s,i){return qy(n)||i.isEqual(oe.min())?k.resolve(null):this.Gi.getDocuments(e,s).next(r=>{const o=this.Yi(n,r);return this.Zi(n,o,s,i)?k.resolve(null):(_o()<=pe.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zi(n)),this.Xi(e,o,n,SU(i,-1)).next(a=>a))})}Yi(e,n){let s=new gt(WA(e));return n.forEach((i,r)=>{Nu(e,r)&&(s=s.add(r))}),s}Zi(e,n,s,i){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Hi(e,n,s){return _o()<=pe.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Zi(n)),this.Gi.getDocumentsMatchingQuery(e,n,Ks.min(),s)}Xi(e,n,s,i){return this.Gi.getDocumentsMatchingQuery(e,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e,n,s,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new qe(Ce),this.ns=new no(r=>im(r),rm),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(s)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U4(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function J4(t,e,n,s){return new X4(t,e,n,s)}async function hI(t,e){const n=le(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n.os(e),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let l=me();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of r){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(s,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})}function Z4(t,e){const n=le(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=e.batch.keys(),r=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let f=k.resolve();return d.forEach(_=>{f=f.next(()=>u.getEntry(l,_)).next(g=>{const y=c.docVersions.get(_);Le(y!==null),g.version.compareTo(y)<0&&(h.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,s,e,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let l=me();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(s,i))})}function dI(t){const e=le(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function eB(t,e){const n=le(t),s=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((u,h)=>{const d=i.get(h);if(!d)return;a.push(n.qr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.qr.addMatchingKeys(r,u.addedDocuments,h)));let f=d.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(h)!==null?f=f.withResumeToken(Rt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,s)),i=i.insert(h,f),function(g,y,E){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(d,f,u)&&a.push(n.qr.updateTargetData(r,f))});let l=ps(),c=me();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(tB(r,o,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!s.isEqual(oe.min())){const u=n.qr.getLastRemoteSnapshotVersion(r).next(h=>n.qr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(u)}return k.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.ts=i,r))}function tB(t,e,n){let s=me(),i=me();return n.forEach(r=>s=s.add(r)),e.getEntries(t,s).next(r=>{let o=ps();return n.forEach((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:i}})}function nB(t,e){const n=le(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function sB(t,e){const n=le(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.qr.getTargetData(s,e).next(r=>r?(i=r,k.resolve(i)):n.qr.allocateTargetId(s).next(o=>(i=new Os(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.qr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.ts.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(s.targetId,s),n.ns.set(e,s.targetId)),s})}async function of(t,e,n){const s=le(t),i=s.ts.get(e),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$a(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.ts=s.ts.remove(e),s.ns.delete(i.target)}function nv(t,e,n){const s=le(t);let i=oe.min(),r=me();return s.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=le(l),d=h.ns.get(u);return d!==void 0?k.resolve(h.ts.get(d)):h.qr.getTargetData(c,u)}(s,o,jn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>s.es.getDocumentsMatchingQuery(o,e,n?i:oe.min(),n?r:me())).next(a=>(iB(s,YU(e),a),{documents:a,ls:r})))}function iB(t,e,n){let s=t.rs.get(e)||oe.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),t.rs.set(e,s)}class sv{constructor(){this.activeTargetIds=t4()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rB{constructor(){this.eo=new sv,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,s){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new sv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l=null;function Mh(){return _l===null?_l=function(){return 268435456+Math.round(2147483648*Math.random())}():_l++,"0x"+_l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class cB extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=s+"://"+n.host,this.fo=`projects/${i}/databases/${r}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get yo(){return!1}wo(n,s,i,r,o){const a=Mh(),l=this.So(n,s);K("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,r,o),this.Do(n,l,c,i).then(u=>(K("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw xr("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Co(n,s,i,r,o,a){return this.wo(n,s,i,r,o)}bo(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>n[o]=r),i&&i.headers.forEach((r,o)=>n[o]=r)}So(n,s){const i=aB[n];return`${this.mo}/v1/${s}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,s,i){const r=Mh();return new Promise((o,a)=>{const l=new _U;l.setWithCredentials(!0),l.listenOnce(pU.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case xh.NO_ERROR:const u=l.getResponseJson();K(yt,`XHR for RPC '${e}' ${r} received:`,JSON.stringify(u)),o(u);break;case xh.TIMEOUT:K(yt,`RPC '${e}' ${r} timed out`),a(new X(N.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const h=l.getStatus();if(K(yt,`RPC '${e}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let d=l.getResponseJson();Array.isArray(d)&&(d=d[0]);const f=d==null?void 0:d.error;if(f&&f.status&&f.message){const _=function(y){const E=y.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(E)>=0?E:N.UNKNOWN}(f.status);a(new X(_,f.message))}else a(new X(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new X(N.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{K(yt,`RPC '${e}' ${r} completed.`)}});const c=JSON.stringify(i);K(yt,`RPC '${e}' ${r} sending request:`,i),l.send(n,"POST",c,s,15)})}vo(e,n,s){const i=Mh(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dU(),a=fU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,s),l.encodeInitMessageHeaders=!0;const u=r.join("");K(yt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let d=!1,f=!1;const _=new lB({co:y=>{f?K(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(d||(K(yt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),d=!0),K(yt,`RPC '${e}' stream ${i} sending:`,y),h.send(y))},lo:()=>h.close()}),g=(y,E,C)=>{y.listen(E,w=>{try{C(w)}catch(b){setTimeout(()=>{throw b},0)}})};return g(h,fl.EventType.OPEN,()=>{f||K(yt,`RPC '${e}' stream ${i} transport opened.`)}),g(h,fl.EventType.CLOSE,()=>{f||(f=!0,K(yt,`RPC '${e}' stream ${i} transport closed`),_.Ro())}),g(h,fl.EventType.ERROR,y=>{f||(f=!0,xr(yt,`RPC '${e}' stream ${i} transport errored:`,y),_.Ro(new X(N.UNAVAILABLE,"The operation could not be completed")))}),g(h,fl.EventType.MESSAGE,y=>{var E;if(!f){const C=y.data[0];Le(!!C);const w=C,b=w.error||((E=w[0])===null||E===void 0?void 0:E.error);if(b){K(yt,`RPC '${e}' stream ${i} received error:`,b);const M=b.status;let P=function(Z){const Y=Je[Z];if(Y!==void 0)return nI(Y)}(M),q=b.message;P===void 0&&(P=N.INTERNAL,q="Unknown error status: "+M+" with message "+b.message),f=!0,_.Ro(new X(P,q)),h.close()}else K(yt,`RPC '${e}' stream ${i} received:`,C),_.Vo(C)}}),g(a,mU.STAT_EVENT,y=>{y.stat===Ly.PROXY?K(yt,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===Ly.NOPROXY&&K(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.Ao()},0),_}}function Vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t){return new E4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n,s=1e3,i=1.5,r=6e4){this.si=e,this.timerId=n,this.Fo=s,this.Mo=i,this.xo=r,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),s=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-s);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,n,s,i,r,o,a,l){this.si=e,this.Ko=s,this.$o=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new fI(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Uo===n&&this.s_(s,i)},s=>{e(()=>{const i=new X(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.o_(i)})})}s_(e,n){const s=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{s(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{s(()=>this.o_(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uB extends pI{constructor(e,n,s,i,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=b4(this.serializer,e),s=function(r){if(!("targetChange"in r))return oe.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?qn(o.readTime):oe.min()}(e);return this.listener.a_(n,s)}u_(e){const n={};n.database=rf(this.serializer),n.addTarget=function(r,o){let a;const l=o.target;if(a=Zd(l)?{documents:C4(r,l)}:{query:S4(r,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rI(r,o.resumeToken);const c=tf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(oe.min())>0){a.readTime=Ec(r,o.snapshotVersion.toTimestamp());const c=tf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const s=P4(this.serializer,e);s&&(n.labels=s),this.e_(n)}c_(e){const n={};n.database=rf(this.serializer),n.removeTarget=e,this.e_(n)}}class hB extends pI{constructor(e,n,s,i,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=I4(e.writeResults,e.commitTime),s=qn(e.commitTime);return this.listener.I_(s,n)}return Le(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=rf(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>A4(this.serializer,s))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB extends class{}{constructor(e,n,s,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new X(N.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,s){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,r])=>this.connection.wo(e,n,s,i,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new X(N.UNKNOWN,i.toString())})}Co(e,n,s,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Co(e,n,s,r,o,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new X(N.UNKNOWN,r.toString())})}terminate(){this.d_=!0}}class fB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(fs(n),this.f_=!1):K("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n,s,i,r){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=r,this.F_.ro(o=>{s.enqueueAndForget(async()=>{ji(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=le(l);c.C_.add(4),await Ha(c),c.M_.set("Unknown"),c.C_.delete(4),await Lu(c)}(this))})}),this.M_=new fB(s,i)}}async function Lu(t){if(ji(t))for(const e of t.v_)await e(!0)}async function Ha(t){for(const e of t.v_)await e(!1)}function mI(t,e){const n=le(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),mm(n)?pm(n):so(n).Ho()&&fm(n,e))}function _I(t,e){const n=le(t),s=so(n);n.D_.delete(e),s.Ho()&&gI(n,e),n.D_.size===0&&(s.Ho()?s.Zo():ji(n)&&n.M_.set("Unknown"))}function fm(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}so(t).u_(e)}function gI(t,e){t.x_.Oe(e),so(t).c_(e)}function pm(t){t.x_=new _4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),so(t).start(),t.M_.g_()}function mm(t){return ji(t)&&!so(t).jo()&&t.D_.size>0}function ji(t){return le(t).C_.size===0}function yI(t){t.x_=void 0}async function mB(t){t.D_.forEach((e,n)=>{fm(t,e)})}async function _B(t,e){yI(t),mm(t)?(t.M_.w_(e),pm(t)):t.M_.set("Unknown")}async function gB(t,e,n){if(t.M_.set("Online"),e instanceof iI&&e.state===2&&e.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(s){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Tc(t,s)}else if(e instanceof Ol?t.x_.$e(e):e instanceof sI?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(oe.min()))try{const s=await dI(t.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=r.D_.get(c);u&&r.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=r.D_.get(l);if(!u)return;r.D_.set(l,u.withResumeToken(Rt.EMPTY_BYTE_STRING,u.snapshotVersion)),gI(r,l);const h=new Os(u.target,l,c,u.sequenceNumber);fm(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(s){K("RemoteStore","Failed to raise snapshot:",s),await Tc(t,s)}}async function Tc(t,e,n){if(!$a(e))throw e;t.C_.add(1),await Ha(t),t.M_.set("Offline"),n||(n=()=>dI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await Lu(t)})}function vI(t,e){return e().catch(n=>Tc(t,n,e))}async function Mu(t){const e=le(t),n=Gs(e);let s=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;yB(e);)try{const i=await nB(e.localStore,s);if(i===null){e.b_.length===0&&n.Zo();break}s=i.batchId,vB(e,i)}catch(i){await Tc(e,i)}EI(e)&&TI(e)}function yB(t){return ji(t)&&t.b_.length<10}function vB(t,e){t.b_.push(e);const n=Gs(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function EI(t){return ji(t)&&!Gs(t).jo()&&t.b_.length>0}function TI(t){Gs(t).start()}async function EB(t){Gs(t).E_()}async function TB(t){const e=Gs(t);for(const n of t.b_)e.P_(n.mutations)}async function wB(t,e,n){const s=t.b_.shift(),i=am.from(s,e,n);await vI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mu(t)}async function bB(t,e){e&&Gs(t).h_&&await async function(s,i){if(function(o){return f4(o)&&o!==N.ABORTED}(i.code)){const r=s.b_.shift();Gs(s).Yo(),await vI(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Mu(s)}}(t,e),EI(t)&&TI(t)}async function rv(t,e){const n=le(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const s=ji(n);n.C_.add(3),await Ha(n),s&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await Lu(n)}async function AB(t,e){const n=le(t);e?(n.C_.delete(2),await Lu(n)):e||(n.C_.add(2),await Ha(n),n.M_.set("Unknown"))}function so(t){return t.O_||(t.O_=function(n,s,i){const r=le(n);return r.A_(),new uB(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{ho:mB.bind(null,t),Io:_B.bind(null,t),a_:gB.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),mm(t)?pm(t):t.M_.set("Unknown")):(await t.O_.stop(),yI(t))})),t.O_}function Gs(t){return t.N_||(t.N_=function(n,s,i){const r=le(n);return r.A_(),new hB(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(t.datastore,t.asyncQueue,{ho:EB.bind(null,t),Io:bB.bind(null,t),T_:TB.bind(null,t),I_:wB.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await Mu(t)):(await t.N_.stop(),t.b_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,s,i,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,i,r){const o=Date.now()+s,a=new _m(e,n,o,i,r);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new X(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gm(t,e){if(fs("AsyncQueue",`${e}: ${t}`),$a(t))return new X(N.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.comparator=e?(n,s)=>e(n,s)||te.comparator(n.key,s.key):(n,s)=>te.comparator(n.key,s.key),this.keyedMap=wo(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new yr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new yr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(){this.B_=new qe(te.comparator)}track(e){const n=e.doc.key,s=this.B_.get(n);s?e.type!==0&&s.type===3?this.B_=this.B_.insert(n,e):e.type===3&&s.type!==1?this.B_=this.B_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.B_=this.B_.remove(n):e.type===1&&s.type===2?this.B_=this.B_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):se():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,s)=>{e.push(s)}),e}}class $r{constructor(e,n,s,i,r,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $r(e,n,yr.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{constructor(){this.k_=void 0,this.listeners=[]}}class CB{constructor(){this.queries=new no(e=>jA(e),Pu),this.onlineState="Unknown",this.q_=new Set}}async function ym(t,e){const n=le(t),s=e.query;let i=!1,r=n.queries.get(s);if(r||(i=!0,r=new IB),i)try{r.k_=await n.onListen(s)}catch(o){const a=gm(o,`Initialization of query '${Zi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.listeners.push(e),e.Q_(n.onlineState),r.k_&&e.K_(r.k_)&&Em(n)}async function vm(t,e){const n=le(t),s=e.query;let i=!1;const r=n.queries.get(s);if(r){const o=r.listeners.indexOf(e);o>=0&&(r.listeners.splice(o,1),i=r.listeners.length===0)}if(i)return n.queries.delete(s),n.onUnlisten(s)}function SB(t,e){const n=le(t);let s=!1;for(const i of e){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.listeners)a.K_(i)&&(s=!0);o.k_=i}}s&&Em(n)}function RB(t,e,n){const s=le(t),i=s.queries.get(e);if(i)for(const r of i.listeners)r.onError(n);s.queries.delete(e)}function Em(t){t.q_.forEach(e=>{e.next()})}class Tm{constructor(e,n,s){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=s||{}}K_(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new $r(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.J_||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=$r.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.key=e}}class bI{constructor(e){this.key=e}}class PB{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=me(),this.mutatedKeys=me(),this._a=WA(e),this.aa=new yr(this._a)}get ua(){return this.ia}ca(e,n){const s=n?n.la:new ov,i=n?n.aa:this.aa;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const d=i.get(u),f=Nu(this.query,h)?h:null,_=!!d&&this.mutatedKeys.has(d.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;d&&f?d.data.isEqual(f.data)?_!==g&&(s.track({type:3,doc:f}),y=!0):this.ha(d,f)||(s.track({type:2,doc:f}),y=!0,(l&&this._a(f,l)>0||c&&this._a(f,c)<0)&&(a=!0)):!d&&f?(s.track({type:0,doc:f}),y=!0):d&&!f&&(s.track({type:1,doc:d}),y=!0,(l||c)&&(a=!0)),y&&(f?(o=o.add(f),r=g?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),s.track({type:1,doc:u})}return{aa:o,la:s,Zi:a,mutatedKeys:r}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,i){const r=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((u,h)=>function(f,_){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return g(f)-g(_)}(u.type,h.type)||this._a(u.doc,h.doc)),this.Pa(s),i=i!=null&&i;const a=n&&!i?this.Ia():[],l=this.oa.size===0&&this.current&&!i?1:0,c=l!==this.sa;return this.sa=l,o.length!==0||c?{snapshot:new $r(this.query,e.aa,r,o,e.mutatedKeys,l===0,c,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new ov,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=me(),this.aa.forEach(s=>{this.Ea(s.key)&&(this.oa=this.oa.add(s.key))});const n=[];return e.forEach(s=>{this.oa.has(s)||n.push(new bI(s))}),this.oa.forEach(s=>{e.has(s)||n.push(new wI(s))}),n}da(e){this.ia=e.ls,this.oa=me();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return $r.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class NB{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class OB{constructor(e){this.key=e,this.Ra=!1}}class kB{constructor(e,n,s,i,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new no(a=>jA(a),Pu),this.fa=new Map,this.ga=new Set,this.pa=new qe(te.comparator),this.ya=new Map,this.wa=new um,this.Sa={},this.ba=new Map,this.Da=Fr.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function DB(t,e){const n=jB(t);let s,i;const r=n.ma.get(e);if(r)s=r.targetId,n.sharedClientState.addLocalQueryTarget(s),i=r.view.Aa();else{const o=await sB(n.localStore,jn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,i=await xB(n,e,s,a==="current",o.resumeToken),n.isPrimaryClient&&mI(n.remoteStore,o)}return i}async function xB(t,e,n,s,i){t.va=(h,d,f)=>async function(g,y,E,C){let w=y.view.ca(E);w.Zi&&(w=await nv(g.localStore,y.query,!1).then(({documents:q})=>y.view.ca(q,w)));const b=C&&C.targetChanges.get(y.targetId),M=C&&C.targetMismatches.get(y.targetId)!=null,P=y.view.applyChanges(w,g.isPrimaryClient,b,M);return lv(g,y.targetId,P.Ta),P.snapshot}(t,h,d,f);const r=await nv(t.localStore,e,!0),o=new PB(e,r.ls),a=o.ca(r.documents),l=Ba.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);lv(t,n,c.Ta);const u=new NB(e,n,o);return t.ma.set(e,u),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),c.snapshot}async function LB(t,e){const n=le(t),s=n.ma.get(e),i=n.fa.get(s.targetId);if(i.length>1)return n.fa.set(s.targetId,i.filter(r=>!Pu(r,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await of(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),_I(n.remoteStore,s.targetId),af(n,s.targetId)}).catch(Fa)):(af(n,s.targetId),await of(n.localStore,s.targetId,!0))}async function MB(t,e,n){const s=WB(t);try{const i=await function(o,a){const l=le(o),c=et.now(),u=a.reduce((f,_)=>f.add(_.key),me());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let _=ps(),g=me();return l.ss.getEntries(f,u).next(y=>{_=y,_.forEach((E,C)=>{C.isValidDocument()||(g=g.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,_)).next(y=>{h=y;const E=[];for(const C of a){const w=l4(C,h.get(C.key).overlayedDocument);w!=null&&E.push(new Hi(C.key,w,MA(w.value.mapValue),Wn.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,E,a)}).next(y=>{d=y;const E=y.applyToLocalDocumentSet(h,g);return l.documentOverlayCache.saveOverlays(f,y.batchId,E)})}).then(()=>({batchId:d.batchId,changes:KA(h)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new qe(Ce)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(s,i.batchId,n),await ja(s,i.changes),await Mu(s.remoteStore)}catch(i){const r=gm(i,"Failed to persist write");n.reject(r)}}async function AI(t,e){const n=le(t);try{const s=await eB(n.localStore,e);e.targetChanges.forEach((i,r)=>{const o=n.ya.get(r);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Le(o.Ra):i.removedDocuments.size>0&&(Le(o.Ra),o.Ra=!1))}),await ja(n,s,e)}catch(s){await Fa(s)}}function av(t,e,n){const s=le(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.ma.forEach((r,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=le(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.listeners)d.Q_(a)&&(c=!0)}),c&&Em(l)}(s.eventManager,e),i.length&&s.Va.a_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function VB(t,e,n){const s=le(t);s.sharedClientState.updateQueryState(e,"rejected",n);const i=s.ya.get(e),r=i&&i.key;if(r){let o=new qe(te.comparator);o=o.insert(r,bt.newNoDocument(r,oe.min()));const a=me().add(r),l=new Du(oe.min(),new Map,new qe(Ce),o,a);await AI(s,l),s.pa=s.pa.remove(r),s.ya.delete(e),wm(s)}else await of(s.localStore,e,!1).then(()=>af(s,e,n)).catch(Fa)}async function FB(t,e){const n=le(t),s=e.batch.batchId;try{const i=await Z4(n.localStore,e);CI(n,s,null),II(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ja(n,i)}catch(i){await Fa(i)}}async function $B(t,e,n){const s=le(t);try{const i=await function(o,a){const l=le(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(Le(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(s.localStore,e);CI(s,e,n),II(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ja(s,i)}catch(i){await Fa(i)}}function II(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function CI(t,e,n){const s=le(t);let i=s.Sa[s.currentUser.toKey()];if(i){const r=i.get(e);r&&(n?r.reject(n):r.resolve(),i=i.remove(e)),s.Sa[s.currentUser.toKey()]=i}}function af(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.fa.get(e))t.ma.delete(s),n&&t.Va.Fa(s,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(s=>{t.wa.containsKey(s)||SI(t,s)})}function SI(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(_I(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),wm(t))}function lv(t,e,n){for(const s of n)s instanceof wI?(t.wa.addReference(s.key,e),UB(t,s)):s instanceof bI?(K("SyncEngine","Document no longer in limbo: "+s.key),t.wa.removeReference(s.key,e),t.wa.containsKey(s.key)||SI(t,s.key)):se()}function UB(t,e){const n=e.key,s=n.path.canonicalString();t.pa.get(n)||t.ga.has(s)||(K("SyncEngine","New document in limbo: "+n),t.ga.add(s),wm(t))}function wm(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new te(je.fromString(e)),s=t.Da.next();t.ya.set(s,new OB(n)),t.pa=t.pa.insert(n,s),mI(t.remoteStore,new Os(jn(Ru(n.path)),s,"TargetPurposeLimboResolution",em._e))}}async function ja(t,e,n){const s=le(t),i=[],r=[],o=[];s.ma.isEmpty()||(s.ma.forEach((a,l)=>{o.push(s.va(l,e,n).then(c=>{if((c||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=dm.Qi(l.targetId,c);r.push(u)}}))}),await Promise.all(o),s.Va.a_(i),await async function(l,c){const u=le(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>k.forEach(c,d=>k.forEach(d.ki,f=>u.persistence.referenceDelegate.addReference(h,d.targetId,f)).next(()=>k.forEach(d.qi,f=>u.persistence.referenceDelegate.removeReference(h,d.targetId,f)))))}catch(h){if(!$a(h))throw h;K("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const d=h.targetId;if(!h.fromCache){const f=u.ts.get(d),_=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(_);u.ts=u.ts.insert(d,g)}}}(s.localStore,r))}async function BB(t,e){const n=le(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const s=await hI(n.localStore,e);n.currentUser=e,function(r,o){r.ba.forEach(a=>{a.forEach(l=>{l.reject(new X(N.CANCELLED,o))})}),r.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ja(n,s._s)}}function HB(t,e){const n=le(t),s=n.ya.get(e);if(s&&s.Ra)return me().add(s.key);{let i=me();const r=n.fa.get(e);if(!r)return i;for(const o of r){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}function jB(t){const e=le(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=AI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VB.bind(null,e),e.Va.a_=SB.bind(null,e.eventManager),e.Va.Fa=RB.bind(null,e.eventManager),e}function WB(t){const e=le(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$B.bind(null,e),e}class cv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return J4(this.persistence,new Q4,e.initialUser,this.serializer)}createPersistence(e){return new z4(hm.jr,this.serializer)}createSharedClientState(e){return new rB}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qB{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>av(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=BB.bind(null,this.syncEngine),await AB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CB}()}createDatastore(e){const n=xu(e.databaseInfo.databaseId),s=function(r){return new cB(r)}(e.databaseInfo);return function(r,o,a,l){return new dB(r,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,i,r,o,a){return new pB(s,i,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>av(this.syncEngine,n,0),function(){return iv.D()?new iv:new oB}())}createSyncEngine(e,n){return function(i,r,o,a,l,c,u){const h=new kB(i,r,o,a,l,c);return u&&(h.Ca=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const s=le(n);K("RemoteStore","RemoteStore shutting down."),s.C_.add(5),await Ha(s),s.F_.shutdown(),s.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KB{constructor(e,n,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=vt.UNAUTHENTICATED,this.clientId=DA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{K("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(K("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new X(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=gm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Fh(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async i=>{s.isEqual(i)||(await hI(e.localStore,i),s=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GB(t);K("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(i=>rv(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>rv(e.remoteStore,r)),t._onlineComponents=e}function zB(t){return t.name==="FirebaseError"?t.code===N.FAILED_PRECONDITION||t.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function GB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!zB(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),await Fh(t,new cv)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Fh(t,new cv);return t._offlineComponents}async function RI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await uv(t,new qB))),t._onlineComponents}function YB(t){return RI(t).then(e=>e.syncEngine)}async function wc(t){const e=await RI(t),n=e.eventManager;return n.onListen=DB.bind(null,e.syncEngine),n.onUnlisten=LB.bind(null,e.syncEngine),n}function QB(t,e,n={}){const s=new us;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new bm({next:d=>{o.enqueueAndForget(()=>vm(r,h));const f=d.docs.has(a);!f&&d.fromCache?c.reject(new X(N.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&d.fromCache&&l&&l.source==="server"?c.reject(new X(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Tm(Ru(a.path),u,{includeMetadataChanges:!0,J_:!0});return ym(r,h)}(await wc(t),t.asyncQueue,e,n,s)),s.promise}function XB(t,e,n={}){const s=new us;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,l,c){const u=new bm({next:d=>{o.enqueueAndForget(()=>vm(r,h)),d.fromCache&&l.source==="server"?c.reject(new X(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Tm(a,u,{includeMetadataChanges:!0,J_:!0});return ym(r,h)}(await wc(t),t.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e,n){if(!n)throw new X(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JB(t,e,n,s){if(e===!0&&s===!0)throw new X(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dv(t){if(!te.isDocumentKey(t))throw new X(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fv(t){if(te.isDocumentKey(t))throw new X(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Am(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new X(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Am(t);throw new X(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new X(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new X(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PI((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new X(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vu{constructor(e,n,s,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new X(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new X(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new yU;switch(s.type){case"firstParty":return new wU(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new X(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=hv.get(n);s&&(K("ComponentProvider","Removing Datastore"),hv.delete(n),s.terminate())}(this),Promise.resolve()}}function ZB(t,e,n,s={}){var i;const r=(t=bn(t,Vu))._getSettings(),o=`${e}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,l;if(typeof s.mockUserToken=="string")a=s.mockUserToken,l=vt.MOCK_USER;else{a=$x(s.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=s.mockUserToken.sub||s.mockUserToken.user_id;if(!c)throw new X(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vt(c)}t._authCredentials=new vU(new kA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class Ut{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Fs extends Wa{constructor(e,n,s){super(e,n,Ru(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new te(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function OI(t,e,...n){if(t=In(t),NI("collection","path",e),t instanceof Vu){const s=je.fromString(e,...n);return fv(s),new Fs(t,null,s)}{if(!(t instanceof Ut||t instanceof Fs))throw new X(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(je.fromString(e,...n));return fv(s),new Fs(t.firestore,null,s)}}function bc(t,e,...n){if(t=In(t),arguments.length===1&&(e=DA.newId()),NI("doc","path",e),t instanceof Vu){const s=je.fromString(e,...n);return dv(s),new Ut(t,null,new te(s))}{if(!(t instanceof Ut||t instanceof Fs))throw new X(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(je.fromString(e,...n));return dv(s),new Ut(t.firestore,t instanceof Fs?t.converter:null,new te(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new fI(this,"async_queue_retry"),this.iu=()=>{const n=Vh();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Vh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Vh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new us;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!$a(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(s=>{this.eu=s,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw fs("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this.tu=!1,s))));return this.Ja=n,n}enqueueAfterDelay(e,n,s){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=_m.createAndSchedule(this,e,n,s,r=>this.au(r));return this.Xa.push(i),i}su(){this.eu&&se()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function mv(t){return function(n,s){if(typeof n!="object"||n===null)return!1;const i=n;for(const r of s)if(r in i&&typeof i[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Di extends Vu{constructor(e,n,s,i){super(e,n,s,i),this.type="firestore",this._queue=function(){return new e2}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||kI(this),this._firestoreClient.terminate()}}function t2(t,e){const n=typeof t=="object"?t:ew(),s=typeof t=="string"?t:e||"(default)",i=z1(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Vx("firestore");r&&ZB(i,...r)}return i}function Fu(t){return t._firestoreClient||kI(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function kI(t){var e,n,s;const i=t._freezeSettings(),r=function(a,l,c,u){return new xU(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,PI(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new KB(t._authCredentials,t._appCheckCredentials,t._queue,r),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ur(Rt.fromBase64String(e))}catch(n){throw new X(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ur(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new X(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new X(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new X(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class s2{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ua(e,this.data,n,this.fieldTransforms)}}function xI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Cm{constructor(e,n,s,i,r,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Pu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new Cm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:s,du:!1});return i.Au(e),i}Ru(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:s,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ac(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(xI(this.Iu)&&n2.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class i2{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||xu(e)}pu(e,n,s,i=!1){return new Cm({Iu:e,methodName:n,gu:s,path:mt.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r2(t){const e=t._freezeSettings(),n=xu(t._databaseId);return new i2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function o2(t,e,n,s,i,r={}){const o=t.pu(r.merge||r.mergeFields?2:0,e,n,i);FI("Data must be an object, but it was:",o,s);const a=MI(s,o);let l,c;if(r.merge)l=new vn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const u=[];for(const h of r.mergeFields){const d=a2(e,h,n);if(!o.contains(d))throw new X(N.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);c2(u,d)||u.push(d)}l=new vn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new s2(new nn(a),l,c)}function LI(t,e){if(VI(t=In(t)))return FI("Unsupported field value:",e,t),MI(t,e);if(t instanceof DI)return function(s,i){if(!xI(i.Iu))throw i.mu(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let l=LI(a,i.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(t,e)}return function(s,i){if((s=In(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return n4(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=et.fromDate(s);return{timestampValue:Ec(i.serializer,r)}}if(s instanceof et){const r=new et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ec(i.serializer,r)}}if(s instanceof $u)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ur)return{bytesValue:rI(i.serializer,s._byteString)};if(s instanceof Ut){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:cm(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.mu(`Unsupported field value: ${Am(s)}`)}(t,e)}function MI(t,e){const n={};return xA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(s,i)=>{const r=LI(i,e.Eu(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function VI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof $u||t instanceof Ur||t instanceof Ut||t instanceof DI)}function FI(t,e,n){if(!VI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Am(n);throw s==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+s)}}function a2(t,e,n){if((e=In(e))instanceof Im)return e._internalPath;if(typeof e=="string")return $I(t,e);throw Ac("Field path arguments must be of type string or ",t,!1,void 0,n)}const l2=new RegExp("[~\\*/\\[\\]]");function $I(t,e,n){if(e.search(l2)>=0)throw Ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Im(...e.split("."))._internalPath}catch{throw Ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ac(t,e,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${s}`),o&&(l+=` in document ${i}`),l+=")"),new X(N.INVALID_ARGUMENT,a+t+l)}function c2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,n,s,i,r){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(BI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class u2 extends UI{data(){return super.data()}}function BI(t,e){return typeof e=="string"?$I(t,e):e instanceof Im?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new X(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h2{convertValue(e,n="none"){switch(ki(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return to(e,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(e){return new $u(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=nm(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ha(e));default:return null}}convertTimestamp(e){const n=zs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=je.fromString(e);Le(uI(s));const i=new da(s.get(1),s.get(3)),r=new te(s.popFirst(5));return i.isEqual(n)||fs(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jI extends UI{constructor(e,n,s,i,r,o){super(e,n,s,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(BI("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class kl extends jI{data(e={}){return super.data(e)}}class WI{constructor(e,n,s,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ao(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new kl(this._firestore,this._userDataWriter,s.key,s,new Ao(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new X(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new kl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const l=new kl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:f2(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function f2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t){t=bn(t,Ut);const e=bn(t.firestore,Di);return QB(Fu(e),t._key).then(n=>GI(e,t,n))}class Sm extends h2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function KI(t){t=bn(t,Wa);const e=bn(t.firestore,Di),n=Fu(e),s=new Sm(e);return HI(t._query),XB(n,t._query).then(i=>new WI(e,s,t,i))}function p2(t,e,n){t=bn(t,Ut);const s=bn(t.firestore,Di),i=d2(t.converter,e,n);return zI(s,[o2(r2(s),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Wn.none())])}function m2(t){return zI(bn(t.firestore,Di),[new om(t._key,Wn.none())])}function Rm(t,...e){var n,s,i;t=In(t);let r={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||mv(e[o])||(r=e[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(mv(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof Ut)c=bn(t.firestore,Di),u=Ru(t._key.path),l={next:h=>{e[o]&&e[o](GI(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=bn(t,Wa);c=bn(h.firestore,Di),u=h._query;const d=new Sm(c);l={next:f=>{e[o]&&e[o](new WI(c,d,h,f))},error:e[o+1],complete:e[o+2]},HI(t._query)}return function(d,f,_,g){const y=new bm(g),E=new Tm(f,y,_);return d.asyncQueue.enqueueAndForget(async()=>ym(await wc(d),E)),()=>{y.Na(),d.asyncQueue.enqueueAndForget(async()=>vm(await wc(d),E))}}(Fu(c),u,a,l)}function zI(t,e){return function(s,i){const r=new us;return s.asyncQueue.enqueueAndForget(async()=>MB(await YB(s),i,r)),r.promise}(Fu(t),e)}function GI(t,e,n){const s=n.docs.get(e._key),i=new Sm(t);return new jI(t,i,e._key,s,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){eo=i})(Gr),Yn(new Cn("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Di(new EU(s.getProvider("auth-internal")),new AU(s.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new X(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new da(c.options.projectId,u)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Gt(My,"4.4.0",e),Gt(My,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="firebasestorage.googleapis.com",_2="storageBucket",g2=2*60*1e3,y2=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends ys{constructor(e,n,s=0){super($h(e),`Firebase Storage: ${n} (${$h(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $h(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Jn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Jn||(Jn={}));function $h(t){return"storage/"+t}function v2(){const t="An unknown error occurred, please check the error payload for server response.";return new Zn(Jn.UNKNOWN,t)}function E2(){return new Zn(Jn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function T2(){return new Zn(Jn.CANCELED,"User canceled the upload/download.")}function w2(t){return new Zn(Jn.INVALID_URL,"Invalid URL '"+t+"'.")}function b2(t){return new Zn(Jn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function _v(t){return new Zn(Jn.INVALID_ARGUMENT,t)}function QI(){return new Zn(Jn.APP_DELETED,"The Firebase app was deleted.")}function A2(t){return new Zn(Jn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=En.makeFromUrl(e,n)}catch{return new En(e,"")}if(s.path==="")return s;throw b2(e)}static makeFromUrl(e,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",f=new RegExp(`^https?://${h}/${u}/b/${i}/o${d}`,"i"),_={bucket:1,path:3},g=n===YI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",E=new RegExp(`^https?://${g}/${i}/${y}`,"i"),w=[{regex:a,indices:l,postModify:r},{regex:f,indices:_,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<w.length;b++){const M=w[b],P=M.regex.exec(e);if(P){const q=P[M.indices.bucket];let V=P[M.indices.path];V||(V=""),s=new En(q,V),M.postModify(s);break}}if(s==null)throw w2(e);return s}}class I2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e,n){let s=1,i=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function h(y){i=setTimeout(()=>{i=null,t(f,l())},y)}function d(){r&&clearTimeout(r)}function f(y,...E){if(c){d();return}if(y){d(),u.call(null,y,...E);return}if(l()||o){d(),u.call(null,y,...E);return}s<64&&(s*=2);let w;a===1?(a=2,w=0):w=(s+Math.random())*1e3,h(w)}let _=!1;function g(y){_||(_=!0,d(),!c&&(i!==null?(y||(a=2),clearTimeout(i),h(0)):y||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,g(!0)},n),g}function S2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){return t!==void 0}function gv(t,e,n,s){if(s<e)throw _v(`Invalid value for '${t}'. Expected ${e} or greater.`);if(s>n)throw _v(`Invalid value for '${t}'. Expected ${n} or less.`)}function P2(t){const e=encodeURIComponent;let n="?";for(const s in t)if(t.hasOwnProperty(s)){const i=e(s)+"="+e(t[s]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ic;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ic||(Ic={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n,s,i,r,o,a,l,c,u,h,d=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,_)=>{this.resolve_=f,this.reject_=_,this.start_()})}start_(){const e=(s,i)=>{if(i){s(!1,new gl(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Ic.NO_ERROR,l=r.getStatus();if(!a||N2(l,this.additionalRetryCodes_)&&this.retry){const u=r.getErrorCode()===Ic.ABORT;s(!1,new gl(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;s(!0,new gl(c,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());R2(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=v2();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?QI():T2();o(l)}else{const l=E2();o(l)}};this.canceled_?n(!1,new gl(!1,null,!0)):this.backoffId_=C2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&S2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class gl{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function k2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function D2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function x2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function L2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function M2(t,e,n,s,i,r,o=!0){const a=P2(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return x2(c,e),k2(c,n),D2(c,r),L2(c,s),new O2(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n){this._service=e,n instanceof En?this._location=n:this._location=En.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Cc(e,n)}get root(){const e=new En(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return F2(this._location.path)}get storage(){return this._service}get parent(){const e=V2(this._location.path);if(e===null)return null;const n=new En(this._location.bucket,e);return new Cc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw A2(e)}}function yv(t,e){const n=e==null?void 0:e[_2];return n==null?null:En.makeFromBucketSpec(n,t)}class $2{constructor(e,n,s,i,r){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=YI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=g2,this._maxUploadRetryTime=y2,this._requests=new Set,i!=null?this._bucket=En.makeFromBucketSpec(i,this._host):this._bucket=yv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=En.makeFromBucketSpec(this._url,e):this._bucket=yv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cc(this,e)}_makeRequest(e,n,s,i,r=!0){if(this._deleted)return new I2(QI());{const o=M2(e,this._appId,s,i,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,i).getPromise()}}const vv="@firebase/storage",Ev="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="storage";function B2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new $2(n,s,i,e,Gr)}function H2(){Yn(new Cn(U2,B2,"PUBLIC").setMultipleInstances(!0)),Gt(vv,Ev,""),Gt(vv,Ev,"esm2017")}H2();const Uh=new WeakMap;function XI(t,e){return Uh.has(e)||Uh.set(e,t||{f:{},r:{},s:{},u:{}}),Uh.get(e)}function j2(t,e,n,s){if(!t)return n;const[i,r]=JI(t);if(!i)return n;const o=XI(void 0,s)[i]||{},a=e||r;return a&&a in o?o[a]:n}function W2(t,e,n,s){if(!t)return;const[i,r]=JI(t);if(!i)return;const o=XI(void 0,s)[i],a=e||r;if(a)return n.then(l=>{o[a]=l}).catch(Mn),a}function JI(t){return TM(t)||wM(t)?["f",t.path]:bM(t)?["r",t.toString()]:AM(t)?["s",t.toString()]:[]}const Bh=new WeakMap;function q2(t,e,n){const s=gw();Bh.has(s)||Bh.set(s,new Map);const i=Bh.get(s),r=W2(e,n,t,s);return r&&i.set(r,t),r?()=>i.delete(r):Mn}const K2={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function lf(t,e,n,s){if(!vM(t))return[t,{}];const i=[{},{}],r=Object.keys(n).reduce((a,l)=>{const c=n[l];return a[c.path]=c.data(),a},{});function o(a,l,c,u){l=l||{};const[h,d]=u;Object.getOwnPropertyNames(a).forEach(f=>{const _=Object.getOwnPropertyDescriptor(a,f);_&&!_.enumerable&&Object.defineProperty(h,f,_)});for(const f in a){const _=a[f];if(_==null||_ instanceof Date||_ instanceof et||_ instanceof $u)h[f]=_;else if(cp(_)){const g=c+f;h[f]=g in n?l[f]:_.path,d[g]=_.converter?_:_.withConverter(s.converter)}else if(Array.isArray(_)){h[f]=Array(_.length);for(let g=0;g<_.length;g++){const y=_[g];y&&y.path in r&&(h[f][g]=r[y.path])}o(_,l[f]||h[f],c+f+".",[h[f],d])}else Fi(_)?(h[f]={},o(_,l[f],c+f+".",[h[f],d])):h[f]=_}}return o(t,e,"",i),i}const Pm={reset:!1,wait:!0,maxRefDepth:2,converter:K2,snapshotOptions:{serverTimestamps:"estimate"}};function Sc(t){for(const e in t)t[e].unsub()}function cf(t,e,n,s,i,r,o,a,l){const[c,u]=lf(s.data(t.snapshotOptions),lp(e,n),i,t);r.set(e,n,c),uf(t,e,n,i,u,r,o,a,l)}function z2({ref:t,target:e,path:n,depth:s,resolve:i,reject:r,ops:o},a){const l=Object.create(null);let c=Mn;return a.once?qI(t).then(u=>{u.exists()?cf(a,e,n,u,l,o,s,i,r):(o.set(e,n,null),i())}).catch(r):c=Rm(t,u=>{u.exists()?cf(a,e,n,u,l,o,s,i,r):(o.set(e,n,null),i())},r),()=>{c(),Sc(l)}}function uf(t,e,n,s,i,r,o,a,l){const c=Object.keys(i);if(Object.keys(s).filter(g=>c.indexOf(g)<0).forEach(g=>{s[g].unsub(),delete s[g]}),!c.length||++o>t.maxRefDepth)return a(n);let h=0;const d=c.length,f=Object.create(null);function _(g){g in f&&++h>=d&&a(n)}c.forEach(g=>{const y=s[g],E=i[g],C=`${n}.${g}`;if(f[C]=!0,y)if(y.path!==E.path)y.unsub();else return;s[g]={data:()=>lp(e,C),unsub:z2({ref:E,target:e,path:C,depth:o,ops:r,resolve:_.bind(null,C),reject:l},t),path:E.path}})}function G2(t,e,n,s,i,r){const o=Object.assign({},Pm,r),{snapshotListenOptions:a,snapshotOptions:l,wait:c,once:u}=o,h="value";let d=cr(c?[]:t.value);c||n.set(t,h,[]);const f=s;let _,g=Mn;const y=[],E={added:({newIndex:w,doc:b})=>{y.splice(w,0,Object.create(null));const M=y[w],[P,q]=lf(b.data(l),void 0,M,o);n.add(ns(d),w,P),uf(o,d,`${h}.${w}`,M,q,n,0,s.bind(null,b),i)},modified:({oldIndex:w,newIndex:b,doc:M})=>{const P=ns(d),q=y[w],V=P[w],[Z,Y]=lf(M.data(l),V,q,o);y.splice(b,0,q),n.remove(P,w),n.add(P,b,Z),uf(o,d,`${h}.${b}`,q,Y,n,0,s,i)},removed:({oldIndex:w})=>{const b=ns(d);n.remove(b,w),Sc(y.splice(w,1)[0])}};function C(w){const b=w.docChanges(a);if(!_&&b.length){_=!0;let M=0;const P=b.length,q=Object.create(null);for(let V=0;V<P;V++)q[b[V].doc.id]=!0;s=V=>{V&&V.id in q&&++M>=P&&(c&&(n.set(t,h,ns(d)),d=t),f(ns(d)),s=Mn)}}b.forEach(M=>{E[M.type](M)}),b.length||(c&&(n.set(t,h,ns(d)),d=t),s(ns(d)))}return u?KI(e).then(C).catch(i):g=Rm(e,C,i),w=>{if(g(),w){const b=typeof w=="function"?w():[];n.set(t,h,b)}y.forEach(Sc)}}function Y2(t,e,n,s,i,r){const o=Object.assign({},Pm,r),a="value",l=Object.create(null);s=IM(s,()=>lp(t,a));let c=Mn;function u(h){h.exists()?cf(o,t,a,h,l,n,0,s,i):(n.set(t,a,null),s(null))}return o.once?qI(e).then(u).catch(i):c=Rm(e,u,i),h=>{if(c(),h){const d=typeof h=="function"?h():null;n.set(t,a,d)}Sc(l)}}const Tv=Symbol();function ZI(t,e){let n=Mn;const s=Object.assign({},Pm,e),i=ns(t),r=s.target||cr();SM()&&(s.once=!0);const o=j2(i,s.ssrKey,Tv,gw()),a=o!==Tv;a&&(r.value=o);let l=!a;const c=cr(!1),u=cr(),h=GE(),d=NE();let f=Mn;function _(){let E=ns(t);const C=new Promise((w,b)=>{if(n(s.reset),!E)return n=Mn,w(null);c.value=l,l=!0,E.converter||(E=E.withConverter(s.converter)),n=(cp(E)?Y2:G2)(r,E,Q2,w,b,s)}).catch(w=>(h.value===C&&(u.value=w),Promise.reject(w))).finally(()=>{h.value===C&&(c.value=!1)});h.value=C}let g=Mn;Lt(t)&&(g=So(t,_)),_(),i&&(f=q2(h.value,i,s.ssrKey)),Xf()&&pT(()=>h.value),d&&yN(y);function y(E=s.reset){g(),f(),n(E)}return Object.defineProperties(r,{error:{get:()=>u},data:{get:()=>r},pending:{get:()=>c},promise:{get:()=>h},stop:{get:()=>y}})}const Q2={set:(t,e,n)=>gM(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function Nm(t,e){return ZI(t,{target:cr([]),...e})}function eC(t,e){return ZI(t,e)}const X2=ZT({apiKey:"AIzaSyBpcciTXyAJMjikhFjBpeve9PmhpkWU4CM",authDomain:"fruuters.firebaseapp.com",projectId:"fruuters",storageBucket:"fruuters.appspot.com",messagingSenderId:"451851486618",appId:"1:451851486618:web:45292e6b65e699a536e623",measurementId:"G-649Y2M0QB5"}),Ho=t2(X2),Rc=OI(Ho,"products"),J2={components:{ListItem:BT,Hero:gs},data(){return{products:Nm(Rc)}},computed:{discountedProducts(){return this.products.filter(t=>t.discount!==0)}}},Z2={class:"container mt-5"},e9=T("h1",{class:"display-5 pt-5 m-5 fw-bold fst-italic"},"Today's pick",-1),t9={class:"w-100 text-center"};function n9(t,e,n,s,i,r){const o=Ye("Hero"),a=Ye("ListItem"),l=Ye("RouterLink");return ue(),Se("div",null,[de(o,{text1:"get your own",text2:"fruits more easier!",img_url:"https://th.bing.com/th/id/OIP.c6Tbz7IbCn9bVXzXQSOqhgHaFN?rs=1&pid=ImgDetMain"}),T("main",Z2,[(ue(!0),Se(Et,null,Sr(r.discountedProducts,(c,u)=>(ue(),ls(a,{index:u,productData:c},null,8,["index","productData"]))),256)),e9,(ue(!0),Se(Et,null,Sr(i.products,(c,u)=>(ue(),ls(a,{index:u,productData:c},null,8,["index","productData"]))),256)),T("div",t9,[de(l,{to:"products",class:"btn btn-nav btn-lg"},{default:Nt(()=>[ze(" See More ")]),_:1})])])])}const wv=Mt(J2,[["render",n9]]),s9={components:{Hero:gs}},i9=Yf('<div class="row container m-auto justify-content-center mt-5"><div class="col-md-8 order-md-1"><form class="needs-validation" novalidate=""><div class="row"><div class="col-md-6 mb-3"><label for="firstName">First name</label><input type="text" class="form-control" id="firstName" placeholder="" value="" required=""><div class="invalid-feedback">Valid first name is required.</div></div><div class="col-md-6 mb-3"><label for="lastName">Last name</label><input type="text" class="form-control" id="lastName" placeholder="" value="" required=""><div class="invalid-feedback">Valid last name is required.</div></div></div><div class="mb-3"><label for="username">Username</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">@</span></div><input type="text" class="form-control" id="username" placeholder="Username" required=""><div class="invalid-feedback" style="width:100%;">Your username is required.</div></div></div><div class="mb-3"><label for="email">Email <span class="text-muted">(Optional)</span></label><input type="email" class="form-control" id="email" placeholder="you@example.com"><div class="invalid-feedback"> Please enter a valid email address for shipping updates. </div></div><div class="mb-3"><label for="address">Address</label><input type="text" class="form-control" id="address" placeholder="1234 Main St" required=""><div class="invalid-feedback">Please enter your shipping address.</div></div><div class="mb-3"><label for="address2">Address 2 <span class="text-muted">(Optional)</span></label><input type="text" class="form-control" id="address2" placeholder="Apartment or suite"></div><div class="row"><div class="col-md-5 mb-3"><label for="country">Country</label><select class="custom-select d-block w-100" id="country" required=""><option value="">Choose...</option><option>United States</option></select><div class="invalid-feedback">Please select a valid country.</div></div><div class="col-md-4 mb-3"><label for="state">State</label><select class="custom-select d-block w-100" id="state" required=""><option value="">Choose...</option><option>California</option></select><div class="invalid-feedback">Please provide a valid state.</div></div><div class="col-md-3 mb-3"><label for="zip">Zip</label><input type="text" class="form-control" id="zip" placeholder="" required=""><div class="invalid-feedback">Zip code required.</div></div></div><hr class="mb-4"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="same-address"><label class="custom-control-label" for="same-address">Shipping address is the same as my billing address</label></div><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="save-info"><label class="custom-control-label" for="save-info">Save this information for next time</label></div><hr class="mb-4"><h4 class="mb-3">Payment</h4><div class="d-block my-3"><div class="custom-control custom-radio"><input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked="" required=""><label class="custom-control-label" for="credit">Credit card</label></div><div class="custom-control custom-radio"><input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required=""><label class="custom-control-label" for="debit">Debit card</label></div><div class="custom-control custom-radio"><input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required=""><label class="custom-control-label" for="paypal">Paypal</label></div></div><div class="row"><div class="col-md-6 mb-3"><label for="cc-name">Name on card</label><input type="text" class="form-control" id="cc-name" placeholder="" required=""><small class="text-muted">Full name as displayed on card</small><div class="invalid-feedback">Name on card is required</div></div><div class="col-md-6 mb-3"><label for="cc-number">Credit card number</label><input type="text" class="form-control" id="cc-number" placeholder="" required=""><div class="invalid-feedback">Credit card number is required</div></div></div><div class="row"><div class="col-md-3 mb-3"><label for="cc-expiration">Expiration</label><input type="text" class="form-control" id="cc-expiration" placeholder="" required=""><div class="invalid-feedback">Expiration date required</div></div><div class="col-md-3 mb-3"><label for="cc-expiration">CVV</label><input type="text" class="form-control" id="cc-cvv" placeholder="" required=""><div class="invalid-feedback">Security code required</div></div></div><hr class="mb-4"><button type="button" class="btn btn-primary rounded-pill rounded-5 px-3 border-0"> Save </button></form></div></div>',1);function r9(t,e,n,s,i,r){const o=Ye("Hero");return ue(),Se("div",null,[de(o,{text1:"Account"}),i9])}const o9=Mt(s9,[["render",r9]]),a9={components:{ListItem:BT,Hero:gs},setup(){const e=$T().params.productId;return{product:eC(bc(Ho,"products",e)).data,id:e}},methods:{getText1(t){return t.split("(")[0].trim()},getText2(t){const e=t.split("(")[1];return e?e.slice(0,-1).trim():""}}},l9={class:"container mt-5"},c9={class:"text-center"};function u9(t,e,n,s,i,r){const o=Ye("Hero"),a=Ye("ListItem"),l=Ye("RouterLink");return ue(),Se("div",null,[s.product?(ue(),ls(o,{key:0,text1:r.getText1(s.product.title),text2:r.getText2(s.product.title),img_url:s.product.img_url},null,8,["text1","text2","img_url"])):xs("",!0),T("main",l9,[s.product?(ue(),ls(a,{key:0,index:0,productData:s.product,detail:!0},null,8,["productData"])):xs("",!0),T("div",c9,[de(l,{to:"/",class:"btn btn-nav"},{default:Nt(()=>[ze("Go Back")]),_:1})])])])}const h9=Mt(a9,[["render",u9]]),d9={components:{Hero:gs}},f9=T("div",{class:"container mt-5"},[T("div",{class:"row"},[T("div",{class:"col-md-5 mr-auto"},[T("p",{class:"mb-5"}," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Iste quaerat autem corrupti asperiores accusantium et fuga! Facere excepturi, quo eos, nobis doloremque dolor labore expedita illum iusto, aut repellat fuga! "),T("ul",{class:"list-unstyled pl-md-5 mb-5"},[T("li",{class:"d-flex text-black mb-2"},[T("span",{class:"mr-3"},[T("span",{class:"icon-map"})]),ze(" Jl. Lorem Ipsum No. 99, Banyuwangi,"),T("br"),ze(" Indonesia ")]),T("li",{class:"d-flex text-black mb-2"},[T("span",{class:"mr-3"},[T("span",{class:"icon-phone"})]),ze(" +62 8123 4567 890 ")]),T("li",{class:"d-flex text-black"},[T("span",{class:"mr-3"},[T("span",{class:"icon-envelope-o"})]),T("a",{href:"/cdn-cgi/l/email-protection",class:"__cf_email__","data-cfemail":"422b2c242d022f3b352720312b36276c212d2f"},"fruuters@gmail.com")])])]),T("div",{class:"col-md-6"},[T("form",{class:"mb-5",method:"post",id:"contactForm",name:"contactForm"},[T("div",{class:"row"},[T("div",{class:"col-md-12 form-group"},[T("label",{for:"name",class:"col-form-label"},"Name"),T("input",{type:"text",class:"form-control",name:"name",id:"name"})])]),T("div",{class:"row"},[T("div",{class:"col-md-12 form-group"},[T("label",{for:"email",class:"col-form-label"},"Email"),T("input",{type:"text",class:"form-control",name:"email",id:"email"})])]),T("div",{class:"row"},[T("div",{class:"col-md-12 form-group"},[T("label",{for:"message",class:"col-form-label"},"Message"),T("textarea",{class:"form-control",name:"message",id:"message",cols:"30",rows:"7"})])]),T("div",{class:"row"},[T("div",{class:"col-md-12"},[T("button",{type:"button",class:"btn btn-primary rounded-pill rounded-5 px-3 border-0"}," Send Message "),T("span",{class:"submitting"})])])]),T("div",{id:"form-message-warning mt-4"})])])],-1);function p9(t,e,n,s,i,r){const o=Ye("Hero");return ue(),Se("div",null,[de(o,{text1:"Contact Us!"}),f9])}const m9=Mt(d9,[["render",p9]]),_9={props:{img_url:String,title:String,text:String,route:String}},g9={class:"col-md-4"},y9={class:"card rounded-5"},v9=["src"],E9={class:"card-body"},T9={class:"card-title"},w9={class:"card-text"};function b9(t,e,n,s,i,r){const o=Ye("RouterLink");return ue(),Se("div",g9,[T("div",y9,[T("img",{src:n.img_url,class:"rounded-top-5"},null,8,v9),T("div",E9,[T("h5",T9,$e(n.title),1),T("p",w9,$e(n.text),1),de(o,{to:n.route,class:"text-white text-decoration-none"},{default:Nt(()=>[ze("See more")]),_:1},8,["to"])])])])}const A9=Mt(_9,[["render",b9]]),I9={components:{Hero:gs,Card:A9}},C9={class:"container mt-5"},S9={class:"row"};function R9(t,e,n,s,i,r){const o=Ye("Hero"),a=Ye("Card");return ue(),Se("div",null,[de(o,{text1:"Categories"}),T("div",C9,[T("div",S9,[de(a,{title:"Mangos",text:"Mangos are lorem ipsum dolor",img_url:"https://s2.bukalapak.com/img/2172597621/w-1000/Tanaman_Mangga_Arumanis.jpg",route:"/"}),de(a,{title:"Mangos",text:"Mangos are lorem ipsum dolor",img_url:"https://s2.bukalapak.com/img/2172597621/w-1000/Tanaman_Mangga_Arumanis.jpg",route:"/"}),de(a,{title:"Mangos",text:"Mangos are lorem ipsum dolor",img_url:"https://s2.bukalapak.com/img/2172597621/w-1000/Tanaman_Mangga_Arumanis.jpg",route:"/"})])])])}const P9=Mt(I9,[["render",R9]]),N9={components:{Hero:gs}},O9=Yf('<div class="container mt-5"><div class="row"><div class="col-md-4 order-md-2 mb-4"><h4 class="d-flex justify-content-between align-items-center mb-3"><span class="text-muted">Your cart</span><span class="badge badge-secondary badge-pill">3</span></h4><ul class="list-group mb-3"><li class="list-group-item d-flex justify-content-between lh-condensed"><div><h6 class="my-0">Product name</h6><small class="text-muted">Brief description</small></div><span class="text-muted">$12</span></li><li class="list-group-item d-flex justify-content-between lh-condensed"><div><h6 class="my-0">Second product</h6><small class="text-muted">Brief description</small></div><span class="text-muted">$8</span></li><li class="list-group-item d-flex justify-content-between lh-condensed"><div><h6 class="my-0">Third item</h6><small class="text-muted">Brief description</small></div><span class="text-muted">$5</span></li><li class="list-group-item d-flex justify-content-between bg-light"><div class="text-success"><h6 class="my-0">Promo code</h6><small>EXAMPLECODE</small></div><span class="text-success">-$5</span></li><li class="list-group-item d-flex justify-content-between"><span>Total (USD)</span><strong>$20</strong></li></ul><form class="card p-2"><div class="input-group"><input type="text" class="form-control" placeholder="Promo code"><div class="input-group-append"><button type="submit" class="btn btn-secondary">Redeem</button></div></div></form></div><div class="col-md-8 order-md-1"><h4 class="mb-3">Billing address</h4><form class="needs-validation" novalidate=""><div class="row"><div class="col-md-6 mb-3"><label for="firstName">First name</label><input type="text" class="form-control" id="firstName" placeholder="" value="" required=""><div class="invalid-feedback">Valid first name is required.</div></div><div class="col-md-6 mb-3"><label for="lastName">Last name</label><input type="text" class="form-control" id="lastName" placeholder="" value="" required=""><div class="invalid-feedback">Valid last name is required.</div></div></div><div class="mb-3"><label for="username">Username</label><div class="input-group"><div class="input-group-prepend"><span class="input-group-text">@</span></div><input type="text" class="form-control" id="username" placeholder="Username" required=""><div class="invalid-feedback" style="width:100%;">Your username is required.</div></div></div><div class="mb-3"><label for="email">Email <span class="text-muted">(Optional)</span></label><input type="email" class="form-control" id="email" placeholder="you@example.com"><div class="invalid-feedback"> Please enter a valid email address for shipping updates. </div></div><div class="mb-3"><label for="address">Address</label><input type="text" class="form-control" id="address" placeholder="1234 Main St" required=""><div class="invalid-feedback">Please enter your shipping address.</div></div><div class="mb-3"><label for="address2">Address 2 <span class="text-muted">(Optional)</span></label><input type="text" class="form-control" id="address2" placeholder="Apartment or suite"></div><div class="row"><div class="col-md-5 mb-3"><label for="country">Country</label><select class="custom-select d-block w-100" id="country" required=""><option value="">Choose...</option><option>United States</option></select><div class="invalid-feedback">Please select a valid country.</div></div><div class="col-md-4 mb-3"><label for="state">State</label><select class="custom-select d-block w-100" id="state" required=""><option value="">Choose...</option><option>California</option></select><div class="invalid-feedback">Please provide a valid state.</div></div><div class="col-md-3 mb-3"><label for="zip">Zip</label><input type="text" class="form-control" id="zip" placeholder="" required=""><div class="invalid-feedback">Zip code required.</div></div></div><hr class="mb-4"><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="same-address"><label class="custom-control-label" for="same-address">Shipping address is the same as my billing address</label></div><div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" id="save-info"><label class="custom-control-label" for="save-info">Save this information for next time</label></div><hr class="mb-4"><h4 class="mb-3">Payment</h4><div class="d-block my-3"><div class="custom-control custom-radio"><input id="credit" name="paymentMethod" type="radio" class="custom-control-input" checked="" required=""><label class="custom-control-label" for="credit">Credit card</label></div><div class="custom-control custom-radio"><input id="debit" name="paymentMethod" type="radio" class="custom-control-input" required=""><label class="custom-control-label" for="debit">Debit card</label></div><div class="custom-control custom-radio"><input id="paypal" name="paymentMethod" type="radio" class="custom-control-input" required=""><label class="custom-control-label" for="paypal">Paypal</label></div></div><div class="row"><div class="col-md-6 mb-3"><label for="cc-name">Name on card</label><input type="text" class="form-control" id="cc-name" placeholder="" required=""><small class="text-muted">Full name as displayed on card</small><div class="invalid-feedback">Name on card is required</div></div><div class="col-md-6 mb-3"><label for="cc-number">Credit card number</label><input type="text" class="form-control" id="cc-number" placeholder="" required=""><div class="invalid-feedback">Credit card number is required</div></div></div><div class="row"><div class="col-md-3 mb-3"><label for="cc-expiration">Expiration</label><input type="text" class="form-control" id="cc-expiration" placeholder="" required=""><div class="invalid-feedback">Expiration date required</div></div><div class="col-md-3 mb-3"><label for="cc-expiration">CVV</label><input type="text" class="form-control" id="cc-cvv" placeholder="" required=""><div class="invalid-feedback">Security code required</div></div></div><hr class="mb-4"><button class="btn btn-primary btn-lg btn-block" type="submit"> Continue to checkout </button></form></div></div></div>',1);function k9(t,e,n,s,i,r){const o=Ye("Hero");return ue(),Se("div",null,[de(o,{text1:"Checkout"}),O9])}const D9=Mt(N9,[["render",k9]]),x9={components:{RouterLink:tu,Hero:gs},data(){return{products:Nm(Rc)}}},L9={class:"container mt-5"},M9={class:"list-group rounded-5"},V9=["src"],F9={class:"h5 fw-bold col-4"},$9={class:"h5 col-1"};function U9(t,e,n,s,i,r){const o=Ye("Hero"),a=Ye("RouterLink");return ue(),Se("div",null,[de(o,{text1:"All Products"}),T("main",L9,[T("ul",M9,[(ue(!0),Se(Et,null,Sr(i.products,l=>(ue(),Se("li",{key:l.id,class:"list-group-item justify-content-evenly py-0 d-flex flex-wrap align-items-center"},[T("img",{src:l.img_url,class:"my-2 rounded-5 col-2",alt:""},null,8,V9),T("span",F9,$e(l.title),1),T("div",$9,"$"+$e(l.price),1),de(a,{to:{name:"product",params:{productId:l.id}},class:"col-md-2 btn btn-primary"},{default:Nt(()=>[ze(" Learn More ")]),_:2},1032,["to"])]))),128))])])])}const B9=Mt(x9,[["render",U9],["__scopeId","data-v-b3811278"]]),H9={components:{Hero:gs},data(){const e=$T().params.productId;if(e){const n=eC(bc(Ho,"products",e));if(n)return{title:n.value.title,description:n.value.description,discount:n.value.discount,price:n.value.price,img_url:n.value.img_url,produced_in:n.value.produced_in,production_capacity:n.value.production_capacity,product_stock:n.value.product_stock,selectedProducers:[],producers:[],success:!1,editMode:!1,productId:null}}return{title:"",description:"",discount:0,price:0,img_url:"",produced_in:"",production_capacity:0,product_stock:0,selectedProducers:[],producers:[],success:!1,editMode:!1,productId:null}},async created(){this.$route.params.productId&&(this.editMode=!0,this.productId=this.$route.params.productId),await this.fetchProducers()},methods:{async addProduct(){const t=this.selectedProducers.map(e=>({id:e}));await p2(bc(Ho,"products",this.title),{title:this.title,description:this.description,discount:this.discount,price:this.price,img_url:this.img_url,produced_in:this.produced_in,product_stock:this.product_stock,production_capacity:this.production_capacity,producers:t}),this.success=!0},async fetchProducers(){const t=OI(Ho,"producers"),e=await KI(t);this.producers=e.docs.map(n=>({id:n.id,name:n.data().name,location:n.data().location}))}}},j9={class:"form-group mt-3"},W9=T("label",{for:"title"},"Title:",-1),q9={class:"form-group mt-3"},K9=T("label",{for:"description"},"Description:",-1),z9={class:"form-group mt-3"},G9=T("label",{for:"discount"},"Discount:",-1),Y9={class:"form-group mt-3"},Q9=T("label",{for:"price"},"Price:",-1),X9={class:"form-group mt-3"},J9=T("label",{for:"img_url"},"Image URL:",-1),Z9={class:"form-group mt-3"},eH=T("label",{for:"produced_in"},"Produced In:",-1),tH={class:"form-group mt-3"},nH=T("label",{for:"production_capacity"},"Production Capacity:",-1),sH={class:"form-group mt-3"},iH=T("label",{for:"production_capacity"},"Stock:",-1),rH={class:"form-group mt-3"},oH=T("label",{for:"producers"},"Producers:",-1),aH=["value"],lH={key:0,class:"alert alert-success"},cH={type:"submit",class:"mt-5 btn btn-primary"};function uH(t,e,n,s,i,r){const o=Ye("Hero");return ue(),Se("div",null,[de(o,{text1:i.editMode?"Edit Product":"Add Product"},null,8,["text1"]),ze(" "+$e(i.productId)+" ",1),T("form",{class:"container",onSubmit:e[9]||(e[9]=Tk((...a)=>r.addProduct&&r.addProduct(...a),["prevent"]))},[T("div",j9,[W9,kn(T("input",{type:"text",id:"title",name:"title",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>i.title=a)},null,512),[[ts,i.title]])]),T("div",q9,[K9,kn(T("textarea",{id:"description",name:"description",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=a=>i.description=a)},null,512),[[ts,i.description]])]),T("div",z9,[G9,kn(T("input",{type:"number",id:"discount",name:"discount",class:"form-control","onUpdate:modelValue":e[2]||(e[2]=a=>i.discount=a)},null,512),[[ts,i.discount]])]),T("div",Y9,[Q9,kn(T("input",{type:"number",id:"price",name:"price",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=a=>i.price=a)},null,512),[[ts,i.price]])]),T("div",X9,[J9,kn(T("input",{type:"text",id:"img_url",name:"img_url",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=a=>i.img_url=a)},null,512),[[ts,i.img_url]])]),T("div",Z9,[eH,kn(T("input",{type:"text",id:"produced_in",name:"produced_in",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=a=>i.produced_in=a)},null,512),[[ts,i.produced_in]])]),T("div",tH,[nH,kn(T("input",{type:"number",id:"production_capacity",name:"production_capacity",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=a=>i.production_capacity=a)},null,512),[[ts,i.production_capacity]])]),T("div",sH,[iH,kn(T("input",{type:"number",id:"product_stock",name:"product_stock",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=a=>i.product_stock=a)},null,512),[[ts,i.product_stock]])]),T("div",rH,[oH,kn(T("select",{id:"producers",name:"producers",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=a=>i.selectedProducers=a),multiple:""},[(ue(!0),Se(Et,null,Sr(i.producers,a=>(ue(),Se("option",{key:a.id,value:a.id},$e(a.name)+" - "+$e(a.location),9,aH))),128))],512),[[yk,i.selectedProducers]])]),i.success?(ue(),Se("div",lH,"Successfully added "+$e(i.title),1)):xs("",!0),T("button",cH,$e(i.editMode?"Update Product":"Add Product"),1)],32)])}const bv=Mt(H9,[["render",uH]]),hH={components:{RouterLink:tu,Hero:gs},data(){return{products:Nm(Rc)}},methods:{async deleteProduct(t){if(confirm("Are you sure you want to delete this product?"))try{await m2(bc(Rc,t)),console.log("Product deleted successfully.")}catch(e){console.error("Error deleting product:",e)}}}},dH=t=>(jf("data-v-cb45829a"),t=t(),Wf(),t),fH={class:"container mt-5"},pH={class:"list-group rounded-5"},mH=["src"],_H={class:"h5 fw-bold col-4"},gH={class:"h5 col-1"},yH={class:"col-md-2 d-flex"},vH=dH(()=>T("button",{class:"btn btn-primary me-2"},"Edit",-1)),EH=["onClick"];function TH(t,e,n,s,i,r){const o=Ye("Hero"),a=Ye("RouterLink");return ue(),Se("div",null,[de(o,{text1:"All Products"}),T("main",fH,[T("ul",pH,[(ue(!0),Se(Et,null,Sr(i.products,l=>(ue(),Se("li",{key:l.id,class:"list-group-item justify-content-evenly py-0 d-flex flex-wrap align-items-center"},[T("img",{src:l.img_url,class:"my-2 rounded-5 col-2",alt:""},null,8,mH),T("span",_H,$e(l.title),1),T("div",gH,"$"+$e(l.price),1),T("div",yH,[de(a,{to:{name:"editproduct",params:{productId:l.id}}},{default:Nt(()=>[vH]),_:2},1032,["to"]),T("button",{class:"btn btn-danger",onClick:c=>r.deleteProduct(l.id)},"Delete",8,EH)])]))),128))])])])}const wH=Mt(hH,[["render",TH],["__scopeId","data-v-cb45829a"]]),bH=zD({history:uD("/fruuters/"),routes:[{path:"/",name:"home",component:wv},{path:"/offers",name:"offers",component:wv},{path:"/account",name:"account",component:o9},{path:"/product/:productId",name:"product",component:h9},{path:"/products",name:"products",component:B9},{path:"/contact",name:"contact",component:m9},{path:"/categories",name:"categories",component:P9},{path:"/checkout",name:"checkout",component:D9},{path:"/admin/addproduct/",name:"addproduct",component:bv},{path:"/admin/editproduct/:productId",name:"editproduct",component:bv},{path:"/admin/manageproduct",name:"manageproduct",component:wH}],scrollBehavior(t,e,n){return{top:0}}}),tC=Ak(Kk);tC.use(bH);tC.mount("#app");
